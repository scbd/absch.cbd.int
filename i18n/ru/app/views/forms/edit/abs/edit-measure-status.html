<div >

    <div ng-include="'/app/views/forms/edit/edit_header.html'"></div>

    <div class="edit-measure-status innerPageEditForm"  style="padding: 24px;background-color:#FFF;border-bottom:2px solid #ccc;"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">
            <div>
                <workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
                                        tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
                                        on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
                                        on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
                                        data-container="{{container}}" is-dialog="{{isDialog}}"><!-- <intro-form></intro-form> --> <!--only use it if default article intro is not required --><edit-form>

                        <form class="editForm" name="editForm" style="margin-top:10px">
                            <div ng-show="tab=='edit'" km-tab="edit">

                                <section>
                                    <legend>Общая информация</legend>
                                    <div class="row">
                                        <div class="col-xs-12" >
                                            <div class="km-control-group" name="header.languages" required caption="Выберите язык(и) для представления этой записи:">
                                                <div class="indent">
                                                    <div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="government" required caption="Страна">
                                                <div afc-autocomplete required name="government" ng-disabled="userGovernment()" ng-model="document.government" ng-change="onCountryChange(document.government.identifier)"
                                                     source="options.countries" filter="genericFilter" mapping="genericMapping" selectbox="true" placeholder="Выберите страну..."></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section>
                                    <legend>Информация о принятии мер ДГРСИВ</legend>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="km-control-group" required name="jurisdiction" caption="К какому уровню юрисдикции относится текущий статус мер ДГРСИВ, упоминаемых в данной записи?">
                                                <div km-select name="jurisdiction" ng-model="document.jurisdiction" ng-disabled="!document.government.identifier" 
                                                    locales="document.header.languages" items="options.jurisdictions()" ng-change="updateTitle()"></div>
                                            </div>
                                        </div>

                                        <div class="col-md-12" ng-if="document.jurisdiction && isSubnational()">
                                            <div class="km-control-group"  name="jurisdiction.customValue" caption="">
                                                <label name="jurisdiction.customValue" required="isSubnational()" class="control-label" for="jurisdiction.customValue">Название субнациональной юрисдикции</label>
                                                <div km-textbox-ml required="isSubnational()"  ng-model="document.jurisdiction.customValue" ng-change="updateTitle()"
                                                    locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-md-12" ng-if="document.jurisdiction && isCommunity()">
                                            <div class="km-control-group" name="jurisdiction.customValue" caption="">
                                                <label name="jurisdiction.customValue" required="isCommunity()" class="control-label" for="jurisdiction.customValue">Название общины</label>
                                                <div km-textbox-ml required="isCommunity()" ng-model="document.jurisdiction.customValue" placeholder=""
                                                ng-change="updateTitle()" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="isJurisdictionRegional() && !isEu()">
                                        <div class="alert alert-warning">
                                            <h4>Просьба заметить, что региональные или многосторонние меры следует регистрировать в Механизме посредничества для регулирования ДГРСИВ только один раз и что региональная мера, охватывающая каждую из выбранных стран, будет отображаться как часть правовой базы этих стран в их профиле. Рекомендуется, чтобы одна страна согласилась зарегистрировать меру от имени региональной организации или группы стран, в которых применяется одна и та же мера.</h4>
                                        </div>
                                    </div>
                                    <div class="row" ng-if="isJurisdictionRegional() && isEu()"><!--  for EU only--><div class="col-xs-3">
                                            <div class="km-control-group form-group" required name="jurisdictionRegions" caption="">
                                                <label name="jurisdictionRegions" for="jurisdictionRegions">Регион(ы) юрисдикции</label>
                                                <div km-select multiple required name="regions"
                                                    ng-model="jurisdictionRegions.regions" placeholder="Выберите вариант(ы)"
                                                    items="options.regions()"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-1">и/или</div>
                                        <div class="col-xs-3">
                                        <div class="km-control-group form-group" name="jurisdictionCountries" caption="">
                                                <label name="jurisdictionCountries" required class="control-label" for="jurisdictionCountries">Страна(-ы) юрисдикции</label>
                                                <div km-select multiple required  ng-model="jurisdictionRegions.countries" placeholder="Выберите вариант(ы)" items="options.countries()"></div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <div class="km-control-group" required name="adoption" caption="Дата опубликования записи">
                                                <div km-date placeholder="ГГГГ-ММ-ДД" name="adoption" required ng-model="document.adoption" ng-change="updateTitle()"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-12 jurisdiction-title">
                                            <div class="km-control-group" required name="title" caption="Название">
                                                <div km-textbox-ml disabled ng-disable="true" name="title" required ng-model="document.title" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div><!-- ToDo: labels need to verify --><div class="row">
                                       <div class="col-xs-12">
                                            <div class="km-control-group" name="measureEstablished" required caption="Статус мер ДГРСИВ в вашей стране (или указанной юрисдикции)?">

                                                <label class="control-label planing-plc">
                                                    <input type="radio" ng-model="document.measureEstablished" ng-value="true" name="measureEstablished" ng-click="onMeasureEstablished()" />Да, меры ДГРСИВ приняты</label>
                                                <label class="control-label planing-plc">
                                                    <input type="radio" ng-model="document.measureEstablished" ng-value="false" name="measureEstablished" ng-click="onMeasureEstablished()" />Нет, меры ДГРСИВ не приняты</label>
                                            </div>
                                       </div>
                                        <div class="col-xs-12" ng-if="document.measureEstablished">
                                            <label name="status" for="status">Выберите статус</label>
                                            <div class="km-control-group" name="status" required caption="">
                                                <div km-term-radio name="noStatus" required ng-model="document.status" locales="document.header.languages"
                                                    terms="options.yesStatus()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.measureEstablished != undefined && !document.measureEstablished">
                                            <label name="status" for="status">Выберите статус</label>
                                            <div class="km-control-group" name="status" required caption="">
                                                <div km-term-radio required name="yesStatus" ng-model="document.status" locales="document.header.languages"
                                                    terms="options.noStatus()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12" ng-if="document.measureEstablished != undefined">
                                        <div class="km-control-group" name="statusDescription"  caption="Просьба представить дополнительную информацию о текущем прогрессе в принятии мер ДГРСИВ и/или краткое описание основных возникших трудностей и проблем.">
                                            <div km-textbox-ml name="statusDescription" required ng-model="document.statusDescription" locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="isSubjectToPic" required caption="Регулируется ли доступ к генетическим ресурсам на основе предварительного обоснованного согласия (ПОС), предусмотренного статьей 6.1?">
                                                <div km-yes-no required name="isSubjectToPic" ng-model="document.isSubjectToPic" locales="document.header.languages"></div>
                                            </div>
                                        </div>

                                        <div class="col-xs-12" ng-if="document.isSubjectToPic != undefined && !document.isSubjectToPic">
                                            <div class="km-control-group" name="noPicStatus" required caption="">
                                                <label name="noPicStatus" for="noPicStatus">Выберите статус ПОС</label>
                                                <div km-term-radio required name="noPicStatus" ng-model="document.noPicStatus" locales="document.header.languages"
                                                     terms="options.noPicStatus()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.isSubjectToPic">
                                            <div class="km-control-group" required name="picMeasures" caption="Выберите из следующего списка соответствующую(-ие) меру (меры), регулирующую(-ие) доступ к генетическим ресурсам.">
                                                <div document-selector ng-disabled="!document.government.identifier" name="picMeasures" ng-model="document.picMeasures" question="measure"
                                                     on-build-query="onMeaureQuery(searchText)" allow-new-schema="measure" allow-new="true" filter="true"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.isSubjectToPic != undefined">
                                            <div class="km-control-group" name="picMeasuresDescription"  caption="Просьба дополнительно пояснить свой ответ.">
                                                <div km-textbox-ml name="picMeasuresDescription" required ng-model="document.picMeasuresDescription" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="hasIplc" required caption="Существуют ли в вашей стране (или указанной юрисдикции) коренные народы и местные общины?">
                                                <div km-yes-no required name="hasIplc" ng-model="document.hasIplc" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplc">
                                            <div class="km-control-group" name="iplcType" required caption="">
                                                <div km-term-radio required name="iplcType" ng-model="document.iplcType" locales="document.header.languages"
                                                     terms="options.iplcType()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplc != undefined">
                                            <div class="km-control-group" name="iplcDescription" caption="Просьба дополнительно пояснить свой ответ.">
                                                <div km-textbox-ml name="iplcDescription" required ng-model="document.iplcDescription" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="hasIplcRightEstablished" required caption="Обладают ли коренные народы и местные общины установленным правом предоставлять доступ к генетическим ресурсам в соответствии с положениями внутригосударственного права?">
                                                <div km-yes-no ng-model="document.hasIplcRightEstablished" ng-click="onHasIplcRightChange()" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplcRightEstablished">
                                            <label name="isIplcRightFullyImplemented" for="isIplcRightFullyImplemented">Реализуется ли право КНМО в полном объеме?</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightFullyImplemented" ng-value="true" name="isIplcRightFullyImplemented" />Да (в полном объеме)</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightFullyImplemented" ng-value="false" name="isIplcRightFullyImplemented" />В некоторой степени</label>

                                            <div class="km-control-group" name="iplcMeasures" required caption="Выберите из следующего списка соответствующую(-ие) меру (меры), касающуюся (касающиеся) доступа к генетическим ресурсам, находящимся во владении коренных народов и местных общин.">
                                                <div document-selector ng-disabled="!document.government.identifier" name="iplcMeasures" ng-model="document.iplcMeasures" question="measure"
                                                on-build-query="onMeaureQuery(searchText)" allow-new-schema="measure" allow-new="true" filter="true"></div>
                                            </div>

                                            <div class="km-control-group" required name="otherIplcRelatedRecords" caption="Просьба выбрать другую соответствующую информацию о процедурах ДГРСИВ, национальных веб-сайтах или базах данных, общинных протоколах и процедурах и обычном праве и/или компетентных национальных органах из следующего списка.">
                                                <div document-selector ng-disabled="!document.government.identifier" name="otherIplcRelatedRecords"  ng-model="document.otherIplcRelatedRecords" question="measure"
                                                     on-build-query="onRecordQuery(searchText)" filter="true"></div>
                                            </div>

                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplcRightEstablished != undefined && !document.hasIplcRightEstablished">
                                            <label name="isIplcRightInPlan" for="isIplcRightInPlan">Планируется ли принять меры в отношении права КНМО?</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightInPlan" ng-value="true" name="isIplcRightInPlan" />Но есть проект или планируется</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightInPlan" ng-value="false" name="isIplcRightInPlan" />Не планируется</label>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplcRightEstablished != undefined">
                                                <div class="km-control-group" name="iplcMeasuresDescription" caption="Просьба дополнительно пояснить свой ответ.">
                                                    <div km-textbox-ml name="iplcMeasuresDescription" required ng-model="document.iplcMeasuresDescription" locales="document.header.languages"></div>
                                                </div>
                                          </div>
                                       </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="hasStepsForIplcApproval" required caption="Приняты ли в вашей стране (или указанной юрисдикции) меры с целью обеспечения того, чтобы доступ к традиционным знаниям, связанным с генетическими ресурсами, носителями которых являются коренные народы и местные общины в вашей стране, осуществлялся с предварительного и обоснованного согласия или одобрения и при участии данных коренных народов и местных общин и чтобы были установлены взаимосогласованные условия?">
                                                <div km-yes-no required ng-model="document.hasStepsForIplcApproval" ng-click="onHasStepsChange()" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasStepsForIplcApproval">
                                          <label  name="isStepsForIplcApprovalImplemented" for="isStepsForIplcApprovalImplemented">Приняты ли меры для одобрения КНМО?</label>
                                                 <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalImplemented" ng-value="true" name="isStepsForIplcApprovalImplemented" />Да (в полном объеме)</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalImplemented" ng-value="false" name="isStepsForIplcApprovalImplemented" />В некоторой степени</label>

                                            <div class="km-control-group" required name="iplcApprovalMeasures" caption="Выберите из следующего списка соответствующую(-ие) меру (меры), касающуюся (касающиеся) доступа к генетическим ресурсам, находящимся во владении коренных народов и местных общин">
                                                <div document-selector ng-disabled="!document.government.identifier" name="iplcApprovalMeasures"  ng-model="document.iplcApprovalMeasures" question="measure"
                                                    on-build-query="onMeaureQuery(searchText)"allow-new-schema="measure" allow-new="true" filter="true"></div>
                                            </div>

                                            <div class="km-control-group" required name="otherIplcApprovalRecords" caption="Просьба выбрать другую соответствующую информацию о процедурах ДГРСИВ, национальных веб-сайтах или базах данных, общинных протоколах и процедурах и обычном праве и/или компетентных национальных органах из следующего списка">
                                                <div document-selector ng-disabled="!document.government.identifier" name="otherIplcApprovalRecords" ng-model="document.otherIplcApprovalRecords" question="measure"
                                                     on-build-query="onRecordQuery(searchText)" filter="true"></div>
                                            </div>

                                        </div>
                                        <div class="col-xs-12" ng-if="!document.hasStepsForIplcApproval && document.hasStepsForIplcApproval != undefined">
                                            <label  name="isStepsForIplcApprovalInPlan" for="isStepsForIplcApprovalInPlan">Планируется ли принять меры для одобрения КНМО?</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalInPlan" ng-value="true" name="isStepsForIplcApprovalInPlan" />Но есть проект или планируется</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalInPlan" ng-value="false" name="isStepsForIplcApprovalInPlan" />Не планируется</label>

                                        </div>
                                       <div class="col-xs-12" ng-if="document.hasStepsForIplcApproval != undefined">
                                            <div class="km-control-group" name="iplcApprovalDescription" caption="Просьба дополнительно пояснить свой ответ.">
                                                <div km-textbox-ml name="iplcApprovalDescription" required ng-model="document.iplcApprovalDescription" locales="document.header.languages"></div>
                                            </div>
                                       </div>
                                    </div>
                                </section>

                                <section>
                                    <legend>Дополнительная информация</legend>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="address" caption="Any other relevant information">
                                                <div class="help-block">Просьба использовать это поле для представления любой другой актуальной информации, которая, возможно, не была учтена в других разделах записи.</div>
                                                <div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="relevantDocuments" caption="Любые другие соответствующие документы">
                                                <div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier"></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section>
                                    <legend>Примечания</legend>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="notes">
                                                <div class="help-block">Поле «Примечания» включено для индивидуального пользования и становится видимым только при редактировании записи. Оно будет скрыто после опубликования записи. Данное поле не предназначено для конфиденциальной информации.</div>
                                                <div km-notes name="notes" ng-model="document.notes"></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                            </div>
                        </form>
                    </edit-form>
                    <review-form>
                        <view-measure-status ng-model="review.document" locale="review.locale" allow-drafts="true"></view-measure-status>
                    </review-form>
                </workflow-arrow-buttons>
            </div>

        </div>
    </div>
</div>
