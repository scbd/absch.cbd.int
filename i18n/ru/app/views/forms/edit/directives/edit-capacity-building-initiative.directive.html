<div class="innerPageEditForm capacity-building-initiative"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">

		<div class="alert alert-success alert-dismissable" ng-show="msg">
			<button aria-hidden="true" class="close" data-bs-dismiss="alert" ng-click="msg=''" type="button">&times;</button><strong><span ng-bind="msg"></span></strong></div>

		<div workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
		tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
		on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
		on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
		data-container="{{container}}" is-dialog="{{isDialog}}">

			<edit-form>
				<form name="editForm" style="margin-top:10px">


					<div ng-show="tab=='edit'" km-tab="edit">
						<section>
							<div class="well no-shadow bg-white">

								<legend>Общая информация</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="header.languages" required caption="Выберите язык(и) для представления этой записи:">
											<div class="indent">
												<div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="title" caption="Название инициативы">
											<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

							<div class="row">
								<div class="col-md-12">
									<div class="km-control-group" name="projectNumber" caption="Номер или идентификатор проекта">
										<div class="help-info">Просьба указать номер, идентификатор или регистрационный номер проекта (если применимо)</div>
										<div km-textbox-ml name="projectNumber" ng-model="document.projectNumber" locales="document.header.languages"></div>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-md-12">
									<div class="km-control-group" name="projectDocument" caption="Адрес(а) веб-сайта(-ов)">
									<div class="help-info">Укажите URL-адрес (например, http://www.cbd.int) и название веб-сайта (например, «Конвенция о биологическом разнообразии»).</div>
									<div km-link name="projectDocument" required ng-model="document.projectDocument" allow-link="true" allow-file="false" identifier="document.header.identifier"></div>
									</div>
								</div>
							</div>
		
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="contacts" caption="Контактное лицо">
											<div document-selector ng-model="document.contacts" question="contacts"
													on-build-query="onContactQuery(searchText)" allow-new="true" filter="true"
													allow-new-schema="contact"></div>
										</div>
									</div>
								</div>


								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="geographicScope" caption="Географический охват">
											<div km-select name="geographicScope" required ng-model="document.geographicScope"
													placeholder="Выберите один из вариантов" items="options.geographicScope()"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="document.geographicScope && (isGlobalOrRegional() || isNational())">
									<div class="col-md-12">
										<div class="km-control-group"  required style="padding:10px;">
											<div class="row">
												<div class="col-md-3" ng-show="!isNational()">

													<div class="km-control-group" required name="geographicScope" caption="">
															<label name="countryRegions" class="control-label" for="geographicScope">Географическая(-ие) или политическая(-ие)/экономическая(-ие) группа(-ы)</label>
														<div km-select multiple required name="regions"
																ng-model="countryRegions.regions" placeholder="Выберите вариант(ы)"
																items="options.regions()"></div>
													</div>
												</div>
												<div class="col-md-1" ng-hide="!isGlobalOrRegional()">и/или</div>
												<div class="col-md-3">
													<div class="km-control-group" style="text-align: left;"  caption="">
														<label name="countryRegions" ng-required="isNational()" class="control-label" for="countryRegions">Страна(-ы)</label>
														<div km-select multiple required filter-type="startsWith" ng-model="countryRegions.countries" placeholder="Выберите вариант(ы)" items="options.countries()"></div>
													</div>
												</div>
											</div>
										</div></div>
								</div>

								<div class="row" ng-if="document.geographicScope && isSubnational()">
									<div class="col-md-12">
										<div class="km-control-group"  name="countryRegions" caption="">
											<label name="countryRegions" required class="control-label" for="countryRegions">Страна(-ы)</label>
											<div km-select multiple required  ng-model="countryRegions.countries" placeholder="Выберите вариант(ы)" items="options.countries()"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="km-control-group"  name="geographicScope.customValue" caption="">
											<label name="geographicScope.customValue" required="isSubnational()" class="control-label" for="geographicScope.customValue">Название субнациональной юрисдикции</label>
											<div km-textbox-ml required="isSubnational()"  ng-model="document.geographicScope.customValue" placeholder="Выберите вариант(ы)" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="document.geographicScope && isCommunity()">
									<div class="col-md-12">
										<div class="km-control-group"  name="countries" caption="">
											<label name="countryRegions" required class="control-label" for="countryRegions">Страна(-ы)</label>
											<div km-select multiple required ng-model="countryRegions.countries" placeholder="Выберите вариант(ы)" items="options.countries()"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="km-control-group" name="geographicScope.customValue" caption="">
											<label name="geographicScope.customValue" required="isCommunity()" class="control-label" for="geographicScope.customValue">Community name</label>
											<div km-textbox-ml required="isCommunity()" ng-model="document.geographicScope.customValue" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="status" caption="Статус">
											<div km-select name="status" required ng-model="document.status" id="documentStatus"
													placeholder="Выберите один из вариантов" items="options.status()"  show-description="true"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="timeframe" required caption="Сроки">
												<div class="row">
													<div class="col-md-3">
														<div class="km-control-group" name="startDate" caption="Дата начала"
																	help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, Start date">
															<div km-date name="startDate" ng-model="document.startDate"></div>
														</div>
													</div>
													<div class="col-md-3">
														<div class="km-control-group" name="endDate" caption="Дата окончания"
																	help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, End date">
															<div km-date name="startDate" ng-model="document.endDate"></div>
														</div>
													</div>
													<div class="col-md-1 text-center" ng-show="!document.status || isProposedOrApproved()">
														<div class="km-control-group bold" style="margin-top:30px;" >OR</div>
													</div>
													<div class="col-md-5">
														
														<div class="km-control-group" name="duration" caption="Продолжительность" ng-show="!document.status || isProposedOrApproved()">
															<div class="row">
																<div class="col-md-2">
																	<input type="number" name="durationPeriod" ng-model="document.durationPeriod"
																		minlength="1" placeholder="например, 24" ng-change="clearDates()" class="form-control"
																		style="display:inline-block;width:100px"/>
																</div>
																<div class="col-md-2">
																	<div class="km-control-group" name="durationText" caption="">
																		<div style="height: 0px;width:0px;opacity: 0;" name="durationText">
																			<label name="durationText" for="durationText">Продолжительность периода в днях/месяцах/годах</label>
																		</div>
																		<select name="durationText" ng-model="document.durationText"  class="form-control"
																			style="display:inline-block;width:100px" placeholder="eg. Months"
																			ng-options="obj.value as obj.text for obj in timing">
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="activityScope" caption="Тип инициативы по развитию потенциала">
											<div km-term-radio name="activityScope" ng-model="document.activityScope" terms="options.activityScope()"
													show-description="true" binding-type="term" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group"  bold="true" required name="isProjectProgramme" caption="Является ли она частью более крупного проекта или более крупной программы?">
											<div class="km-yes-no" required name="isProjectProgramme" ng-model="document.isProjectProgramme" ng-click="isBroaderProjectSelected(!document.isProjectProgramme)"></div>
										</div>
									</div>
									<div class="col-md-12" ng-if="document.isProjectProgramme">
										<div class="col-md-5">
										<div class="km-control-group" required name="projectProgrammeName" caption="Указать название проекта или программы.">
											<div km-textbox-ml required ng-model="document.projectProgrammeName" locales="document.header.languages"></div>
										</div>
										</div>
										<div class="col-md-2 text-center">и/или</div>
										<div class="col-md-5">
										<div class="km-control-group" required name="broaderProjects" caption="Укажите ссылку на запись в механизме посредничества о данном проекте или данной программе.">
											<div document-selector ng-model="document.broaderProjects" question="broaderProjects"
													on-build-query="onBuildQuery(searchText,'capacityBuildingInitiative')" allow-new-schema="capacityBuildingInitiative" allow-new="true" filter="true"></div>
										</div>
										</div>
										</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required  caption="Agency(ies) or organisation(s) implementing and/or executing the initiative">
											<div class="help-info">В некоторых случаях учреждение может выполнять функции как осуществляющего, так и исполняющего учреждения. В таких случаях отметьте обе ячейки.</div>
											<div class="checkbox"><label for="isImplementedByAgencies"><input type="checkbox" id="isImplementedByAgencies" ng-model="document.isImplementedByAgencies" ng-click="isImpAgencies(!document.isImplementedByAgencies)">Implementing agency(ies) or organization(s)</label></div>

											<div class="row" >
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isImplementedByAgencies" name="implementingAgencies" caption="Выберите осуществляющее(-ие) учреждение(-я) или осуществляющую(-ие) организацию(-и)">
														<div class="help-info">Осуществляющее учреждение — это организация или юридическое лицо, которая/которое отвечает за разработку инициативы и надзор за ее осуществлением, контроль и оценку, включая привлечение средств, обеспечение соблюдения фидуциарных стандартов и контроля качества, а также подготовку докладов о завершении проектов. В конечном счете именно осуществляющее учреждение отвечает за реализацию инициативы и подотчетно донору.</div>

														<div document-selector name="implementingAgencies" ng-model="document.implementingAgencies" question="implementingAgencies"
																on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>

											<div class="checkbox"><label for="isExecutededByAgencies"><input id="isExecutededByAgencies" type="checkbox" ng-model="document.isExecutededByAgencies" ng-click="isExcAgencies(!document.isExecutededByAgencies)">Учреждение(-ия)-исполнитель (исполнители) или организация(-ии)-исполнитель (исполнители)</label></div>
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isExecutededByAgencies" name="executingAgencies" caption="Выберите учреждение(-ия)-исполнитель (исполнители) или организацию(-ии)-исполнитель (исполнители)">
														<div class="help-info">Учреждение-исполнитель — это организация/учреждение, которая/которое непосредственно занимается управлением инициативой, в том числе повседневной деятельностью по планированию, координацией и организацией ее мероприятий, отслеживанием хода осуществления и представлением соответствующей отчетности, закупочной деятельностью и управлением ресурсами (персоналом, средствами, оборудованием и т. д.), а также выполнением других функций по управлению проектами.</div>
														<div document-selector ng-model="document.executingAgencies" question="executingAgencies"
																on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>
											<div class="checkbox"><label for="isCollaboratededByPartners"><input type="checkbox" id="isCollaboratededByPartners" ng-model="document.isCollaboratededByPartners">Сотрудничающий(-ие) партнер(ы)</label></div>
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isCollaboratededByPartners" name="collaboratingPartners" caption="Выберите сотрудничающего(-их) партнера(-ов)">
														<div class="help-info">Collaborating partners refer to entities or organizations making significant financial or other contribution to the initiative and/or actively supporting or collaborating in the implementation of the initiative.</div>
														<div document-selector ng-model="document.collaboratingPartners" question="collaboratingPartners"
																on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Подробная информация</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="description" caption="Краткое описание инициативы, включая ее цели и задачи (не более 150 слов).">
											<div km-textbox-ml required ng-model="document.description" rows="4" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required  name="categories" caption="Категория(-ии) мероприятий по развитию потенциала">
											<div km-term-check required show-description="true" name="categories" ng-model="document.categories" terms="options.absCategories()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="targetGroups" caption="Основная(-ые) целевая(-ые) группа(-ы)/бенефициар(ы)">
											<div km-term-check name="targetGroups"  ng-model="document.targetGroups" terms="options.targetGroups()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								
							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Информация о тематическом охвате инициативы</legend>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group tabular-term-check" name="cbdSubjects"
												caption="Related CBD subject areas">
											<div km-term-check name="cbdSubjects" ng-model="document.cbdSubjects"
													terms="cbdSubjects()" binding-type="term[]" tabular-shape="true"></div>
										</div>
									</div>
								</div>

								<div class="row" ng-if="isABS">
									<div class="col-md-12">
										<div class="km-control-group" name="aichiTargets"
												caption="Айтинские целевые задачи:">
											<div km-term-check name="aichiTargets" required ng-model="document.aichiTargets"
													terms="options.aichiTargets()" binding-type="term[]"></div>
										</div>
									</div>
								</div>

								<div class="row" ng-if="isABS">
									<div class="col-md-12">
										<div class="km-control-group" name="absKeyAreas"
												caption="Ключевые области и стратегические меры по созданию и развитию потенциала">
											<div class="help-info">Ключевые области, определенные в стратегической структуре для создания и развития потенциала в поддержку эффективного осуществления Нагойского протокола (решение NP-1/8).</div>
											<div km-term-check name="absKeyAreas" ng-model="document.absKeyAreas" terms="options.absKeyAreas()"
													binding-type="term[]"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="isBCH">
									<div class="col-md-12">
										<div class="km-control-group tabular-term-check fourth-column" required name="cpbThematicAreas"
												caption="Тематические области биобезопасности">
												<div km-term-check required name="cpbThematicAreas" ng-model="document.cpbThematicAreas" locales="document.header.languages"
												terms="options.cpbThematicAreas()" binding-type="term[]" show-description="true" tabular-shape="true"></div>
										</div>
									</div>
								</div>

							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Информация о финансировании</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="fundingSourceTypes" caption="Тип(ы) источника(-ов) финансирования">
											<div km-term-check show-description="true" name="fundingSourceTypes" ng-model="document.fundingSourceTypes" 
												terms="options.fundingSources()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

							<div class="km-control-group" ng-show="isSelfFunding()" name="selfFunding" caption="Представьте дополнительную информацию о финансировании"><!-- ToDO: isSelfFunding method can also be used --><div km-textbox-ml required="isSelfFunding()" rows="2" name="selfFunding" ng-model="document.fundingSourceTypes[document.fundingSourceTypes.length-1].customValue" placeholder="" locales="document.header.languages"></div>
							</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="coFinancingSources" caption="Основной(-ые) источник(и) финансирования">
											<div document-selector ng-model="document.coreFundingSources" question="coreFundingSources"
													on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="coFinancingSources" caption="Источник(и) совместного финансирования">
											<div document-selector ng-model="document.coFinancingSources" question="coFinancingSources"
													on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

										</div>
									</div>
								</div>


								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="totalBudget" caption="Общий бюджет (сумма в долл. США)">
											<div class="help-info">Может включать взносы натурой в денежном выражении. При вводе суммы не используйте пробелы, точки или запятые.</div>
											<div class="input-group"><span class="input-group-addon">долл. США</span><input type="text" class="form-control" style="width:200px" required name="totalBudget" ng-model="document.totalBudget" />
											</div>
										</div>
									</div>
								</div>

							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Итоги мероприятий по развитию потенциала</legend><strong>Результаты</strong><div class="help-info">Данная информация может предоставляться после того, как будут получены некоторые результаты (промежуточные, конечные результаты или отдача) или подытожены передовые методы и уроки, извлеченные из реализуемой или завершенной инициативы.</div>
									<div class="km-control-group" name="resultsAchievements" caption="">
										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsAchievements" caption="Основные достижения"><span class="help-info">Кратко опишите основные достижение инициативы, включая те, которые касаются поощрения гендерного равенства в деле достижения целей Конвенции и протоколов к ней, если применимо (не более 200 слов).</span><div km-rich-textbox name="resultsAchievements" ng-model="document.resultsAchievements" rows="4" locales="document.header.languages"></div>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsOutputs" caption="Main outputs"><span class="help-info">Укажите веб-ссылку на соответствующие продукты (например, инструменты и материалы), разработанные инициативой, и/или доклады или прикрепите их копии.</span><div km-link name="resultsOutputs" ng-model="document.resultsOutputs" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsReference" caption="Введите номер записи в виртуальной библиотеке, в которой содержится соответствующая информация.">
													<div document-selector ng-model="document.resultsReference" question="resultsReference"
													on-build-query="onBuildQuery(searchText,'resource')" allow-new="true" filter="true"
															allow-new-schema="resource"></div>
												</div>
											</div>
										</div>
									</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="bestPractices" caption="Передовые практические методы и извлеченные уроки"><span class="help-info">Кратко опишите передовые практические методы и извлеченные уроки (не более 500 слов).</span><div km-rich-textbox name="bestPractices" ng-model="document.bestPractices" rows="4" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Дополнительная информация</legend>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="address" caption="Any other relevant information" >
											<div class="help-info">Просьба использовать это поле для представления любой другой актуальной информации, которая, возможно, не была учтена в других разделах записи.</div>
											<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="relevantDocuments" caption="Любые другие соответствующие документы">
											<div class="help-info">Укажите в этом поле адреса любых других соответствующих веб-сайтов и/или один или более соответствующих документов, которые будут храниться в базе данных и будут доступны для загрузки пользователями.</div>
											<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="notes">
											<legend>Примечания</legend><span class="help-info">Поле «Примечания» предназначено для использования в личных целях. Оно появляется только при редактировании записи и скрыто после ее публикации. Данное поле не предназначено для конфиденциальной информации.</span><div km-notes name="notes" ng-model="document.notes"></div>
										</div>
									</div>
								</div>
							</div>

						</section>
					</div>
				</form>
			</edit-form>
			<review-form>
				<view-capacity-building-initiative ng-model="review.document" locale="review.locale" allow-drafts="true"></view-capacity-building-initiative>
			</review-form><!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons --></div>

	</div>
</div>