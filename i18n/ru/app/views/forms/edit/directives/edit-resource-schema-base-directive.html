<div>
	<div class="registerpage-content edit-resource-base-directive">
		<workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" 
			hide-timer="false" tab="tab"
			validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
			on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
			on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
			data-container="{{container}}" is-dialog="{{isDialog}}" document-type="{{type}}">
			<edit-form>
					<form name="editForm" class="editForm" style="margin-top:10px">

						<div ng-show="tab=='edit'" km-tab="edit">
			
							<legend name="formInfo" style="display:none"></legend>
							<section>
								<div class="well no-shadow bg-white">
									<legend>Общая информация</legend>
			
                                    <div class="row">
                                        <div class="col-xs-12" >
                                            <div class="km-control-group" name="header.languages" required caption="Выберите язык(и) для представления этой записи:">
                                                <div class="indent">
                                                    <div km-form-languages multiple required name="documentLanguages" ng-model="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="title" caption="Название">
												<div class="help-block">Будет фигурировать в качестве названия записи в МПБ.</div>
												<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12" ng-if="isVlr||isMcc||isCpp">
											<div class="km-control-group tabular-term-check" required name="resourceTypes" caption="Type of resource">
													<div class="help-block">Выберите необходимое количество вариантов, с тем чтобы как можно полнее описать ресурс(ы).</div>
													<div km-term-check name="resourceTypes" required ng-model="document.resourceTypes"  terms="options.resourceTypes()"
															binding-type="term[]" tabular-shape="{{isVlr ? true : false}}" locales="document.header.languages"></div>												
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12" style="margin-top: 30px; margin-bottom: -10px;">
											<label name="authors" style="font-size: 21px !important;" required for="authors">Автор(ы)</label>
											<div class="help-block">Фамилия и имя лица или название организации, которые являются автором публикации или информационного ресурса.</div>
										</div>
										<div class="col-xs-12" style="margin-top: 20px;">
											<div class="km-control-group" name="authors" caption="Author name(s)">
												<div km-textbox-ml ng-model="document.authors" rows="2" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" caption="и/или" style="margin-bottom: 10px;"></div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="organizations" caption="Ссылка на организацию(-ии), являющуюся (являющиеся) автором (авторами)">
												<div document-selector type="checkbox" ng-model="document.organizations" question="organizations"
													 on-build-query="onAuthorContactQuery(searchText)" allow-new="true" filter="true"
													 schema="(organization contact)"  allow-new-schema="organization,contact"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="publisher" caption="Издатель">
												<div km-textbox-ml name="publisher" ng-model="document.publisher" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" required name="publicationDate" caption="Дата публикации"
											help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: VLR">
												<div km-date placeholder="ГГГГ-ММ" name="publicationDate" required 
												format="yyyy-mm" start-view="months" min-view-mode="months"
												ng-model="document.publicationDate"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="source" caption="Источник">
												<div class="help-block">Ссылка на ресурс, на основе которого создан данный ресурс (например, название журнала, в котором опубликована статья).</div>
												<div km-textbox-ml name="source" ng-model="document.source" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="rights" caption="Права">
												<div class="help-block">Information about rights held in and over the resource, such as copyright holder, and availability for reproduction for educational or non-profit purposes.</div>
												<div km-textbox-ml name="rights" ng-model="document.rights" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>Доступ к ресурсу(-ам)</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="resourceLinks" caption="Ссылка на ресурс(ы)">		
												<div class="help-block">Please always attach the relevant document(s) that will be stored in the database for users to download. При наличии ресурсов в интернете просьба также предоставить ссылку на них. Просьба заметить, что предпочтительнее использовать вложения, которые постоянно доступны, а не ссылки, которые могут оказаться нерабочими.</div>										
												<div km-link name="resourceLinks"  ng-model="document.resourceLinks" allow-link="true" allow-file="true"
												 extensions="options.documentLinksExt" identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="cover" caption="Изображение(-я) обложки">
												<div km-link name="cover" ng-model="document.covers" allow-link="false" allow-file="true" mimeTypes="image/jpeg;image/png"
												 identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>Информация о содержании ресурса</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="summary" caption="Резюме, аннотация или оглавление (не более 300 слов)">
												<div km-textbox-ml required ng-model="document.summary" rows="4" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									

									<div class="row">
    
										<div class="col-xs-12">
											<label>Страна(-ы), региональная(-ые) или экономическая(-ие) группа(-ы), имеющие отношение к ресурсу</label>
										</div>
										<div class="col-md-3">
											<div class="km-control-group small regions-list"  name="countryRegions.regions" caption="Географическая(-ие) или политическая(-ие)/экономическая(-ие) группа(-ы)">
												<div km-select multiple name="countryRegions.regions"
													 ng-model="countryRegions.regions" placeholder="Выберите вариант(ы)"
													 items="options.regions()"></div>
											</div>
										</div>

										<div class="col-md-1">
											<div class="km-control-group small country-list" name="countryRegions.countries" caption="и/или"></div></div>
									
										<div class="col-md-3">
											<div class="km-control-group small country-list" name="countryRegions.countries" caption="Название страны (стран)">
												<div km-select multiple name="countryRegions.countries" filter-type="startsWith" 
												ng-model="countryRegions.countries" placeholder="Выберите вариант(ы)" items="options.countries()"></div>
											</div>
										</div>
										
									</div>

								</div>
								
							</section>
							<section>
								<div class="well no-shadow bg-white">
									<legend>Ключевые слова для облегчения поиска информации в механизмах посредничества</legend>
									<div class="row" ng-if="isABS">
										<div class="col-md-12">
											<div class="km-control-group" name="aichiTargets" caption="Айтинские целевые задачи">
												<div km-term-check name="aichiTargets" ng-model="document.aichiTargets" terms="options.aichiTargets()"
												 binding-type="term[]"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group"  name="cbdSubjects" caption="Тематические области КБР">
												<div km-term-check name="cbdSubjects"  ng-model="document.cbdSubjects" 
												terms="options.cbdSubjects()" tabular-shape="true" binding-type="term[]" locales="document.header.languages"></div>													
											</div>
                                   		</div>
									</div>

								</div>
							</section><!-- Till now all fields are common for all CHs  --> <!-- IF BCH START --><section ng-if="isBCH">
							<div class="well no-shadow bg-white">
								<legend>Ключевые слова, имеющие отношение к биобезопасности</legend>
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" required name="biosafety.subjects" caption="Тематические области биобезопасности">
											<div km-term-check name="biosafety.subjects" required ng-model="document.biosafety.subjects"  terms="options.bchSubjects()"
											 binding-type="term[]" tabular-shape="true" ng-change="onThematicAreaChange(document.biosafety.subjects)" locales="document.header.languages"></div>
										</div>
									</div>
								</div><!-- TODO: need to apply a condition --><div >
									<div class="row" ng-if="hasRiskAssessmentSubject">
										<legend>Руководство по оценке рисков в отношении живых измененных организмов</legend>
										<div class="alert alert-danger"><strong>Примечание:</strong> функция, позволяющая рекомендовать ресурс в качестве справочного материала для «Руководства по оценке рисков в отношении живых измененных организмов», находится в разработке.</div><!-- TODO: section hidden for now --> <!--
										<div  class="col-xs-12">
											<div class="km-control-group" required name="biosafety.raRecommend" caption="Would you like to recommend this document as background material for the “Guidance on Risk Assessment of Living Modified Organisms”?">
												<div km-yes-no required name="biosafety.raRecommend" ng-model="document.biosafety.raRecommend" ng-click="onRaRecommendChange(document.biosafety.raRecommend)"  locales="document.header.languages"></div>												
											</div>
										</div>
										<div class="col-xs-12" ng-if="document.biosafety.raRecommend">
											<div class="km-control-group" required name="biosafety.raAuthorAffiliation"  caption="Author affiliation">
												<div class="help-block">Please provide information on the author affiliation</div>
												<div km-term-check required name="biosafety.raAuthorAffiliation" ng-model="document.biosafety.raAuthorAffiliation" terms="options.bchRaAuthorAffiliation()"
													binding-type="term[]" locales="document.header.languages">
												</div>
											</div>
										</div>

										<div class="col-xs-12" ng-if="document.biosafety.raRecommend">
											<div class="km-control-group" name="biosafety.raSubjects" required  caption="Please indicate to which section(s) of the “Guidance” this background material is relevant">
												<div km-term-check name="biosafety.raSubjects" required ng-model="document.biosafety.raSubjects" terms="options.bchRaSubjects()"
													binding-type="term[]" locales="document.header.languages">
												</div>
											</div>
										</div>
									 --></div>
									<div class="row padding-top-10">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressModifiedOrganisms" caption="Имеет ли данный ресурс отношение к одному или нескольким конкретным ЖИО?" required>
												<div km-yes-no required name="biosafety.addressModifiedOrganisms" ng-model="document.biosafety.addressModifiedOrganisms"  
													ng-click="onAddressModifiedOrganismsChange(document.biosafety.addressModifiedOrganisms)"  locales="document.header.languages" locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressModifiedOrganisms" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.modifiedOrganisms"  caption="Идентификация ЖИО">
															<div document-selector name="biosafety.modifiedOrganisms" required type="checkbox"  ng-model="document.biosafety.modifiedOrganisms"
															   on-build-query="onBuildQuery(searchText, 'modifiedOrganism')" allow-new="true"  filter="true"
															   allow-new-schema="modifiedOrganism"></div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>

									<div class="row">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressOrganisms" caption="Имеет ли данный ресурс отношение к одной или нескольким конкретным категориям организмов?" required>
												<div km-yes-no required name="biosafety.addressOrganisms" ng-model="document.biosafety.addressOrganisms"  
													ng-click="onAddressOrganismsChange(document.biosafety.addressOrganisms)" locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressOrganisms" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.organisms"  caption="Идентификация организма(-ов)">
															<div document-selector name="biosafety.organisms" required ng-model="document.biosafety.organisms"
																 on-build-query="onBuildQuery(searchText, 'organism')" allow-new="true"
																 allow-new-schema="organism"></div>
														</div>
													</div>
													
												</div>
											</div>
										</div>
									</div>


									<div class="row">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressGenes" caption="Имеет ли данный ресурс отношение к одному или нескольким конкретным генетическим элементам?" required>
												<div class="help-block">Информация о генетических элементах относится к последовательностям ДНК, включая гены, регуляторные последовательности ДНК и другие нуклеиновые кислоты, использующимся для создания живого измененного организма. Они могут кодировать белок или выполнять конкретную регуляторную функцию.</div>
												<div km-yes-no required name="biosafety.addressGenes" ng-model="document.biosafety.addressGenes"  
												ng-click="onAddressGenesChange(document.biosafety.addressGenes)"locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressGenes" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.genes"  caption="Идентификация гена(-ов)">
															<div document-selector name="biosafety.genes" required type="checkbox"  ng-model="document.biosafety.genes"
																   on-build-query="onBuildQuery(searchText, 'dnaSequence')" allow-new="true"  filter="true"
																   allow-new-schema="dnaSequence"></div>
														</div>
													</div>
													
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section><!-- IF BCH END --> <!-- IF ABS START --><section ng-if="isABS">
							<div class="well no-shadow bg-white"><a rel="noopener" translation-url name="#AdditionalInformation"></a><legend>Ключевые слова, касающиеся доступа к генетическим ресурсам и совместного использования выгод</legend>
								<div class="row" ng-if="isMcc">
									<div class="col-xs-12">
										<div class="km-control-group" name="nagoya.mccKeywords" required caption="Выберите соответствующие ключевые слова, описывающие содержание представляемых кодекса поведения, руководящих принципов и передовых методов и/или стандартов">
											<div km-term-check name="nagoya.mccKeywords" required ng-model="document.nagoya.mccKeywords" terms="options.mccKeywords()"
											 binding-type="term[]"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" required name="nagoya.subjects" caption="Тематические области, имеющие отношение к ДГРСИВ">
											<div km-term-check name="nagoya.subjects" required  ng-model="document.nagoya.subjects"  terms="options.absSubjects()"
											 binding-type="term[]" tabular-shape="false"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group tabular-term-check abs-resource-keywords" name="nagoya.keyAreas" caption="Ключевые области и стратегические меры по созданию и развитию потенциала, которые рассматриваются на данном ресурсе">
											<div class="help-block">Имеет ли данный ресурс отношение к созданию потенциала для осуществления Нагойского протокола? Выберите применимый(-е) вариант(ы) из</div>
											<div km-term-check name="nagoya.keyAreas" ng-model="document.nagoya.keyAreas"  terms="options.absKeyAreas()"
											 binding-type="term[]" tabular-shape="true" tabular-shape="true" ></div>
										</div>
									</div>
								</div>
							</div>
						</section><!-- IF ABS END --><section>
							<div class="well no-shadow bg-white"><a rel="noopener" translation-url name="#AdditionalInformation"></a><legend>Дополнительная информация</legend>
		
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" name="address" caption="Any other relevant information">
											<div class="help-block">Просьба использовать это поле для представления любой другой актуальной информации, которая, возможно, не была учтена в других разделах записи.</div>
											<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
		
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" name="relevantDocuments" caption="Любые другие соответствующие документы">
											<div class="help-block">Укажите в этом поле адреса любых других соответствующих веб-сайтов и/или один или более соответствующих документов, которые будут храниться в базе данных и будут доступны для загрузки пользователями.</div>
											<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true"
											 identifier="document.header.identifier"></div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Примечания</legend>
							<div class="row">
								<div class="col-sm-12">
									<div class="km-control-group" name="notes">
										<div class="help-block">Поле «Примечания» предназначено для использования в личных целях. Оно появляется только при редактировании записи и скрыто после ее публикации. Данное поле не предназначено для конфиденциальной информации.</div>
										<div km-notes name="notes" ng-model="document.notes"></div>
									</div>
								</div>
							</div>
							</div>
						</section><!-- BCH and ABS COMPLETED HERE 	 --></div>
			
				</form>
			</edit-form>
			<review-form>
					<div view-resource ng-model="review.document" locale="review.locale" allow-drafts="true" heading="{{heading}}"
					short-heading="{{shortHeading}}"></div>
			</review-form><!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons --></workflow-arrow-buttons>

	</div>
</div>
