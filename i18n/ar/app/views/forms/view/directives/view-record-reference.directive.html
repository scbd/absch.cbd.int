
<div class="default-reference-viewer" dir="rtl"><span ng-if="loading" dir="rtl"><i class="fa fa-spin fa-spinner" aria-hidden="true"></i> تفاصيل السجل قيد التحميل...</span> <span ng-if="errorCode==404" class="label label-warning">السجل المرجعي لم يُعثر عليه (<span ng-bind="model"></span>)</span> <span ng-if="error" class="label label-warning">خطأ في تحميل تفاصيل (<span ng-bind="model"></span>)</span><div ng-if="!loading && !errorCode && !error"><span ng-transclude="default"><span ng-switch="document.body.header.schema"><span ng-switch-when="organization"><span ng-include="'referenced-organization-view'"></span></span> <span ng-switch-when="contact"     ><span ng-include="'referenced-contact-view'"></span></span> <span ng-switch-when="authority"   ><span ng-include="'referenced-contact-view'"></span></span> <span ng-switch-default            ><span ng-include="'referenced-default-view'"></span></span></span></span> <span ng-transclude="extra"></span><div ng-if="showSummary">
            <div class="document-summary" ng-if="document.workingDocumentSummary||document.summary" 
                ng-bind-html="(document.workingDocumentSummary||document.summary)|lstring:locale"></div>
        </div>
    </div>     

    <script type="text/ng-template" id="referenced-organization-view" trados-translation="true">
        <div dir="rtl">	            
            <div class="selected-reference-uid"><b dir="rtl"><span ng-bind="document.body.name | lstring:locale"></span> <span ng-show="document.body.acronym" ng-bind="'(' + (document.body.acronym | lstring:locale) + ')'"></span></b>&nbsp; <a rel="noopener" translation-url  ng-href="/database/{{document.body.header.schema | urlSchemaShortName|encodeURIComponent}}/{{document | uniqueIDWithoutRevision|encodeURIComponent}}/{{document.revision|encodeURIComponent}}" target="_blank" dir="rtl"><i class="fa fa-external-link-square" aria-hidden="true"></i> {{document | uniqueID}}</a> <span ng-include="'workflow-status-section'" dir="rtl"></div>	
            <div km-terms ng-model="document.body.organizationType"><span ng-repeat="term in terms">{{term.name}}</span></div>
            
            <div ng-include="'reference-contact-address'" onload="contactAddress=document.body"></div>            
        </div>
    </script>

    <script type="text/ng-template" id="referenced-default-view" trados-translation="true">
        <span class="selected-reference-uid" dir="rtl"> <a rel="noopener" translation-url  ng-href="/database/{{document.body.header.schema | urlSchemaShortName|encodeURIComponent}}/{{document | uniqueIDWithoutRevision|encodeURIComponent}}/{{document.revision|encodeURIComponent}}" target="_blank" dir="rtl"><i class="fa fa-external-link-square" aria-hidden="true"></i> <span ng-bind="document | uniqueID"></span></a> <span ng-include="'workflow-status-section'" dir="rtl"></span> <span class="selected-reference-name" ng-if="!options.hideSchema" ng-bind="document.body.header.schema | schemaName" dir="rtl"></span> <span class="selected-reference-title" ng-if="document.workingDocumentTitle||document.title"
            ng-bind="(document.workingDocumentTitle||document.title) | lstring:locale" dir="rtl"></span> <span ng-if="!(document.workingDocumentTitle||document.title)" dir="rtl"><span class="selected-reference-title" ng-if="document.body.title" ng-bind="document.body.title | lstring:locale"></span> <span class="selected-reference-title" ng-if="!document.body.title && document.body.name" ng-bind="document.body.name | lstring:locale"></span></span></script>

    <script type="text/ng-template" id="referenced-contact-view" trados-translation="true">
        
        <div dir="rtl"><span ng-click="options.showContact=!options.showContact" style="cursor: pointer;" dir="rtl"><span ng-if="!options.showContact" class="bold">+</span> <span ng-if="options.showContact" class="bold">-</span> <span class="selected-reference-uid"><span ng-if="options.isCNA"><span class="color-blue">السلطة الوطنية المختصة:</span> {{(document || document) | uniqueID}}</span> <span ng-if="options.isNFP"><span class="color-blue uppercase">نقطة الاتصال الوطنية:</span> {{document.body.prefix | lstring:locale}} {{document.body.firstName}} {{document.body.middleName}} {{document.body.lastName}}</span> <span ng-if="options.isContactTypePerson && !options.isNFP"><span class="color-blue uppercase-sm">شخص؟؟؟:</span> {{document.body.prefix | lstring:locale}} {{document.body.firstName}} {{document.body.middleName}} {{document.body.lastName}}</span> <span ng-if="options.isContactTypeOrganization && !options.isCNA"><span class="color-blue">منظمة:</span> {{(document.body.name||document.body.organization) | lstring:locale}} <span ng-show="document.body.acronym">({{(document.body.acronym||document.body.organizationAcronym) | lstring:locale}})</span></span></span></span> | <a rel="noopener" translation-url  ng-href="/database/{{document.body.header.schema | urlSchemaShortName|encodeURIComponent}}/{{document | uniqueIDWithoutRevision|encodeURIComponent}}/{{document.body.revision|encodeURIComponent}}" target="_blank" dir="rtl">{{document | uniqueID}} <i class="fa fa-external-link-square" aria-hidden="true"></i></a> <span ng-include="'workflow-status-section'" dir="rtl"></div>

        <blockquote ng-show="options.showContact" dir="rtl">
            <div ng-if="options.isContactTypeOrganization">
                <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                    ng-if="!options.isCNA">المنظمة</div>
                <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                    ng-if="options.isCNA">السلطة الوطنية المختصة</div>
                <div><span style="font-weight:500;">{{(document.body.name||document.body.organization) | lstring:locale}}</span> <span
                        ng-show="document.body.acronym">({{(document.body.acronym||document.body.organizationAcronym) | lstring:locale}})</span></div>
                <div ng-if="document.body.organizationType">{{document.body.organizationType|term}}</div>
                <div ng-if="document.body.firstName||document.body.lastName">{{document.body.prefix | lstring:locale}} {{document.body.firstName}} {{document.body.middleName}} {{document.body.lastName}}</div>
                <div ng-if="document.body.designation || document.body.department">{{document.body.designation | lstring:locale}}<span ng-show="document.body.designation && document.body.department">,</span> {{document.body.department | lstring:locale}}</div>
            </div>
            <div ng-if="options.isContactTypePerson||options.isNFP">                
                <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                    ng-if="!options.isCNA && !options.isNFP">شخص</div>
                <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                    ng-if="!options.isCNA && options.isNFP">نقطة الاتصال الوطنية</div>
                <div><span style="font-weight:500;">{{document.body.prefix | lstring:locale}} {{document.body.firstName}} {{document.body.middleName}} {{document.body.lastName}}</span></div>
                <div ng-if="document.body.designation || document.body.department">{{document.body.designation | lstring:locale}}<span ng-show="document.body.designation && document.body.department">,</span> {{document.body.department | lstring:locale}}</div>

                <div ng-if="document.body.organization">{{document.body.organization | lstring:locale}} <i ng-show="document.body.organizationAcronym">({{document.body.organizationAcronym | lstring:locale}})</i></div>

            </div><span ng-if="document" onload="contactAddress=document.body"
                ng-include="'reference-contact-address'"></span><div ng-if="options.isContactTypePerson && document.body.contactOrganization">
                <div
                    style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-top:10px;margin-bottom:5px;color:#999;">منظمة ذات صلة</div><span ng-if="document.body.contactOrganizationInfo.deletedOn"><span class="label label-danger">تم حذف هذا السجل المرتبط.</span></span><div ng-if="document.body.contactOrganization"><b>{{document.body.contactOrganization.organization | lstring:locale}}</b> <span ng-show="document.body.contactOrganization.organizationAcronym">({{document.body.contactOrganization.organizationAcronym | lstring:locale}})</span></div>
                <div ng-if="document.body.contactOrganization.organizationType">{{document.body.contactOrganization.organizationType|term}}</div><span ng-if="document.body.contactOrganization" onload="contactAddress=document.body.contactOrganization"
                    ng-include="'reference-contact-address'"></span></div>
        </blockquote>
    </script>

    <script id="reference-contact-address" type="text/ng-template" trados-translation="true">
        <address ng-if="contactAddress.address || contactAddress.country || contactAddress.city || contactAddress.state || contactAddress.postalCode" style="margin-bottom:2px!important" dir="rtl"><span ng-show="contactAddress.addressHTML" ng-bind-html="contactAddress.addressHTML | lstring:locale" dir="rtl"></span><div ng-bind-html="contactAddress.address | lstring:locale"></div>{{contactAddress.city | lstring:locale}}<span ng-show="contactAddress.city && contactAddress.state">,</span> {{contactAddress.state | lstring:locale}}<br ng-show="contactAddress.city || contactAddress.state" /> {{contactAddress.postalCode | lstring:locale}}<span ng-show="contactAddress.postalCode && contactAddress.country">,</span> {{contactAddress.country|term}}</address>

        <div ng-show="contactAddress.phones" dir="rtl">الهاتف: <span ng-repeat="item in contactAddress.phones" dir="rtl">{{item}}<span ng-show="!$last">،</span></span></div>
        <div ng-show="contactAddress.faxes" dir="rtl">الفاكس: <span ng-repeat="item in contactAddress.faxes" dir="rtl">{{item}}<span ng-show="!$last">،</span></span></div>
        <div ng-show="contactAddress.emails" dir="rtl">البريد الإلكتروني: <span ng-repeat="item in contactAddress.emails track by $index" dir="rtl"><a rel="noopener" translation-url  ng-href="mailto:{{item|encodeURIComponent}}">{{item}}</a><span ng-show="!$last">،</span></span></div>
        <div ng-show="contactAddress.websites" dir="rtl">الموقع الإلكتروني: <span ng-repeat="item in contactAddress.websites" dir="rtl"><a rel="noopener" translation-url  target="_blank" ng-href="{{item.url|encodeURI}}">{{item.url}}</a><span ng-show="!$last">،</span></span></div>
        <div ng-if="options.isCNA" dir="rtl"><!--website url is used when generating certificates--> <a rel="noopener" translation-url  ng-href="{{websiteUrl}}/database/{{contactAddress.header.schema | urlSchemaShortName|encodeURIComponent}}/{{(contactAddress) | uniqueIDWithoutRevision|encodeURIComponent}}/{{contactAddress.info.revision|encodeURIComponent}}" target="_blank" dir="rtl"><i class="fa fa-external-link-square" aria-hidden="true"></i> {{(contactAddress) | uniqueID}}</a> <!--{{options.isCNA}}
        {{contactAddress | uniqueID}}{{contactAddress}}--></div>
    </script>

    <script id="workflow-status-section" type="text/ng-template" trados-translation="true">
        <span ng-if="document.deletedOn" dir="rtl"><span class="label label-danger">تم حذف هذا السجل المرتبط.</span></span> <span ng-if="document.workingDocumentLock" dir="rtl">| <span class="label label-danger">السجل قيد الموافقة</span> | <a rel="noopener" translation-url  ng-href="/register/{{document.body.header.schema | urlSchemaShortName|encodeURIComponent}}/{{document.identifier|encodeURIComponent}}/view" target="_blank"><i class="fa fa-external-link-square" aria-hidden="true"></i> عرض الطلب</a> &nbsp <a rel="noopener" ng-href="#" ng-click="refreshRecord(document.identifier)" data-toggle="tooltip" data-title="اضغط لتحديث حالة السجل."><i class="fa fa-refresh"></i></a></span></script>
</div>
