<div class="km-terms-check" dir="rtl">

	<div class="col-xs-12" ng-show="enableSearch" style="margin-bottom: 5px;">
		<div class="input-group float-start" style="max-width:400px;">
			<input  type="text" ng-model="searchKeyword" class="form-control" placeholder="ابحث في القائمة (مطلوب 3 أحرف على الأقل لبدء البحث)" style="font-weight:bold;" /><span class="input-group-text" id="basic-addon2"><i class="fa fa-search" ></i></span></div><span style="position: relative; top:10px; margin-left:20px"><i class="color-blue"><span ng-bind="binding.length || '0'"></span> الكلمات الرئيسية المختارة.</i></span></div>
	<div class="row col-12 pt-2" >
		<div ng-if="searchKeyword && searchKeyword.length > 2"  class="optionsbox">
			<table class="table table-condensed" >
				<tr ng-repeat="term in filteredList = (searchList|filter:hasMatch)">
					<td  ng-class="{'no-border':$first}">
						<label>
							<input type="checkbox" ng-model="selectedItems[term.identifier].selected" ng-change="save(term.identifier)" 
								ng-required="IsRequired()" value="{{term.identifier}}"/><span class="color-litegrey" ng-bind-html="term.displayTitle | lstring:locale"></span></label>
					</td>
				</tr>
				<tfoot>
					<tr>
						<td>
							<button type="button" class="btn btn-xs btn-primary" ng-click="$parent.searchKeyword=undefined">إغلاق</button>
						</td>
					</tr>
				</tfoot>
			</table>
			<p ng-hide="filteredList.length">الكلمة الرئيسية غير موجودة.</p>
		</div>

		<div ng-class="{'searchbox': enableSearch}" >

			<button type="button" class="btn btn-default btn-xs float-end easing" ng-click="clear()" ng-if="binding.length>0"><i class="fa fa-remove"  ></i> مسح التحديد</button>
			<ul ng-if="!tabularShape" style="list-style: none;">	

				<li ng:repeat="term in rootTerms" ng-class="{'other-term': otherTermIdentifier==term.identifier}" ng-include="'term-check-tree-renderer.html'"></li>

				<li ng-show="error">
					<div class="alert" ng-bind="error">
					</div>
				</li>

				<li ng-show="__loading"><i class="fa fa-spinner fa-spin"></i> قيد التحميل ...</li>

				
			</ul>
			<div ng-if="tabularShape" class="tabular-terms col-xs-12">
				<div class="col-md-4 col-xs-6 terms" ng:repeat="term in rootTerms" ng-include="'term-check-tree-renderer.html'"></div>				
			</div>

			<script type="text/ng-template" id="term-check-tree-renderer.html">
				<label dir="rtl">
					<input type="checkbox" ng-model="selectedItems[term.identifier].selected" ng-change="save(term.identifier)" 
						ng-required="IsRequired()" value="{{term.identifier}}" id="chk_{{term.identifier}}"/><span ng-bind="term.title||term.name | lstring:locale" dir="rtl"></span></label>
				<div ng-if="(otherTermIdentifier==term.identifier ||term.type) && !term.multiple && selectedItems[term.identifier].selected" dir="rtl">
					<input ng-if="term.type=='int'" type="number" placeholder="{{::customValuePlaceholder}}"
					ng-model="selectedItems[term.identifier].customValue" class="km-terms-check-add-input-int" ng-change="save()" />
					<div ng-if="term.type=='lstring'" style="padding-left:50px;"><strong>(يُرجى التحديد)</strong><div km-textbox-ml name="custom value"  placeholder="{{::customValuePlaceholder}}"
							required ng-model="selectedItems[term.identifier].customValue" locales="locales"  ng-change="save()"></div>
					</div>
				</div><span ng-if="(otherTermIdentifier==term.identifier || term.type) && term.multiple && selectedItems[term.identifier].selected"><table class="table table-hover others" style="padding:0;margin:0;width:100%;">
						<tr ng-repeat="element in otherElements[term.identifier]">
							<td ng-show="otherElements[term.identifier].length > 1" class="text-center" style="vertical-align:middle;width:30px;"><i class="fa fa-remove color-red" style="cursor:pointer" ng-if="otherElements[term.identifier].length > 1 && !$last" ng-click="deleteOtherElement(element, otherElements[term.identifier]);"></i></td>
							<td>
								<div km-textbox-ml ng-model="element.customValue" locales="locales" required="true" placeholder="عنصر آخر" ng-change="appendEmptyOther(otherElements[term.identifier])"></div>
							</td>
						</tr>
					</table></span><div class="km-select-description" ng-if="showDescription && term.description" ng-bind="term.description" style="padding: 3px 25px;" dir="rtl">
				</div>
				<ul style="list-style:none" dir="rtl">
					<li ng:repeat="term in term.narrowerTerms" ng-include="'term-check-tree-renderer.html'">
				</ul>
			</script>
		</div>
	</div>


</div>


