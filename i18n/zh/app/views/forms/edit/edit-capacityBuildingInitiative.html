<style> .km-control-group .control-label{ display: block; } .km-control-group .control-label[for="startDate"]{display: inline-block;} .km-control-group .control-label[for="endDate"]{display: inline-block;} </style>
<div class="md-whiteframe-z2" >

	<div ng-include="'/app/views/forms/edit/edit_header.html'"></div>

	<div style="padding: 24px;background-color:#FFF;border-bottom:2px solid #ccc;"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">

			<div class="alert alert-success alert-dismissable" ng-show="msg">
				<button aria-hidden="true" class="close" data-dismiss="alert" ng-click="msg=''" type="button">&times;</button><strong><span ng-bind="msg"></span></strong></div>

			<div workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()"
					languages="document.header.languages" tab="tab">

				<edit-form>
					<form name="editForm" style="margin-top:10px">


						<div ng-show="tab=='edit'" km-tab="edit">
							<section>
								<div class="well no-shadow bg-white">

									<legend>一般信息</legend>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="header.languages" required caption="请选择您希望提交之记录的语言：">
												<div class="indent">
													<div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required name="title" caption="活动标题">
												<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
											</div>
										</div>
									</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="projectNumber" caption="项目编号或标识符">
											<div class="help-info">请提供任意项目编号、标识符或参考编号（如适用）。</div>
											<div km-textbox-ml name="projectNumber" ng-model="document.projectNumber" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="projectDocument" caption="网站地址">
										<div class="help-info">请提供网站网址（如：http://bch.cbd.int）和网站名称（如“生物安全信息交换所”）。</div>
										<div km-link name="projectDocument" required ng-model="document.projectDocument" allow-link="true" allow-file="false" identifier="document.header.identifier"></div>
										</div>
									</div>
								</div>
			
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required name="contacts" caption="联系人">
												<div document-selector ng-model="document.contacts" question="contacts"
														on-build-query="onContactQuery(searchText)" allow-new="true" filter="true"
														allow-new-schema="contact"></div>
											</div>
										</div>
									</div>


									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required name="geographicScope" caption="地理范围">
												<div km-select name="geographicScope" required ng-model="document.geographicScope"
														placeholder="请选择一个选项" items="options.geographicScope()"></div>
											</div>
										</div>
									</div>
									<div class="row" ng-if="document.geographicScope && (isGlobalOrRegional() || isNational())">
										<div class="col-md-12">
											<div class="km-control-group"  required style="padding:10px;">
												<div class="row">
													<div class="col-md-3" ng-show="!isNational()">

														<div class="km-control-group" required name="geographicScope" caption="">
																<label name="countryRegions" class="control-label" for="geographicScope">地区或政治/经济集团</label>
															<div km-select multiple required name="regions"
																	ng-model="countryRegions.regions" placeholder="请选择选项"
																	items="options.regions()"></div>
														</div>
													</div>
													<div class="col-md-1" ng-hide="!isGlobalOrRegional()">和/或</div>
													<div class="col-md-3">
														<div class="km-control-group" style="text-align: left;"  caption="">
															<label name="countryRegions" ng-required="isNational()" class="control-label" for="countryRegions">国家</label>
															<div km-select multiple required filter-type="startsWith" ng-model="countryRegions.countries" placeholder="请选择选项" items="options.countries()"></div>
														</div>
													</div>
												</div>
											</div></div>
									</div>

									<div class="row" ng-if="document.geographicScope && isSubnational()">
										<div class="col-md-12">
											<div class="km-control-group"  name="countryRegions" caption="">
												<label name="countryRegions" required class="control-label" for="countryRegions">国家</label>
												<div km-select multiple required  ng-model="countryRegions.countries" placeholder="请选择选项" items="options.countries()"></div>
											</div>
										</div>
										<div class="col-md-12">
											<div class="km-control-group"  name="geographicScope.customValue" caption="">
												<label name="geographicScope.customValue" required="isSubnational()" class="control-label" for="geographicScope.customValue">次国家辖区名称</label>
												<div km-textbox-ml required="isSubnational()"  ng-model="document.geographicScope.customValue" placeholder="请选择选项" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row" ng-if="document.geographicScope && isCommunity()">
										<div class="col-md-12">
											<div class="km-control-group"  name="countries" caption="">
												<label name="countryRegions" required class="control-label" for="countryRegions">国家</label>
												<div km-select multiple required ng-model="countryRegions.countries" placeholder="请选择选项" items="options.countries()"></div>
											</div>
										</div>
										<div class="col-md-12">
											<div class="km-control-group" name="geographicScope.customValue" caption="">
												<label name="geographicScope.customValue" required="isCommunity()" class="control-label" for="geographicScope.customValue">社区名称</label>
												<div km-textbox-ml required="isCommunity()" ng-model="document.geographicScope.customValue" placeholder="" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required name="status" caption="状态">
												<div km-select name="status" required ng-model="document.status" id="documentStatus"
														placeholder="请选择一个选项" items="options.status()"  show-description="true"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="timeframe" required caption="时间表">
													<div class="row">
														<div class="col-md-3">
															<div class="km-control-group" name="startDate" caption="开始日期"
																	 help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, Start date">
																<div km-date name="startDate" ng-model="document.startDate"></div>
															</div>
														</div>
														<div class="col-md-3">
															<div class="km-control-group" name="endDate" caption="结束日期"
																	 help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, End date">
																<div km-date name="startDate" ng-model="document.endDate"></div>
															</div>
														</div>
														<div class="col-md-1 text-center" ng-show="!document.status || isProposedOrApproved()">
															<div class="km-control-group bold" style="margin-top:30px;" >或者</div>
														</div>
														<div class="col-md-5">
															
															<div class="km-control-group" name="duration" caption="持续时间" ng-show="!document.status || isProposedOrApproved()">
																<div class="row">
																	<div class="col-md-2">
																		<input type="number" name="durationPeriod" ng-model="document.durationPeriod"
																			minlength="1" placeholder="例如：24" ng-change="clearDates()" class="form-control"
																			style="display:inline-block;width:100px"/>
																	</div>
																	<div class="col-md-2">
																		<div class="km-control-group" name="durationText" caption="">
																			<div style="height: 0px;width:0px;opacity: 0;" name="durationText">
																				<label name="durationText" for="durationText">持续时间(天/月/年)</label>
																			</div>
																			<select name="durationText" ng-model="document.durationText"  class="form-control"
																				style="display:inline-block;width:100px" placeholder="eg. Months"
																				ng-options="obj.value as obj.text for obj in timing">
																			</select>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="activityScope" caption="能力发展倡议类型">
												<div km-term-radio name="activityScope" ng-model="document.activityScope" terms="options.activityScope()"
														description="true" binding-type="term" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group"  bold="true" required name="isProjectProgramme" caption="是否是更大项目或方案的组成部分？">
												<div class="km-yes-no" required name="isProjectProgramme" ng-model="document.isProjectProgramme" ng-click="isBroaderProjectSelected(!document.isProjectProgramme)"></div>
											</div>
										</div>
										<div class="col-md-12" ng-if="document.isProjectProgramme">
											<div class="col-md-5">
											<div class="km-control-group" required name="projectProgrammeName" caption="请指明项目或计划的名称。">
												<div km-textbox-ml required ng-model="document.projectProgrammeName" locales="document.header.languages"></div>
											</div>
											</div>
											<div class="col-md-2 text-center">和/或</div>
											<div class="col-md-5">
											<div class="km-control-group" required name="broaderProjects" caption="请链接到有关该项目或方案的信息交流所记录。">
												<div document-selector ng-model="document.broaderProjects" question="broaderProjects"
														on-build-query="onBuildQuery(searchText,'capacityBuildingInitiative')" allow-new-schema="capacityBuildingInitiative" allow-new="true" filter="true"></div>
											</div>
											</div>
											</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required  caption="实施和/或执行该倡议的机构或组织">
												<div class="help-info">在某些情况下，一个机构可同时扮演实施角色和执行角色。在这些情况下，请同时勾选两个选项框。</div>
												<div class="checkbox"><label for="isImplementedByAgencies"><input type="checkbox" id="isImplementedByAgencies" ng-model="document.isImplementedByAgencies" ng-click="isImpAgencies(!document.isImplementedByAgencies)">实施机构或组织</label></div>

												<div class="row" >
													<div class="col-md-12">
														<div class="km-control-group" ng-show="document.isImplementedByAgencies" name="implementingAgencies" caption="请选择实施机构或组织">
															<div class="help-info">实施机构是指负责制定倡议，监控实施，以及监督和评估的组织或法律实体，其任务还包括提供资金、确保信托标准和质量保证得到应用，以及编制项目完成报告。执行机构是指对倡议的完成最终负责的实体，并向捐助者负责。</div>

															<div document-selector name="implementingAgencies" ng-model="document.implementingAgencies" question="implementingAgencies"
																	on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>
														</div>
													</div>
												</div>

												<div class="checkbox"><label for="isExecutededByAgencies"><input id="isExecutededByAgencies" type="checkbox" ng-model="document.isExecutededByAgencies" ng-click="isExcAgencies(!document.isExecutededByAgencies)">执行机构或组织</label></div>
												<div class="row">
													<div class="col-md-12">
														<div class="km-control-group" ng-show="document.isExecutededByAgencies" name="executingAgencies" caption="请选择执行机构或组织">
															<div class="help-info">执行机构是指直接管理倡议的组织/机构，包括其活动的日常规划、协调和执行，监测和报告进度，采购和管理资源（员工、资金、设备等），以及执行其他项目管理职能。</div>
															<div document-selector ng-model="document.executingAgencies" question="executingAgencies"
																	on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
														</div>
													</div>
												</div>
												<div class="checkbox"><label for="isCollaboratededByPartners"><input type="checkbox" id="isCollaboratededByPartners" ng-model="document.isCollaboratededByPartners">合作伙伴</label></div>
												<div class="row">
													<div class="col-md-12">
														<div class="km-control-group" ng-show="document.isCollaboratededByPartners" name="collaboratingPartners" caption="请选择合作伙伴">
															<div class="help-info">合作伙伴是指对该倡议有重大财务或其他贡献，和/或积极支持或配合该倡议实施的实体或组织。</div>
															<div document-selector ng-model="document.collaboratingPartners" question="collaboratingPartners"
																	on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</section>
							<section>
								<div class="well no-shadow bg-white">
									<legend>详细信息</legend>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required name="description" caption="倡议的简短描述，包括其目标和子目标（最多150单词）">
												<div km-textbox-ml required ng-model="document.description" rows="4" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" required  name="categories" caption="能力发展活动的类别">
												<div km-term-check required show-description="true" name="categories" ng-model="document.categories" terms="options.absCategories()" binding-type="term[]" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="targetGroups" caption="主要目标群体/受益人">
												<div km-term-check name="targetGroups"  ng-model="document.targetGroups" terms="options.targetGroups()" binding-type="term[]" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>与对该倡议的主题报道相关信息</legend>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group tabular-term-check" name="cbdSubjects"
													caption="相关生物多样性公约主题领域">
												<div km-term-check name="cbdSubjects" ng-model="document.cbdSubjects"
														terms="cbdSubjects()" binding-type="term[]" tabular-shape="true"></div>
											</div>
										</div>
									</div>

									<div class="row" ng-if="isABS">
										<div class="col-md-12">
											<div class="km-control-group" name="aichiTargets"
													caption="爱知目标：">
												<div km-term-check name="aichiTargets" required ng-model="document.aichiTargets"
														terms="options.aichiTargets()" binding-type="term[]"></div>
											</div>
										</div>
									</div>

									<div class="row" ng-if="isABS">
										<div class="col-md-12">
											<div class="km-control-group" name="absKeyAreas"
													caption="能力建设和发展的关键领域和战略措施">
												<div class="help-info">《能力建设和培养战略框架》确定的关键领域，旨在支持对《名古屋议定书》的有效执行（决定 NP-1/8）。</div>
												<div km-term-check name="absKeyAreas" ng-model="document.absKeyAreas" terms="options.absKeyAreas()"
														binding-type="term[]"></div>
											</div>
										</div>
									</div>
									<div class="row" ng-if="isBCH">
										<div class="col-md-12">
											<div class="km-control-group tabular-term-check fourth-column" required name="cpbThematicAreas"
													caption="生物安全专题领域">
													<div km-term-check required name="cpbThematicAreas" ng-model="document.cpbThematicAreas" locales="document.header.languages"
													terms="options.cpbThematicAreas()" binding-type="term[]" show-description="true" tabular-shape="true"></div>
											</div>
										</div>
									</div>

								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>资金信息</legend>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="fundingSourceTypes" caption="资金来源类型">
												<div km-term-check show-description="true" name="fundingSourceTypes" ng-model="document.fundingSourceTypes" 
													terms="options.fundingSources()" binding-type="term[]" locales="document.header.languages"></div>
											</div>
										</div>
									</div>

								<div class="km-control-group" ng-show="isSelfFunding()" name="selfFunding" caption="请提供有关资金的进一步信息"><!-- ToDO: isSelfFunding method can also be used --><div km-textbox-ml required="isSelfFunding()" rows="2" name="selfFunding" ng-model="document.fundingSourceTypes[document.fundingSourceTypes.length-1].customValue" placeholder="" locales="document.header.languages"></div>
								</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="coFinancingSources" caption="主要资金来源">
												<div document-selector ng-model="document.coreFundingSources" question="coreFundingSources"
														on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="coFinancingSources" caption="共同出资来源">
												<div document-selector ng-model="document.coFinancingSources" question="coFinancingSources"
														on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

											</div>
										</div>
									</div>


									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="totalBudget" caption="总预算（金额，美元）">
												<div class="help-info">这可包括以货币形式表达的实物捐助。输入金额时，请不要使用空格、句号或逗号。</div>
												<div class="input-group"><span class="input-group-addon">美元</span><input type="text" class="form-control" style="width:200px" required name="totalBudget" ng-model="document.totalBudget" />
												</div>
											</div>
										</div>
									</div>

								</div>
							</section>
							<section>
								<div class="well no-shadow bg-white">
									<legend>能力发展成果</legend><strong>结果</strong><div class="help-info">一旦从正在进行的或已完成的倡议中得到一些结果（产出、成果或影响）或最佳做法以及涉及的经验教训，则可以提供这些信息。</div>
										<div class="km-control-group" name="resultsAchievements" caption="">
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" name="resultsAchievements" caption="主要成就"><span class="help-info">请简要总结该倡议的主要成就，包括在实现《公约》及其各项议定书目标的过程中与促进两性平等相关的情况（最多 200 英文单词）。</span><div km-rich-textbox name="resultsAchievements" ng-model="document.resultsAchievements" rows="4" locales="document.header.languages"></div>
													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" name="resultsOutputs" caption="主要产出"><span class="help-info">请提供由倡议和/或报告形成的相关产品（例如工具和材料）的网页链接或附加他们的副本。</span><div km-link name="resultsOutputs" ng-model="document.resultsOutputs" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" name="resultsReference" caption="请选择包含相关信息的虚拟记录库记录编号。">
														<div document-selector ng-model="document.resultsReference" question="resultsReference"
														on-build-query="onBuildQuery(searchText,'resource')" allow-new="true" filter="true"
																allow-new-schema="resource"></div>
													</div>
												</div>
											</div>
										</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="bestPractices" caption="良好做法和经验教训"><span class="help-info">请简要总结最佳做法和经验教训（最多 500 英文单词）。</span><div km-rich-textbox name="bestPractices" ng-model="document.bestPractices" rows="4" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>补充信息</legend>
									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="address" caption="其它相关信息" >
												<div class="help-info">请在此处提供记录中其它位置未能提到的任何其它相关信息。</div>
												<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="relevantDocuments" caption="任何其他相关文件">
												<div class="help-info">请在此处提供任何其它相关网站地址和/或将储存在数据库中供用户下载的一个或多个相关文档。</div>
												<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-md-12">
											<div class="km-control-group" name="notes">
												<legend>备注</legend><span class="help-info">“备注”字段仅供个人使用。仅当编辑记录时才显示，但不会在记录发布时显示。此字段不适用于保密信息。</span><div km-notes name="notes" ng-model="document.notes"></div>
											</div>
										</div>
									</div>
								</div>

							</section>
						</div>
					</form>
				</edit-form>
				<review-form>
					<view-capacity-building-initiative ng-model="review.document" locale="review.locale" allow-drafts="true"></view-capacity-building-initiative>
				</review-form><!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons --></div>

		</div>
	</div>
</div>
