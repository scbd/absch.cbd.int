<div>
    <script type="text/ng-template" id="child-items">
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="item.selected" indeterminate="item.selected===null" ng-change="onSelect(item)"></label>

          <div ng-repeat="item in item.children" ng-include="'child-items'" style="margin-left:22px"></div>

        </div>
    </script>
    <div ng-repeat="item in items" ng-include="'child-items'"></div>
</div>
