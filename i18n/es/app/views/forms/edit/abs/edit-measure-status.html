<div >

    <div ng-include="'/app/views/forms/edit/edit_header.html'"></div>

    <div class="edit-measure-status innerPageEditForm"  style="padding: 24px;background-color:#FFF;border-bottom:2px solid #ccc;"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">
            <div>
                <workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
                                        tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
                                        on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
                                        on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
                                        data-container="{{container}}" is-dialog="{{isDialog}}"><!-- <intro-form></intro-form> --> <!--only use it if default article intro is not required --><edit-form>

                        <form class="editForm" name="editForm" style="margin-top:10px">
                            <div ng-show="tab=='edit'" km-tab="edit">

                                <section>
                                    <legend>Información general</legend>
                                    <div class="row">
                                        <div class="col-xs-12" >
                                            <div class="km-control-group" name="header.languages" required caption="Sírvase seleccionar el/los idioma(s) en los que desea presentar este registro:">
                                                <div class="indent">
                                                    <div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="government" required caption="País">
                                                <div afc-autocomplete required name="government" ng-disabled="userGovernment()" ng-model="document.government" ng-change="onCountryChange(document.government.identifier)"
                                                     source="options.countries" filter="genericFilter" mapping="genericMapping" selectbox="true" placeholder="Please select a country..."></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section>
                                    <legend>Situación relativa a la adopción de medidas en materia de APB</legend>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="km-control-group" required name="jurisdiction" caption="¿Este registro refiere a la situación actual de las medidas en materia de APB de qué nivel de jurisdicción?">
                                                <div km-select name="jurisdiction" ng-model="document.jurisdiction" ng-disabled="!document.government.identifier" 
                                                    locales="document.header.languages" items="options.jurisdictions()" ng-change="updateTitle()"></div>
                                            </div>
                                        </div>

                                        <div class="col-md-12" ng-if="document.jurisdiction && isSubnational()">
                                            <div class="km-control-group"  name="jurisdiction.customValue" caption="">
                                                <label name="jurisdiction.customValue" required="isSubnational()" class="control-label" for="jurisdiction.customValue">Nombre de la jurisdicción subnacional</label>
                                                <div km-textbox-ml required="isSubnational()"  ng-model="document.jurisdiction.customValue" ng-change="updateTitle()"
                                                    locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-md-12" ng-if="document.jurisdiction && isCommunity()">
                                            <div class="km-control-group" name="jurisdiction.customValue" caption="">
                                                <label name="jurisdiction.customValue" required="isCommunity()" class="control-label" for="jurisdiction.customValue">Nombre de de la comunidad</label>
                                                <div km-textbox-ml required="isCommunity()" ng-model="document.jurisdiction.customValue" placeholder=""
                                                ng-change="updateTitle()" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="isJurisdictionRegional() && !isEu()">
                                        <div class="alert alert-warning">
                                            <h4>Tenga en consideración que las medidas regionales o multilaterales solo tienen que registrarse una vez en el Centro de Intercambio de Información sobre APB y que cada uno de los países seleccionados como abarcados por la medida regional mostrará dicha medida como parte de su marco jurídico en su perfil del país. Se recomienda que un país convenga en registrar la medida en nombre de la organización regional o el grupo de países que la comparten.</h4>
                                        </div>
                                    </div>
                                    <div class="row" ng-if="isJurisdictionRegional() && isEu()"><!--  for EU only--><div class="col-xs-3">
                                            <div class="km-control-group form-group" required name="jurisdictionRegions" caption="">
                                                <label name="jurisdictionRegions" for="jurisdictionRegions">Región(es) de la jurisdicción</label>
                                                <div km-select multiple required name="regions"
                                                    ng-model="jurisdictionRegions.regions" placeholder="Por favor, seleccione una o varias opciones"
                                                    items="options.regions()"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-1">y/o</div>
                                        <div class="col-xs-3">
                                        <div class="km-control-group form-group" name="jurisdictionCountries" caption="">
                                                <label name="jurisdictionCountries" required class="control-label" for="jurisdictionCountries">País(es) de la jurisdicción</label>
                                                <div km-select multiple required  ng-model="jurisdictionRegions.countries" placeholder="Por favor, seleccione una o varias opciones" items="options.countries()"></div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <div class="km-control-group" required name="adoption" caption="Fecha de publicación del registro">
                                                <div km-date placeholder="AAAA-MM-DD" name="adoption" required ng-model="document.adoption" ng-change="updateTitle()"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-12 jurisdiction-title">
                                            <div class="km-control-group" required name="title" caption="Título">
                                                <div km-textbox-ml disabled ng-disable="true" name="title" required ng-model="document.title" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div><!-- ToDo: labels need to verify --><div class="row">
                                       <div class="col-xs-12">
                                            <div class="km-control-group" name="measureEstablished" required caption="¿Cuál es la situación de su país (o de la jurisdicción indicada) relativa a las medidas en materia de APB?">

                                                <label class="control-label planing-plc">
                                                    <input type="radio" ng-model="document.measureEstablished" ng-value="true" name="measureEstablished" ng-click="onMeasureEstablished()" />Se han establecido medidas en materia de APB</label>
                                                <label class="control-label planing-plc">
                                                    <input type="radio" ng-model="document.measureEstablished" ng-value="false" name="measureEstablished" ng-click="onMeasureEstablished()" />No se han establecido medidas en materia de APB</label>
                                            </div>
                                       </div>
                                        <div class="col-xs-12" ng-if="document.measureEstablished">
                                            <label name="status" for="status">Seleccione una situación</label>
                                            <div class="km-control-group" name="status" required caption="">
                                                <div km-term-radio name="noStatus" required ng-model="document.status" locales="document.header.languages"
                                                    terms="options.yesStatus()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.measureEstablished != undefined && !document.measureEstablished">
                                            <label name="status" for="status">Seleccione una situación</label>
                                            <div class="km-control-group" name="status" required caption="">
                                                <div km-term-radio required name="yesStatus" ng-model="document.status" locales="document.header.languages"
                                                    terms="options.noStatus()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12" ng-if="document.measureEstablished != undefined">
                                        <div class="km-control-group" name="statusDescription"  caption="Sírvase aportar más información sobre el actual progreso en el establecimiento de medidas en materia de APB y/o un resumen de las principales dificultades y retos a los que se ha hecho frente.">
                                            <div km-textbox-ml name="statusDescription" required ng-model="document.statusDescription" locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="isSubjectToPic" required caption="¿El acceso a los recursos genéticos está sujeto al consentimiento fundamentado previo (CFP), según lo dispuesto en el artículo 6.1?">
                                                <div km-yes-no required name="isSubjectToPic" ng-model="document.isSubjectToPic" locales="document.header.languages"></div>
                                            </div>
                                        </div>

                                        <div class="col-xs-12" ng-if="document.isSubjectToPic != undefined && !document.isSubjectToPic">
                                            <div class="km-control-group" name="noPicStatus" required caption="">
                                                <label name="noPicStatus" for="noPicStatus">Seleccione un estado del CFP</label>
                                                <div km-term-radio required name="noPicStatus" ng-model="document.noPicStatus" locales="document.header.languages"
                                                     terms="options.noPicStatus()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.isSubjectToPic">
                                            <div class="km-control-group" required name="picMeasures" caption="Seleccione la(s) medida(s) pertinente(s) en materia de APB de la lista siguiente que reglamenta el acceso a los recursos genéticos.">
                                                <div document-selector ng-disabled="!document.government.identifier" name="picMeasures" ng-model="document.picMeasures" question="measure"
                                                     on-build-query="onMeaureQuery(searchText)" allow-new-schema="measure" allow-new="true" filter="true"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.isSubjectToPic != undefined">
                                            <div class="km-control-group" name="picMeasuresDescription"  caption="Explique su respuesta.">
                                                <div km-textbox-ml name="picMeasuresDescription" required ng-model="document.picMeasuresDescription" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="hasIplc" required caption="¿En su país (o en la jurisdicción indicada) hay comunidades indígenas y locales?">
                                                <div km-yes-no required name="hasIplc" ng-model="document.hasIplc" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplc">
                                            <div class="km-control-group" name="iplcType" required caption="">
                                                <div km-term-radio required name="iplcType" ng-model="document.iplcType" locales="document.header.languages"
                                                     terms="options.iplcType()" show-description="true" binding-type="term">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplc != undefined">
                                            <div class="km-control-group" name="iplcDescription" caption="Explique su respuesta.">
                                                <div km-textbox-ml name="iplcDescription" required ng-model="document.iplcDescription" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="hasIplcRightEstablished" required caption="¿En las leyes nacionales se ha establecido el derecho a que los pueblos indígenas y las comunidades locales otorguen acceso a recursos genéticos?">
                                                <div km-yes-no ng-model="document.hasIplcRightEstablished" ng-click="onHasIplcRightChange()" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplcRightEstablished">
                                            <label name="isIplcRightFullyImplemented" for="isIplcRightFullyImplemented">Is iplc right fully implemented</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightFullyImplemented" ng-value="true" name="isIplcRightFullyImplemented" />Sí (se aplican por completo)</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightFullyImplemented" ng-value="false" name="isIplcRightFullyImplemented" />Hasta cierto punto</label>

                                            <div class="km-control-group" name="iplcMeasures" required caption="Seleccione la(s) medida(s) pertinente(s) en materia de APB de la lista siguiente relacionada con el acceso a los recursos genéticos que poseen los pueblos indígenas y las comunidades locales.">
                                                <div document-selector ng-disabled="!document.government.identifier" name="iplcMeasures" ng-model="document.iplcMeasures" question="measure"
                                                on-build-query="onMeaureQuery(searchText)" allow-new-schema="measure" allow-new="true" filter="true"></div>
                                            </div>

                                            <div class="km-control-group" required name="otherIplcRelatedRecords" caption="Seleccione de la lista siguiente otra información pertinente relacionada con los procedimientos, sitios web o bases de datos nacionales, protocolos y procedimientos comunitarios, y derecho consuetudinario y/o autoridades nacionales competentes en materia de APB.">
                                                <div document-selector ng-disabled="!document.government.identifier" name="otherIplcRelatedRecords"  ng-model="document.otherIplcRelatedRecords" question="measure"
                                                     on-build-query="onRecordQuery(searchText)" filter="true"></div>
                                            </div>

                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplcRightEstablished != undefined && !document.hasIplcRightEstablished">
                                            <label name="isIplcRightInPlan" for="isIplcRightInPlan">Is iplc right in plan</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightInPlan" ng-value="true" name="isIplcRightInPlan" />En proceso de proyecto o planificación</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isIplcRightInPlan" ng-value="false" name="isIplcRightInPlan" />Sin planificar</label>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasIplcRightEstablished != undefined">
                                                <div class="km-control-group" name="iplcMeasuresDescription" caption="Explique su respuesta.">
                                                    <div km-textbox-ml name="iplcMeasuresDescription" required ng-model="document.iplcMeasuresDescription" locales="document.header.languages"></div>
                                                </div>
                                          </div>
                                       </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="hasStepsForIplcApproval" required caption="¿Su país (o la jurisdicción indicada) ha adoptado medidas con miras a asegurar que se acceda a los conocimientos tradicionales asociados a recursos genéticos que están en posesión de comunidades indígenas y locales dentro de su país con el consentimiento fundamentado previo o la aprobación y participación de dichas comunidades indígenas y locales, y que se hayan establecido condiciones mutuamente acordadas?">
                                                <div km-yes-no required ng-model="document.hasStepsForIplcApproval" ng-click="onHasStepsChange()" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12" ng-if="document.hasStepsForIplcApproval">
                                          <label  name="isStepsForIplcApprovalImplemented" for="isStepsForIplcApprovalImplemented">Is steps for iplc approval implemented</label>
                                                 <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalImplemented" ng-value="true" name="isStepsForIplcApprovalImplemented" />Sí (se aplican por completo)</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalImplemented" ng-value="false" name="isStepsForIplcApprovalImplemented" />Hasta cierto punto</label>

                                            <div class="km-control-group" required name="iplcApprovalMeasures" caption="Seleccione la(s) medida(s) pertinente(s) en materia de APB de la lista siguiente relacionada con el acceso a los recursos genéticos que poseen los pueblos indígenas y las comunidades locales">
                                                <div document-selector ng-disabled="!document.government.identifier" name="iplcApprovalMeasures"  ng-model="document.iplcApprovalMeasures" question="measure"
                                                    on-build-query="onMeaureQuery(searchText)"allow-new-schema="measure" allow-new="true" filter="true"></div>
                                            </div>

                                            <div class="km-control-group" required name="otherIplcApprovalRecords" caption="Please select other relevant applicable information related to ABS procedures, national websites or databases, community protocols and procedures and customary law and/or competent national authorities from the following list">
                                                <div document-selector ng-disabled="!document.government.identifier" name="otherIplcApprovalRecords" ng-model="document.otherIplcApprovalRecords" question="measure"
                                                     on-build-query="onRecordQuery(searchText)" filter="true"></div>
                                            </div>

                                        </div>
                                        <div class="col-xs-12" ng-if="!document.hasStepsForIplcApproval && document.hasStepsForIplcApproval != undefined">
                                            <label  name="isStepsForIplcApprovalInPlan" for="isStepsForIplcApprovalInPlan">Is steps for iplc approvalIn plan</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalInPlan" ng-value="true" name="isStepsForIplcApprovalInPlan" />En proceso de proyecto o planificación</label>
                                            <label class="control-label planing-plc">
                                                <input type="radio" ng-model="document.isStepsForIplcApprovalInPlan" ng-value="false" name="isStepsForIplcApprovalInPlan" />Sin planificar</label>

                                        </div>
                                       <div class="col-xs-12" ng-if="document.hasStepsForIplcApproval != undefined">
                                            <div class="km-control-group" name="iplcApprovalDescription" caption="Explique su respuesta.">
                                                <div km-textbox-ml name="iplcApprovalDescription" required ng-model="document.iplcApprovalDescription" locales="document.header.languages"></div>
                                            </div>
                                       </div>
                                    </div>
                                </section>

                                <section>
                                    <legend>Información adicional</legend>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="address" caption="Cualquier otra información pertinente">
                                                <div class="help-block">Please use this field to provide any other relevant information that may not have been addressed elsewhere in the record.</div>
                                                <div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="relevantDocuments" caption="Otros documentos pertinentes">
                                                <div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier"></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section>
                                    <legend>Notas</legend>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="km-control-group" name="notes">
                                                <div class="help-block">El campo “Notas” es para referencia personal y solo puede verse mientras se edita el registro. Se ocultará una vez que se haya publicado el registro. Este campo no está destinado a ser usado para información confidencial.</div>
                                                <div km-notes name="notes" ng-model="document.notes"></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                            </div>
                        </form>
                    </edit-form>
                    <review-form>
                        <view-measure-status ng-model="review.document" locale="review.locale" allow-drafts="true"></view-measure-status>
                    </review-form>
                </workflow-arrow-buttons>
            </div>

        </div>
    </div>
</div>
