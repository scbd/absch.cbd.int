<div class="innerPageEditForm capacity-building-initiative"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">

		<div class="alert alert-success alert-dismissable" ng-show="msg">
			<button aria-hidden="true" class="close" data-bs-dismiss="alert" ng-click="msg=''" type="button">&times;</button><strong><span ng-bind="msg"></span></strong></div>

		<div workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
		tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
		on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
		on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
		data-container="{{container}}" is-dialog="{{isDialog}}">

			<edit-form>
				<form name="editForm" style="margin-top:10px">


					<div ng-show="tab=='edit'" km-tab="edit">
						<section>
							<div class="well no-shadow bg-white">

								<legend>Información general</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="header.languages" required caption="Sírvase seleccionar el/los idioma(s) en los que desea presentar este registro:">
											<div class="indent">
												<div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="title" caption="Título de la iniciativa">
											<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

							<div class="row">
								<div class="col-md-12">
									<div class="km-control-group" name="projectNumber" caption="Número o identificador del proyecto">
										<div class="help-info">Sírvase proporcionar un número, identificador o número de referencia del proyecto, si procede.</div>
										<div km-textbox-ml name="projectNumber" ng-model="document.projectNumber" locales="document.header.languages"></div>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-md-12">
									<div class="km-control-group" name="projectDocument" caption="Dirección(es) del sitio web">
									<div class="help-info">Por favor, indique la dirección URL del sitio web (por ejemplo http://www.cbd.int) y el nombre del sitio web (por ejemplo, “Convenio sobre la Diversidad Biológica”).</div>
									<div km-link name="projectDocument" required ng-model="document.projectDocument" allow-link="true" allow-file="false" identifier="document.header.identifier"></div>
									</div>
								</div>
							</div>
		
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="contacts" caption="Persona de contacto">
											<div document-selector ng-model="document.contacts" question="contacts"
													on-build-query="onContactQuery(searchText)" allow-new="true" filter="true"
													allow-new-schema="contact"></div>
										</div>
									</div>
								</div>


								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="geographicScope" caption="Alcance geográfico">
											<div km-select name="geographicScope" required ng-model="document.geographicScope"
													placeholder="Por favor, seleccione una opción" items="options.geographicScope()"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="document.geographicScope && (isGlobalOrRegional() || isNational())">
									<div class="col-md-12">
										<div class="km-control-group"  required style="padding:10px;">
											<div class="row">
												<div class="col-md-3" ng-show="!isNational()">

													<div class="km-control-group" required name="geographicScope" caption="">
															<label name="countryRegions" class="control-label" for="geographicScope">Grupo(s) geográfico(s) o político-económico(s)</label>
														<div km-select multiple required name="regions"
																ng-model="countryRegions.regions" placeholder="Por favor, seleccione opción(es)"
																items="options.regions()"></div>
													</div>
												</div>
												<div class="col-md-1" ng-hide="!isGlobalOrRegional()">y/o</div>
												<div class="col-md-3">
													<div class="km-control-group" style="text-align: left;"  caption="">
														<label name="countryRegions" ng-required="isNational()" class="control-label" for="countryRegions">País(es)</label>
														<div km-select multiple required filter-type="startsWith" ng-model="countryRegions.countries" placeholder="Por favor, seleccione opción(es)" items="options.countries()"></div>
													</div>
												</div>
											</div>
										</div></div>
								</div>

								<div class="row" ng-if="document.geographicScope && isSubnational()">
									<div class="col-md-12">
										<div class="km-control-group"  name="countryRegions" caption="">
											<label name="countryRegions" required class="control-label" for="countryRegions">País(es)</label>
											<div km-select multiple required  ng-model="countryRegions.countries" placeholder="Por favor, seleccione opción(es)" items="options.countries()"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="km-control-group"  name="geographicScope.customValue" caption="">
											<label name="geographicScope.customValue" required="isSubnational()" class="control-label" for="geographicScope.customValue">Nombre de la jurisdicción subnacional</label>
											<div km-textbox-ml required="isSubnational()"  ng-model="document.geographicScope.customValue" placeholder="Por favor, seleccione opción(es)" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="document.geographicScope && isCommunity()">
									<div class="col-md-12">
										<div class="km-control-group"  name="countries" caption="">
											<label name="countryRegions" required class="control-label" for="countryRegions">País(es)</label>
											<div km-select multiple required ng-model="countryRegions.countries" placeholder="Por favor, seleccione opción(es)" items="options.countries()"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="km-control-group" name="geographicScope.customValue" caption="">
											<label name="geographicScope.customValue" required="isCommunity()" class="control-label" for="geographicScope.customValue">Nombre de de la comunidad</label>
											<div km-textbox-ml required="isCommunity()" ng-model="document.geographicScope.customValue" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="status" caption="Situación">
											<div km-select name="status" required ng-model="document.status" id="documentStatus"
													placeholder="Por favor seleccione una opción" items="options.status()"  show-description="true"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="timeframe" required caption="Lapso">
												<div class="row">
													<div class="col-md-3">
														<div class="km-control-group" name="startDate" caption="Fecha de inicio"
																	help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, Start date">
															<div km-date name="startDate" ng-model="document.startDate"></div>
														</div>
													</div>
													<div class="col-md-3">
														<div class="km-control-group" name="endDate" caption="Fecha de finalización"
																	help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, End date">
															<div km-date name="startDate" ng-model="document.endDate"></div>
														</div>
													</div>
													<div class="col-md-1 text-center" ng-show="!document.status || isProposedOrApproved()">
														<div class="km-control-group bold" style="margin-top:30px;" >OR</div>
													</div>
													<div class="col-md-5">
														
														<div class="km-control-group" name="duration" caption="Duración" ng-show="!document.status || isProposedOrApproved()">
															<div class="row">
																<div class="col-md-2">
																	<input type="number" name="durationPeriod" ng-model="document.durationPeriod"
																		minlength="1" placeholder="por ej., 24" ng-change="clearDates()" class="form-control"
																		style="display:inline-block;width:100px"/>
																</div>
																<div class="col-md-2">
																	<div class="km-control-group" name="durationText" caption="">
																		<div style="height: 0px;width:0px;opacity: 0;" name="durationText">
																			<label name="durationText" for="durationText">Duración en día(s)/mese(s)/año(s)</label>
																		</div>
																		<select name="durationText" ng-model="document.durationText"  class="form-control"
																			style="display:inline-block;width:100px" placeholder="eg. Months"
																			ng-options="obj.value as obj.text for obj in timing">
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="activityScope" caption="Tipo de iniciativa de creación de capacidad">
											<div km-term-radio name="activityScope" ng-model="document.activityScope" terms="options.activityScope()"
													show-description="true" binding-type="term" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group"  bold="true" required name="isProjectProgramme" caption="¿Forma parte de un proyecto o programa más amplio?">
											<div class="km-yes-no" required name="isProjectProgramme" ng-model="document.isProjectProgramme" ng-click="isBroaderProjectSelected(!document.isProjectProgramme)"></div>
										</div>
									</div>
									<div class="col-md-12" ng-if="document.isProjectProgramme">
										<div class="col-md-5">
										<div class="km-control-group" required name="projectProgrammeName" caption="Por favor, especifique el nombre del proyecto o programa.">
											<div km-textbox-ml required ng-model="document.projectProgrammeName" locales="document.header.languages"></div>
										</div>
										</div>
										<div class="col-md-2 text-center">y/o</div>
										<div class="col-md-5">
										<div class="km-control-group" required name="broaderProjects" caption="Por favor, establezca un enlace a un registro del Centro de Intercambio de Información relativo a este proyecto o programa.">
											<div document-selector ng-model="document.broaderProjects" question="broaderProjects"
													on-build-query="onBuildQuery(searchText,'capacityBuildingInitiative')" allow-new-schema="capacityBuildingInitiative" allow-new="true" filter="true"></div>
										</div>
										</div>
										</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required  caption="Organismo(s) u organización(es) que aplican y/o ejecutan la iniciativa">
											<div class="help-info">En algunas instancias, un organismo podría desempeñar ambas funciones, la de aplicación y la de ejecución. En dichos casos, por favor seleccione ambas casillas.</div>
											<div class="checkbox"><label for="isImplementedByAgencies"><input type="checkbox" id="isImplementedByAgencies" ng-model="document.isImplementedByAgencies" ng-click="isImpAgencies(!document.isImplementedByAgencies)">Organismo(s) u organización(es) de aplicación</label></div>

											<div class="row" >
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isImplementedByAgencies" name="implementingAgencies" caption="Por favor, seleccione el/los organismo(s) o la/las organización(es) de aplicación">
														<div class="help-info">Organismo de aplicación refiere a la organización o entidad jurídica responsable de elaborar la iniciativa y supervisar su aplicación, seguimiento y evaluación, incluido poner a disposición financiación, garantizar que se apliquen las normas fiduciarias y la garantía de calidad, así como de la preparación de los informes de finalización del proyecto. En última instancia, el organismo de aplicación es la entidad responsable del completamiento de la iniciativa y de la rendición de cuentas ante el donante.</div>

														<div document-selector name="implementingAgencies" ng-model="document.implementingAgencies" question="implementingAgencies"
																on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>

											<div class="checkbox"><label for="isExecutededByAgencies"><input id="isExecutededByAgencies" type="checkbox" ng-model="document.isExecutededByAgencies" ng-click="isExcAgencies(!document.isExecutededByAgencies)">Organismo(s) u organización(es) de ejecución</label></div>
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isExecutededByAgencies" name="executingAgencies" caption="Por favor, seleccione el/los organismo(s) o la/las organización(es) de ejecución">
														<div class="help-info">El organismo de ejecución es la organización o institución que gestiona directamente la iniciativa, incluida la planificación, coordinación y ejecución cotidiana de las actividades, el seguimiento y la presentación de informes sobre los progresos realizados, la obtención y gestión de recursos (personal, fondos, equipos, etc.) y el cumplimiento de otras funciones de gestión del proyecto.</div>
														<div document-selector ng-model="document.executingAgencies" question="executingAgencies"
																on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>
											<div class="checkbox"><label for="isCollaboratededByPartners"><input type="checkbox" id="isCollaboratededByPartners" ng-model="document.isCollaboratededByPartners">Asociado(s) en colaboración</label></div>
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isCollaboratededByPartners" name="collaboratingPartners" caption="Por favor, seleccione el/los asociado(s) en colaboración">
														<div class="help-info">Los asociados en colaboración son las entidades u organizaciones que realizan contribuciones económicas o de otro tipo importantes para la iniciativa o que apoyan o colaboran activamente con la ejecución de la iniciativa.</div>
														<div document-selector ng-model="document.collaboratingPartners" question="collaboratingPartners"
																on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Información detallada</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="description" caption="Descripción breve de la iniciativa, incluidos sus metas y objetivos (máx., 150 palabras)">
											<div km-textbox-ml required ng-model="document.description" rows="4" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required  name="categories" caption="Categoría(s) de las actividades de creación de capacidad">
											<div km-term-check required show-description="true" name="categories" ng-model="document.categories" terms="options.absCategories()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="targetGroups" caption="Main target group(s)/beneficiary(ies)">
											<div km-term-check name="targetGroups"  ng-model="document.targetGroups" terms="options.targetGroups()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								
							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Información sobre cobertura temática de la iniciativa</legend>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group tabular-term-check" name="cbdSubjects"
												caption="Esferas temáticas del CDB relacionadas">
											<div km-term-check name="cbdSubjects" ng-model="document.cbdSubjects"
													terms="cbdSubjects()" binding-type="term[]" tabular-shape="true"></div>
										</div>
									</div>
								</div>

								<div class="row" ng-if="isABS">
									<div class="col-md-12">
										<div class="km-control-group" name="aichiTargets"
												caption="Metas de Aichi para la Diversidad Biológica:">
											<div km-term-check name="aichiTargets" required ng-model="document.aichiTargets"
													terms="options.aichiTargets()" binding-type="term[]"></div>
										</div>
									</div>
								</div>

								<div class="row" ng-if="isABS">
									<div class="col-md-12">
										<div class="km-control-group" name="absKeyAreas"
												caption="Áreas clave y medidas estratégicas para la creación y el desarrollo de capacidad">
											<div class="help-info">Las áreas clave se han determinado en el marco estratégico para la creación y el desarrollo de capacidad a fin de brindar asistencia para la aplicación efectiva del Protocolo de Nagoya (decisión NP-1/8).</div>
											<div km-term-check name="absKeyAreas" ng-model="document.absKeyAreas" terms="options.absKeyAreas()"
													binding-type="term[]"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="isBCH">
									<div class="col-md-12">
										<div class="km-control-group tabular-term-check fourth-column" required name="cpbThematicAreas"
												caption="Áreas temáticas de la seguridad de la biotecnología">
												<div km-term-check required name="cpbThematicAreas" ng-model="document.cpbThematicAreas" locales="document.header.languages"
												terms="options.cpbThematicAreas()" binding-type="term[]" show-description="true" tabular-shape="true"></div>
										</div>
									</div>
								</div>

							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Información sobre financiación</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="fundingSourceTypes" caption="Tipo(s) de fuentes de financiación">
											<div km-term-check show-description="true" name="fundingSourceTypes" ng-model="document.fundingSourceTypes" 
												terms="options.fundingSources()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

							<div class="km-control-group" ng-show="isSelfFunding()" name="selfFunding" caption="Sírvase proporcionar información adicional sobre financiación"><!-- ToDO: isSelfFunding method can also be used --><div km-textbox-ml required="isSelfFunding()" rows="2" name="selfFunding" ng-model="document.fundingSourceTypes[document.fundingSourceTypes.length-1].customValue" placeholder="" locales="document.header.languages"></div>
							</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="coFinancingSources" caption="Fuente(s) principal(es) de financiación">
											<div document-selector ng-model="document.coreFundingSources" question="coreFundingSources"
													on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="coFinancingSources" caption="Fuente(s) de cofinanciación">
											<div document-selector ng-model="document.coFinancingSources" question="coFinancingSources"
													on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

										</div>
									</div>
								</div>


								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="totalBudget" caption="Presupuesto total (monto, en USD)">
											<div class="help-info">Puede incluir contribuciones en especie expresadas en términos monetarios. Por favor, no use espacios, puntos ni comas cuando introduzca el importe.</div>
											<div class="input-group"><span class="input-group-addon">USD</span><input type="text" class="form-control" style="width:200px" required name="totalBudget" ng-model="document.totalBudget" />
											</div>
										</div>
									</div>
								</div>

							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Resultados de la creación de capacidad</legend><strong>Resultados</strong><div class="help-info">Esta información puede proporcionarse una vez que existan algunos resultados (productos, efectos directos o efectos) o mejores prácticas y lecciones aprendidas de la iniciativa en curso o completada.</div>
									<div class="km-control-group" name="resultsAchievements" caption="">
										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsAchievements" caption="Principales logros"><span class="help-info">Sírvase proporcionar un resumen breve de los principales logros de la iniciativa, incluidos los relacionados con la promoción de la igualdad de género en el logro de los objetivos del Convenio y sus Protocolos, si procede (máx., 200 palabras).</span><div km-rich-textbox name="resultsAchievements" ng-model="document.resultsAchievements" rows="4" locales="document.header.languages"></div>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsOutputs" caption="Principales productos"><span class="help-info">Please provide a web link to, or attach a copy of, the relevant products (e.g. tools and materials) developed by the initiative and/or reports.</span><div km-link name="resultsOutputs" ng-model="document.resultsOutputs" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsReference" caption="Por favor, seleccione el número de registro de la Biblioteca virtual que contenga información pertinente.">
													<div document-selector ng-model="document.resultsReference" question="resultsReference"
													on-build-query="onBuildQuery(searchText,'resource')" allow-new="true" filter="true"
															allow-new-schema="resource"></div>
												</div>
											</div>
										</div>
									</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="bestPractices" caption="Buenas prácticas y lecciones aprendidas"><span class="help-info">Sírvase proporcionar un breve resumen de las mejores prácticas y lecciones aprendidas (máx., 500 palabras).</span><div km-rich-textbox name="bestPractices" ng-model="document.bestPractices" rows="4" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Información adicional</legend>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="address" caption="Cualquier otra información pertinente" >
											<div class="help-info">Please use this field to provide any other relevant information that may not have been addressed elsewhere in the record.</div>
											<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="relevantDocuments" caption="Otros documentos pertinentes">
											<div class="help-info">Por favor, utilice este campo para proporcionar otras direcciones web pertinentes y/o uno o más documentos pertinentes que se almacenarán en la base de datos para que los usuarios los descarguen.</div>
											<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="notes">
											<legend>Notas</legend><span class="help-info">The “Notes” field is for personal use. Solo puede verse cuando se edita el registro, pero no permanece visible cuando se lo publica. Este campo no está destinado a ser usado para información confidencial.</span><div km-notes name="notes" ng-model="document.notes"></div>
										</div>
									</div>
								</div>
							</div>

						</section>
					</div>
				</form>
			</edit-form>
			<review-form>
				<view-capacity-building-initiative ng-model="review.document" locale="review.locale" allow-drafts="true"></view-capacity-building-initiative>
			</review-form><!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons --></div>

	</div>
</div>