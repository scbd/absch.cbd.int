<div>
	<div class="registerpage-content edit-resource-base-directive">
		<workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" 
			hide-timer="false" tab="tab"
			validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
			on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
			on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
			data-container="{{container}}" is-dialog="{{isDialog}}" document-type="{{type}}">
			<edit-form>
					<form name="editForm" class="editForm" style="margin-top:10px">

						<div ng-show="tab=='edit'" km-tab="edit">
			
							<legend name="formInfo" style="display:none"></legend>
							<section>
								<div class="well no-shadow bg-white">
									<legend>Información general</legend>
			
                                    <div class="row">
                                        <div class="col-xs-12" >
                                            <div class="km-control-group" name="header.languages" required caption="Sírvase seleccionar el/los idioma(s) en los que desea presentar este registro:">
                                                <div class="indent">
                                                    <div km-form-languages multiple required name="documentLanguages" ng-model="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="title" caption="Título">
												<div class="help-block">Aparecerá como el título del registro del CIISB.</div>
												<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12" ng-if="isVlr||isMcc||isCpp">
											<div class="km-control-group tabular-term-check" required name="resourceTypes" caption="Tipo de recurso">
													<div class="help-block">Seleccione todas las opciones necesarias para describir mejor el/los recurso(s)</div>
													<div km-term-check name="resourceTypes" required ng-model="document.resourceTypes"  terms="options.resourceTypes()"
															binding-type="term[]" tabular-shape="{{isVlr ? true : false}}" locales="document.header.languages"></div>												
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12" style="margin-top: 30px; margin-bottom: -10px;">
											<label name="authors" style="font-size: 21px !important;" required for="authors">Autor(es)</label>
											<div class="help-block">Nombre de la persona u organización autora de la publicación o del recurso informativo.</div>
										</div>
										<div class="col-xs-12" style="margin-top: 20px;">
											<div class="km-control-group" name="authors" caption="Nombre(s) del autor">
												<div km-textbox-ml ng-model="document.authors" rows="2" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" caption="y/o" style="margin-bottom: 10px;"></div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="organizations" caption="Referencia a la(s) organización(es) a cargo de la autoría">
												<div document-selector type="checkbox" ng-model="document.organizations" question="organizations"
													 on-build-query="onAuthorContactQuery(searchText)" allow-new="true" filter="true"
													 schema="(organization contact)"  allow-new-schema="organization,contact"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="publisher" caption="Editor">
												<div km-textbox-ml name="publisher" ng-model="document.publisher" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" required name="publicationDate" caption="Fecha de publicación"
											help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: VLR">
												<div km-date placeholder="AAAA-MM" name="publicationDate" required 
												format="yyyy-mm" start-view="months" min-view-mode="months"
												ng-model="document.publicationDate"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="source" caption="Fuente">
												<div class="help-block">Referencia a un recurso del cual se ha obtenido el presente recurso, por ejemplo, el nombre de una revista en el caso de un artículo publicado en una revista especializada.</div>
												<div km-textbox-ml name="source" ng-model="document.source" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="rights" caption="Derechos">
												<div class="help-block">Información sobre la propiedad de los derechos sobre el recurso, como, por ejemplo, el titular de los derechos de autor, y la disponibilidad para la reproducción con propósitos educativos o sin fines de lucro.</div>
												<div km-textbox-ml name="rights" ng-model="document.rights" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>Acceso a el/los recurso(s)</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="resourceLinks" caption="Enlace al/a los recurso(s)">		
												<div class="help-block">Por favor, siempre adjunte el/los documento(s) pertinente(s) que serán almacenados en la base de datos para que los usuarios puedan descargarlos. When resources are available on the Internet, please also provide a link to them. Por favor, tenga en cuenta que se prefieren adjuntos a enlaces porque los primeros permanecen accesibles mientras que los enlaces pueden romperse.</div>										
												<div km-link name="resourceLinks"  ng-model="document.resourceLinks" allow-link="true" allow-file="true"
												 extensions="options.documentLinksExt" identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="cover" caption="Imagen(es) de portada">
												<div km-link name="cover" ng-model="document.covers" allow-link="false" allow-file="true" mimeTypes="image/jpeg;image/png"
												 identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>Información sobre el contenido del recurso</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="summary" caption="Resumen, síntesis o índice (máx. 300 palabras)">
												<div km-textbox-ml required ng-model="document.summary" rows="4" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									

									<div class="row">
    
										<div class="col-xs-12">
											<label>País(es) o grupo(s) regional(es) o económico(s) que abarca el recurso</label>
										</div>
										<div class="col-md-3">
											<div class="km-control-group small regions-list"  name="countryRegions.regions" caption="Grupo(s) geográfico(s) o político-económico(s)">
												<div km-select multiple name="countryRegions.regions"
													 ng-model="countryRegions.regions" placeholder="Por favor, seleccione opción(es)"
													 items="options.regions()"></div>
											</div>
										</div>

										<div class="col-md-1">
											<div class="km-control-group small country-list" name="countryRegions.countries" caption="y/o"></div></div>
									
										<div class="col-md-3">
											<div class="km-control-group small country-list" name="countryRegions.countries" caption="Nombre(s) de los países">
												<div km-select multiple name="countryRegions.countries" filter-type="startsWith" 
												ng-model="countryRegions.countries" placeholder="Por favor, seleccione opción(es)" items="options.countries()"></div>
											</div>
										</div>
										
									</div>

								</div>
								
							</section>
							<section>
								<div class="well no-shadow bg-white">
									<legend>Palabras clave que facilitan la búsqueda de información en los centros de intercambio de Información</legend>
									<div class="row" ng-if="isABS">
										<div class="col-md-12">
											<div class="km-control-group" name="aichiTargets" caption="Metas de Aichi para la Diversidad Biológica">
												<div km-term-check name="aichiTargets" ng-model="document.aichiTargets" terms="options.aichiTargets()"
												 binding-type="term[]"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group"  name="cbdSubjects" caption="Áreas temáticas del CDB">
												<div km-term-check name="cbdSubjects"  ng-model="document.cbdSubjects" 
												terms="options.cbdSubjects()" tabular-shape="true" binding-type="term[]" locales="document.header.languages"></div>													
											</div>
                                   		</div>
									</div>

								</div>
							</section><!-- Till now all fields are common for all CHs  --> <!-- IF BCH START --><section ng-if="isBCH">
							<div class="well no-shadow bg-white">
								<legend>Palabras clave relacionadas con la seguridad de la biotecnología</legend>
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" required name="biosafety.subjects" caption="Áreas temáticas de la seguridad de la biotecnología">
											<div km-term-check name="biosafety.subjects" required ng-model="document.biosafety.subjects"  terms="options.bchSubjects()"
											 binding-type="term[]" tabular-shape="true" ng-change="onThematicAreaChange(document.biosafety.subjects)" locales="document.header.languages"></div>
										</div>
									</div>
								</div><!-- TODO: need to apply a condition --><div >
									<div class="row" ng-if="hasRiskAssessmentSubject">
										<legend>Orientaciones para la evaluación del riesgo de los organismos vivos modificados</legend>
										<div class="alert alert-danger"><strong>Nota:</strong> se encuentra en desarrollo la función para recomendar un recurso como texto de antecedentes para las "Orientaciones para la evaluación del riesgo de los organismos vivos modificados".</div><!-- TODO: section hidden for now --> <!--
										<div  class="col-xs-12">
											<div class="km-control-group" required name="biosafety.raRecommend" caption="Would you like to recommend this document as background material for the “Guidance on Risk Assessment of Living Modified Organisms”?">
												<div km-yes-no required name="biosafety.raRecommend" ng-model="document.biosafety.raRecommend" ng-click="onRaRecommendChange(document.biosafety.raRecommend)"  locales="document.header.languages"></div>												
											</div>
										</div>
										<div class="col-xs-12" ng-if="document.biosafety.raRecommend">
											<div class="km-control-group" required name="biosafety.raAuthorAffiliation"  caption="Author affiliation">
												<div class="help-block">Please provide information on the author affiliation</div>
												<div km-term-check required name="biosafety.raAuthorAffiliation" ng-model="document.biosafety.raAuthorAffiliation" terms="options.bchRaAuthorAffiliation()"
													binding-type="term[]" locales="document.header.languages">
												</div>
											</div>
										</div>

										<div class="col-xs-12" ng-if="document.biosafety.raRecommend">
											<div class="km-control-group" name="biosafety.raSubjects" required  caption="Please indicate to which section(s) of the “Guidance” this background material is relevant">
												<div km-term-check name="biosafety.raSubjects" required ng-model="document.biosafety.raSubjects" terms="options.bchRaSubjects()"
													binding-type="term[]" locales="document.header.languages">
												</div>
											</div>
										</div>
									 --></div>
									<div class="row padding-top-10">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressModifiedOrganisms" caption="¿Este recurso aborda uno o más de un OVM específico?" required>
												<div km-yes-no required name="biosafety.addressModifiedOrganisms" ng-model="document.biosafety.addressModifiedOrganisms"  
													ng-click="onAddressModifiedOrganismsChange(document.biosafety.addressModifiedOrganisms)"  locales="document.header.languages" locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressModifiedOrganisms" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.modifiedOrganisms"  caption="Identificación del/de los OVM">
															<div document-selector name="biosafety.modifiedOrganisms" required type="checkbox"  ng-model="document.biosafety.modifiedOrganisms"
															   on-build-query="onBuildQuery(searchText, 'modifiedOrganism')" allow-new="true"  filter="true"
															   allow-new-schema="modifiedOrganism"></div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>

									<div class="row">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressOrganisms" caption="¿Este recurso aborda uno o más de un organismo específico?" required>
												<div km-yes-no required name="biosafety.addressOrganisms" ng-model="document.biosafety.addressOrganisms"  
													ng-click="onAddressOrganismsChange(document.biosafety.addressOrganisms)" locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressOrganisms" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.organisms"  caption="Identificación del/de los organismo(s)">
															<div document-selector name="biosafety.organisms" required ng-model="document.biosafety.organisms"
																 on-build-query="onBuildQuery(searchText, 'organism')" allow-new="true"
																 allow-new-schema="organism"></div>
														</div>
													</div>
													
												</div>
											</div>
										</div>
									</div>


									<div class="row">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressGenes" caption="¿Este recurso aborda uno o más de un elemento genético específico?" required>
												<div class="help-block">La información sobre elementos genéticos hace referencia a secuencias de ADN, comprendidos los genes, las secuencias de ADN reguladoras y otros ácidos nucleicos utilizados para crear un organismo vivo modificado. Estas pueden codificar una proteína o tener una función reguladora específica.</div>
												<div km-yes-no required name="biosafety.addressGenes" ng-model="document.biosafety.addressGenes"  
												ng-click="onAddressGenesChange(document.biosafety.addressGenes)"locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressGenes" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.genes"  caption="Identificación del/de los gen(es)">
															<div document-selector name="biosafety.genes" required type="checkbox"  ng-model="document.biosafety.genes"
																   on-build-query="onBuildQuery(searchText, 'dnaSequence')" allow-new="true"  filter="true"
																   allow-new-schema="dnaSequence"></div>
														</div>
													</div>
													
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section><!-- IF BCH END --> <!-- IF ABS START --><section ng-if="isABS">
							<div class="well no-shadow bg-white"><a rel="noopener" translation-url name="#AdditionalInformation"></a><legend>Palabras relacionadas con el acceso y la participación en los beneficios</legend>
								<div class="row" ng-if="isMcc">
									<div class="col-xs-12">
										<div class="km-control-group" name="nagoya.mccKeywords" required caption="Sírvase seleccionar las palabras clave pertinentes para describir el contenido del código de conducta, las directrices y las mejores prácticas y/o estándares que habrán de presentarse">
											<div km-term-check name="nagoya.mccKeywords" required ng-model="document.nagoya.mccKeywords" terms="options.mccKeywords()"
											 binding-type="term[]"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" required name="nagoya.subjects" caption="Áreas temáticas de ABS">
											<div km-term-check name="nagoya.subjects" required  ng-model="document.nagoya.subjects"  terms="options.absSubjects()"
											 binding-type="term[]" tabular-shape="false"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group tabular-term-check abs-resource-keywords" name="nagoya.keyAreas" caption="Áreas clave y medidas estratégicas para la creación y el desarrollo de las capacidades que se tratan en el recurso">
											<div class="help-block">Si el recurso está relacionado con la creación de capacidad relativa al Protocolo de Nagoya, indique la/s opción(es) que correspondan.</div>
											<div km-term-check name="nagoya.keyAreas" ng-model="document.nagoya.keyAreas"  terms="options.absKeyAreas()"
											 binding-type="term[]" tabular-shape="true" tabular-shape="true" ></div>
										</div>
									</div>
								</div>
							</div>
						</section><!-- IF ABS END --><section>
							<div class="well no-shadow bg-white"><a rel="noopener" translation-url name="#AdditionalInformation"></a><legend>Información adicional</legend>
		
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" name="address" caption="Cualquier otra información pertinente">
											<div class="help-block">Please use this field to provide any other relevant information that may not have been addressed elsewhere in the record.</div>
											<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
		
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" name="relevantDocuments" caption="Otros documentos pertinentes">
											<div class="help-block">Por favor, utilice este campo para proporcionar otras direcciones web pertinentes y/o uno o más documentos pertinentes que se almacenarán en la base de datos para que los usuarios los descarguen.</div>
											<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true"
											 identifier="document.header.identifier"></div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Notas</legend>
							<div class="row">
								<div class="col-sm-12">
									<div class="km-control-group" name="notes">
										<div class="help-block">The “Notes” field is for personal use. Solo puede verse cuando se edita el registro, pero no permanece visible cuando se lo publica. Este campo no está destinado a ser usado para información confidencial.</div>
										<div km-notes name="notes" ng-model="document.notes"></div>
									</div>
								</div>
							</div>
							</div>
						</section><!-- BCH and ABS COMPLETED HERE 	 --></div>
			
				</form>
			</edit-form>
			<review-form>
					<div view-resource ng-model="review.document" locale="review.locale" allow-drafts="true" heading="{{heading}}"
					short-heading="{{shortHeading}}"></div>
			</review-form><!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons --></workflow-arrow-buttons>

	</div>
</div>
