<div id="search-new">
    <div ng-show="!countryRecords"><i class="fa fa-spin fa-spinner fa-5x m-auto" ></i></div><!-- <div class="pull-right">
        <span export export-query="getExportQuery()" query-type="getRecordType()" help-title="Export countries data to excel/csv"></span>
    </div>
    <br/>
    <br/> --><div class="country-profile-list" ng-repeat="schema in countryRecords | orderBy:'index'" ng-if="schema">

        <h4 id="div{{schema.shortCode}}" class="link1 border-bottom pb-1 my-2 mx-1" 
        ng-click="showHideRecords(schema)"
        ng-class="{'color-litegrey': schema.numFound == 0}"><i class="fs-6 fw-normal fa" ng-class="{'fa-plus':!schema.display, 'fa-minus':schema.display}"></i> <span ng-bind="schema.title|lstring:locale" class="f-5"></span> (<span ng-bind="schema.shortCode"></span>) <span ng-if="schema.isRegional">- <span ng-bind="schema.government"></span></span> <span class="badge bg-secondary rounded-pill float-end" ng-class="{'bg-grey3': schema.numFound==0, 'bg-black': schema.numFound > 0}" ng-bind="schema.numFound"></span><div ng-if="schema.docs[0].rec_date" class="float-end label fs-small-8">Última actualización el: <span ng-bind="schema.docs[0].rec_date|formatDate"></span></div>
        </h4>
        <div ng-if="schema.isLoading" class="text-center"><i class="fa fa-spinner fa-spin"></i> Cargando...</div>
        <div ng-if="!schema.isLoading && schema.display && schema.numFound > 0" class="card bg-white">
            <div  ng-if="schema.shortCode!='MSR'">
                <div ng-repeat="doc in schema.docs|orderBy:title_t">
                    <result-default doc="doc" external-link="true" type="national"></result-default>  
                </div>
                <div class="btn-group" ng-if="schema.numFound >  schema.docs.length">
                    <button type="button" class="btn btn-default text-bold fs-small-6 text-uppercase"  ng-click="loadRecords(schema,10)" ng-disabled="schema.isLoading"><i class="fa fa-chevron-circle-down" aria-hidden="true"></i> mostrar los próximos 10 registros</button>
                    <button type="button" ng-if="schema.isLoading" class="btn btn-default fs-small-6 text-uppercase" ng-disabled="true"><i class="fa fa-spin fa-spinner pull-left" ></i> cargando...</button>
                    <button type="button" class="btn btn-default text-bold fs-small-6 text-uppercase" ng-click="loadRecords(schema)" ng-disabled="schema.isLoading"  ><i class="fa fa-chevron-circle-down" aria-hidden="true"></i> mostrar los <span ng-bind="schema.numFound-schema.docs.length"></span> registros restantes</button>
                </div>
            </div>

            <div ng-if="schema.shortCode=='MSR'">
                <div class="w-100 mb-4">
                    <legend>Seleccionar las medidas en materia de APB que se mostrarán en el panorama general</legend>
                    <div ng-repeat="measure in schema.docs|orderBy:sortMeasure" class="py-1 border-bottom" 
                       ng-class="{'bg-nationalmsr':measure.rec_meta1[0] === 'National / Federal','bg-subnationalmsr':measure.rec_meta1[0] === 'Sub-national','bg-communitymsr':measure.rec_meta1[0] === 'Community','bg-regionalmsr':measure.rec_meta1[0] === 'Regional / Multilateral'
                       ,'bg-othermsr':measure.rec_meta1[0] === 'Other' }">
                        <div> 
                            <input type="checkbox" ng-model="measure.measureMatrix" class="ms-1" /><a rel="noopener" translation-url  target="_blank" ng-href="database/record/{{measure|uniqueID|encodeURIComponent}}"><span class="color-black ms-2" ng-bind="$index+1 + '.'"></span> <span class="bold" ng-bind="measure.rec_title"></span></a></div>
                        <div class="recordDefault">
                           <ul class="metadata bold ms-3 fs-small-8">
                                <li><span class="fs-small-8 px-2 text-secondary" ng-if="measure.rec_meta1" ng-bind="measure.rec_meta1[0]"></span></li>
                                <li><span class="fs-small-8 px-2 text-secondary" ng-if="measure.rec_type" ng-bind="measure.rec_type"></span></li>
                                <li><span class="fs-small-8 px-2 text-secondary" ng-if="measure.rec_meta3" ng-bind="measure.rec_meta3[0]"></span></li>
                                <li><span class="fs-small-8 px-2 text-secondary" ng-if="measure.rec_meta5" ng-bind="measure.rec_meta5[0]"></span></li>
                                <li class="border-0"><span class="fs-small-8 px-2 text-secondary border-0" ng-if="measure.entryIntoForce_dt">Entrada en vigor: <span ng-bind="measure.entryIntoForce_dt|formatDate"></span> <span class="fs-small-8 px-2 text-secondary border-0" ng-if="measure.limitedApplication_dt">hasta el <span ng-bind="measure.limitedApplication_dt|formatDate"></span></span></span> <span class="fs-small-8 px-2 text-secondary border-0" ng-if="measure.adoption_dt">Adopción: <span ng-bind="measure.adoption_dt|formatDate"></span> <span class="fs-small-8 px-2 text-secondary border-0" ng-if="measure.limitedApplication_dt">hasta el <span ng-bind="measure.limitedApplication_dt|formatDate"></span></span></span> <span class="fs-small-8 px-2 text-secondary border-0" ng-if="measure.retired_dt">Retirado: <span ng-bind="measure.retired_dt|formatDate"></span></span></li>
                           </ul>
                        </div>
                    </div><!--<a rel="noopener" translation-url  class="link" style="margin-top:20px;" ng-click="selectAllForMatrix()" > select <span ng-if="!measureMatrixDocuments.selectAll">all</span><span ng-if="measureMatrixDocuments.selectAll">none</span></a>--></div>    
                       
                   <div class="mb-3">
                       <div ng-hide="(schema.docs|filter:{measureMatrix:true}).length==0" measure-matrix-countries-directive documents="schema.docs"></div>
                   </div>
            </div>
        </div>
    </div>
   
</div>
