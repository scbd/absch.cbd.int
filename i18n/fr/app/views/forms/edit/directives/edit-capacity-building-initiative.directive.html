<div class="innerPageEditForm capacity-building-initiative"><span block-region activate="isLoading()" ng-if="isLoading()"></span><div class="registerpage-content">

		<div class="alert alert-success alert-dismissable" ng-show="msg">
			<button aria-hidden="true" class="close" data-bs-dismiss="alert" ng-click="msg=''" type="button">&times;</button><strong><span ng-bind="msg"></span></strong></div>

		<div workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
		tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
		on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
		on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
		data-container="{{container}}" is-dialog="{{isDialog}}">

			<edit-form>
				<form name="editForm" style="margin-top:10px">


					<div ng-show="tab=='edit'" km-tab="edit">
						<section>
							<div class="well no-shadow bg-white">

								<legend>Informations générales</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="header.languages" required caption="Veuillez sélectionner la ou les langues dans lesquelles vous souhaitez soumettre ce fichier :">
											<div class="indent">
												<div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="title" caption="Non de l'initiative">
											<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

							<div class="row">
								<div class="col-md-12">
									<div class="km-control-group" name="projectNumber" caption="Numéro de projet ou identifiant">
										<div class="help-info">Veuillez fournir un numéro de projet, un identificateur ou un numéro de référence, le cas échéant.</div>
										<div km-textbox-ml name="projectNumber" ng-model="document.projectNumber" locales="document.header.languages"></div>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-md-12">
									<div class="km-control-group" name="projectDocument" caption="Adresse(s) du/des site(s) Web">
									<div class="help-info">Veuillez indiquer l'URL du site Web (par exemple http://www.cbd.int) et le nom du site Web (par exemple «La Convention sur la diversité biologique»).</div>
									<div km-link name="projectDocument" required ng-model="document.projectDocument" allow-link="true" allow-file="false" identifier="document.header.identifier"></div>
									</div>
								</div>
							</div>
		
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="contacts" caption="Personne contact">
											<div document-selector ng-model="document.contacts" question="contacts"
													on-build-query="onContactQuery(searchText)" allow-new="true" filter="true"
													allow-new-schema="contact"></div>
										</div>
									</div>
								</div>


								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="geographicScope" caption="Couverture géographique">
											<div km-select name="geographicScope" required ng-model="document.geographicScope"
													placeholder="Veuillez choisir une option" items="options.geographicScope()"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="document.geographicScope && (isGlobalOrRegional() || isNational())">
									<div class="col-md-12">
										<div class="km-control-group"  required style="padding:10px;">
											<div class="row">
												<div class="col-md-3" ng-show="!isNational()">

													<div class="km-control-group" required name="geographicScope" caption="">
															<label name="countryRegions" class="control-label" for="geographicScope">Regroupement(s) géographique(s) ou politique(s) / économique(s)</label>
														<div km-select multiple required name="regions"
																ng-model="countryRegions.regions" placeholder="Veuillez choisir une ou des option (s)"
																items="options.regions()"></div>
													</div>
												</div>
												<div class="col-md-1" ng-hide="!isGlobalOrRegional()">et/ou</div>
												<div class="col-md-3">
													<div class="km-control-group" style="text-align: left;"  caption="">
														<label name="countryRegions" ng-required="isNational()" class="control-label" for="countryRegions">Pays</label>
														<div km-select multiple required filter-type="startsWith" ng-model="countryRegions.countries" placeholder="Veuillez choisir une ou des option (s)" items="options.countries()"></div>
													</div>
												</div>
											</div>
										</div></div>
								</div>

								<div class="row" ng-if="document.geographicScope && isSubnational()">
									<div class="col-md-12">
										<div class="km-control-group"  name="countryRegions" caption="">
											<label name="countryRegions" required class="control-label" for="countryRegions">Pays</label>
											<div km-select multiple required  ng-model="countryRegions.countries" placeholder="Veuillez choisir une ou des option (s)" items="options.countries()"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="km-control-group"  name="geographicScope.customValue" caption="">
											<label name="geographicScope.customValue" required="isSubnational()" class="control-label" for="geographicScope.customValue">Nom de la juridiction sous-nationale</label>
											<div km-textbox-ml required="isSubnational()"  ng-model="document.geographicScope.customValue" placeholder="Veuillez choisir une ou des option (s)" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="document.geographicScope && isCommunity()">
									<div class="col-md-12">
										<div class="km-control-group"  name="countries" caption="">
											<label name="countryRegions" required class="control-label" for="countryRegions">Pays</label>
											<div km-select multiple required ng-model="countryRegions.countries" placeholder="Veuillez choisir une ou des option (s)" items="options.countries()"></div>
										</div>
									</div>
									<div class="col-md-12">
										<div class="km-control-group" name="geographicScope.customValue" caption="">
											<label name="geographicScope.customValue" required="isCommunity()" class="control-label" for="geographicScope.customValue">Nom de la communauté</label>
											<div km-textbox-ml required="isCommunity()" ng-model="document.geographicScope.customValue" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="status" caption="Statut">
											<div km-select name="status" required ng-model="document.status" id="documentStatus"
													placeholder="Veuillez choisir une option" items="options.status()"  show-description="true"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="timeframe" required caption="Calendrier">
												<div class="row">
													<div class="col-md-3">
														<div class="km-control-group" name="startDate" caption="Date de début"
																	help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, Start date">
															<div km-date name="startDate" ng-model="document.startDate"></div>
														</div>
													</div>
													<div class="col-md-3">
														<div class="km-control-group" name="endDate" caption="Date de fin"
																	help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="Help: CDI, End date">
															<div km-date name="startDate" ng-model="document.endDate"></div>
														</div>
													</div>
													<div class="col-md-1 text-center" ng-show="!document.status || isProposedOrApproved()">
														<div class="km-control-group bold" style="margin-top:30px;" >OU</div>
													</div>
													<div class="col-md-5">
														
														<div class="km-control-group" name="duration" caption="Durée" ng-show="!document.status || isProposedOrApproved()">
															<div class="row">
																<div class="col-md-2">
																	<input type="number" name="durationPeriod" ng-model="document.durationPeriod"
																		minlength="1" placeholder="Par exemple : 24" ng-change="clearDates()" class="form-control"
																		style="display:inline-block;width:100px"/>
																</div>
																<div class="col-md-2">
																	<div class="km-control-group" name="durationText" caption="">
																		<div style="height: 0px;width:0px;opacity: 0;" name="durationText">
																			<label name="durationText" for="durationText">Durée de la période en jours/mois/années</label>
																		</div>
																		<select name="durationText" ng-model="document.durationText"  class="form-control"
																			style="display:inline-block;width:100px" placeholder="eg. Months"
																			ng-options="obj.value as obj.text for obj in timing">
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="activityScope" caption="Type d’initiative de renforcement des capacités">
											<div km-term-radio name="activityScope" ng-model="document.activityScope" terms="options.activityScope()"
													show-description="true" binding-type="term" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group"  bold="true" required name="isProjectProgramme" caption="Cela fait-il partie d’un projet ou programme plus vaste?">
											<div class="km-yes-no" required name="isProjectProgramme" ng-model="document.isProjectProgramme" ng-click="isBroaderProjectSelected(!document.isProjectProgramme)"></div>
										</div>
									</div>
									<div class="col-md-12" ng-if="document.isProjectProgramme">
										<div class="col-md-5">
										<div class="km-control-group" required name="projectProgrammeName" caption="Veuillez préciser le nom du projet/programme.">
											<div km-textbox-ml required ng-model="document.projectProgrammeName" locales="document.header.languages"></div>
										</div>
										</div>
										<div class="col-md-2 text-center">et/ou</div>
										<div class="col-md-5">
										<div class="km-control-group" required name="broaderProjects" caption="Veuillez créer un lien vers un enregistrement du Centre d'échange sur ce projet ou programme.">
											<div document-selector ng-model="document.broaderProjects" question="broaderProjects"
													on-build-query="onBuildQuery(searchText,'capacityBuildingInitiative')" allow-new-schema="capacityBuildingInitiative" allow-new="true" filter="true"></div>
										</div>
										</div>
										</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required  caption="Organisme(s) ou organisation(s) mettant en œuvre ou exécutant l'initiative">
											<div class="help-info">Dans certaines circonstances, une organisme peut jouer à la fois le rôle de mise en œuvre et le rôle d’exécutant. Dans ces cas, veuillez sélectionner les deux cases.</div>
											<div class="checkbox"><label for="isImplementedByAgencies"><input type="checkbox" id="isImplementedByAgencies" ng-model="document.isImplementedByAgencies" ng-click="isImpAgencies(!document.isImplementedByAgencies)">Organisme(s) ou organisation(s) de mise en œuvre</label></div>

											<div class="row" >
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isImplementedByAgencies" name="implementingAgencies" caption="Veuillez sélectionner le/les organisme(s) ou organisation(s) de mise en œuvre">
														<div class="help-info">Les organismes de mise en œuvre sont les organisations ou entités juridiques responsables du développement de l'initiative et de la supervision de sa mise en œuvre, de son suivi et de son évaluation, y compris la mise à disposition de fonds, en veillant à ce que les normes fiduciaires et l'assurance de la qualité soient appliquées et à ce que la préparation des rapports d'achèvement du projet soit complété. L'organisme de mise en œuvre demeure l'entité responsable de l'achèvement de l'initiative et celle qui rend des comptes au donateur.</div>

														<div document-selector name="implementingAgencies" ng-model="document.implementingAgencies" question="implementingAgencies"
																on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>

											<div class="checkbox"><label for="isExecutededByAgencies"><input id="isExecutededByAgencies" type="checkbox" ng-model="document.isExecutededByAgencies" ng-click="isExcAgencies(!document.isExecutededByAgencies)">Organisme(s) ou organisation(s) d'exécution</label></div>
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isExecutededByAgencies" name="executingAgencies" caption="Veuillez sélectionner le/les organisme(s) ou organisation(s) d'exécution">
														<div class="help-info">L’organisme d'exécution est l'organisation/institution qui gère directement l'initiative, y compris la planification quotidienne, la coordination et l'exécution de ses activités, le suivi et l'établissement de rapports sur les progrès réalisés, le recrutement et la gestion des ressources (personnel, fonds, équipement, etc. ) et qui remplit d'autres fonctions de gestion de projet.</div>
														<div document-selector ng-model="document.executingAgencies" question="executingAgencies"
																on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>
											<div class="checkbox"><label for="isCollaboratededByPartners"><input type="checkbox" id="isCollaboratededByPartners" ng-model="document.isCollaboratededByPartners">Partenaire(s) collaborateur(s)</label></div>
											<div class="row">
												<div class="col-md-12">
													<div class="km-control-group" ng-show="document.isCollaboratededByPartners" name="collaboratingPartners" caption="Veuillez sélectionner le(s) partenaire(s) collaborateur(s)">
														<div class="help-info">Les partenaires collaborateurs sont les entités ou organisations qui apportent une contribution financière ou autre à l'initiative et/ou qui soutiennent ou collaborent activement dans la mise en œuvre de l'initiative.</div>
														<div document-selector ng-model="document.collaboratingPartners" question="collaboratingPartners"
																on-build-query="onBuildQuery(searchText,'organization')"  allow-new-schema="organization" allow-new="true" filter="true"></div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Renseignements détaillés</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required name="description" caption="Brève description de l’initiative, y compris ses buts et objectifs (max. 150 caractères)">
											<div km-textbox-ml required ng-model="document.description" rows="4" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" required  name="categories" caption="Catégorie(s) d’activités de renforcement des capacités">
											<div km-term-check required show-description="true" name="categories" ng-model="document.categories" terms="options.absCategories()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="targetGroups" caption="Groupe(s) cible(s) / bénéficiaire(s)">
											<div km-term-check name="targetGroups"  ng-model="document.targetGroups" terms="options.targetGroups()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								
							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Information sur la couverture thématique de l’initiative</legend>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group tabular-term-check" name="cbdSubjects"
												caption="Domaines thématiques liés de la CDB">
											<div km-term-check name="cbdSubjects" ng-model="document.cbdSubjects"
													terms="cbdSubjects()" binding-type="term[]" tabular-shape="true"></div>
										</div>
									</div>
								</div>

								<div class="row" ng-if="isABS">
									<div class="col-md-12">
										<div class="km-control-group" name="aichiTargets"
												caption="Objectifs d'Aichi">
											<div km-term-check name="aichiTargets" required ng-model="document.aichiTargets"
													terms="options.aichiTargets()" binding-type="term[]"></div>
										</div>
									</div>
								</div>

								<div class="row" ng-if="isABS">
									<div class="col-md-12">
										<div class="km-control-group" name="absKeyAreas"
												caption="Domaines clés et mesures stratégiques pour le renforcement et le développement des capacités">
											<div class="help-info">Les domaines clés sont identifiés par le Cadre stratégique pour le renforcement des capacités et le développement pour appuyer la mise en œuvre effective du Protocole de Nagoya (décision NP-1/8).</div>
											<div km-term-check name="absKeyAreas" ng-model="document.absKeyAreas" terms="options.absKeyAreas()"
													binding-type="term[]"></div>
										</div>
									</div>
								</div>
								<div class="row" ng-if="isBCH">
									<div class="col-md-12">
										<div class="km-control-group tabular-term-check fourth-column" required name="cpbThematicAreas"
												caption="Domaines thématiques de la CDB">
												<div km-term-check required name="cpbThematicAreas" ng-model="document.cpbThematicAreas" locales="document.header.languages"
												terms="options.cpbThematicAreas()" binding-type="term[]" show-description="true" tabular-shape="true"></div>
										</div>
									</div>
								</div>

							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Information sur les fonds</legend>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="fundingSourceTypes" caption="Type de source de financement()">
											<div km-term-check show-description="true" name="fundingSourceTypes" ng-model="document.fundingSourceTypes" 
												terms="options.fundingSources()" binding-type="term[]" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

							<div class="km-control-group" ng-show="isSelfFunding()" name="selfFunding" caption="Veuillez fournir des informations complémentaires sur le financement"><!-- ToDO: isSelfFunding method can also be used --><div km-textbox-ml required="isSelfFunding()" rows="2" name="selfFunding" ng-model="document.fundingSourceTypes[document.fundingSourceTypes.length-1].customValue" placeholder="" locales="document.header.languages"></div>
							</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="coFinancingSources" caption="Source(s) principale(s) de financement">
											<div document-selector ng-model="document.coreFundingSources" question="coreFundingSources"
													on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="coFinancingSources" caption="Source(s) de co-financement">
											<div document-selector ng-model="document.coFinancingSources" question="coFinancingSources"
													on-build-query="onBuildQuery(searchText,'organization')" allow-new-schema="organization" allow-new="true" filter="true"></div>

										</div>
									</div>
								</div>


								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="totalBudget" caption="Budget total (montant en dollars des É.-U.)">
											<div class="help-info">Cela peut inclure des contributions non monétaires toutefois exprimées en termes monétaires. Veuillez ne pas utiliser des espaces, des points ou des virgules en entrant un montant.</div>
											<div class="input-group"><span class="input-group-addon">Dollars des É.-U.</span><input type="text" class="form-control" style="width:200px" required name="totalBudget" ng-model="document.totalBudget" />
											</div>
										</div>
									</div>
								</div>

							</div>
						</section>
						<section>
							<div class="well no-shadow bg-white">
								<legend>Résultats en matière de renforcement de capacités</legend><strong>Résultats</strong><div class="help-info">Cette information peut être fournie une fois qu'il existe des résultats (résultats, données ou impacts) ou des pratiques exemplaires et des leçons tirées de l'initiative en cours ou terminée.</div>
									<div class="km-control-group" name="resultsAchievements" caption="">
										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsAchievements" caption="Principaux accomplissements"><span class="help-info">Veuillez fournir un bref résumé des principales réalisations de l'initiative, y compris celles liées à la promotion de l'égalité des sexes dans la réalisation des objectifs de la Convention et de ses Protocoles, le cas échéant. (max. 200 mots)</span><div km-rich-textbox name="resultsAchievements" ng-model="document.resultsAchievements" rows="4" locales="document.header.languages"></div>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsOutputs" caption="Principaux résultats"><span class="help-info">Please provide a web link to, or attach a copy of, the relevant products (e.g. tools and materials) developed by the initiative and/or reports.</span><div km-link name="resultsOutputs" ng-model="document.resultsOutputs" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
												</div>
											</div>
										</div>

										<div class="row">
											<div class="col-md-12">
												<div class="km-control-group" name="resultsReference" caption="Veuillez indiquer le numéro d'enregistrement auprès du CEPRB contenant ces informations.">
													<div document-selector ng-model="document.resultsReference" question="resultsReference"
													on-build-query="onBuildQuery(searchText,'resource')" allow-new="true" filter="true"
															allow-new-schema="resource"></div>
												</div>
											</div>
										</div>
									</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="bestPractices" caption="Pratiques exemplaires et leçons apprises"><span class="help-info">Veuillez fournir un bref résumé des pratiques exemplaires et des leçons tirées (maximum de 500 mots).</span><div km-rich-textbox name="bestPractices" ng-model="document.bestPractices" rows="4" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
							</div>
						</section>

						<section>
							<div class="well no-shadow bg-white">
								<legend>Information supplémentaire</legend>
								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="address" caption="Any other relevant information" >
											<div class="help-info">Please use this field to provide any other relevant information that may not have been addressed elsewhere in the record.</div>
											<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="relevantDocuments" caption="Autres documents pertinents">
											<div class="help-info">Veuillez utiliser ce champ pour toutes autres adresses de sites Web et/ou documents pertinents à conserver dans la base de données aux fins de téléchargement par les utilisateurs.</div>
											<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier" ></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-md-12">
										<div class="km-control-group" name="notes">
											<legend>Notes</legend><span class="help-info">Le champ ‘Notes’ est réservé à votre usage personnel. Il peut seulement être vu lorsqu’un dossier est en mode édition mais n’est pas visible lorsque celui-ci est publié. Ce champ n’est pas destiné à être utilisé pour des informations confidentielles.</span><div km-notes name="notes" ng-model="document.notes"></div>
										</div>
									</div>
								</div>
							</div>

						</section>
					</div>
				</form>
			</edit-form>
			<review-form>
				<view-capacity-building-initiative ng-model="review.document" locale="review.locale" allow-drafts="true"></view-capacity-building-initiative>
			</review-form><!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons --></div>

	</div>
</div>