<div ng-controller="editLmo">

	<div ng-include="'/app/views/forms/edit/edit_header.html'"></div>

	<div style="padding: 24px;background-color:#FFF;border-bottom:2px solid #ccc;">

		<span block-region activate="isLoading()" ng-if="isLoading()"></span>
		<div class="registerpage-content">

			<workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false" tab="tab"
			 validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
			 on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
			 on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
			 data-container="{{container}}" is-dialog="{{isDialog}}">
				<edit-form>
					<form class="editForm" name="editForm" style="margin-top:10px">
						<div>

							<section>
								<div class="well no-shadow bg-white">
									<legend>General information</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="languages" required caption=" Please select in which language(s) you wish to submit this record:">
												<div class="indent">
													<div km-form-languages required name="languages" ng-model="document.header.languages"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</section>

							<section>
								<div class="well no-shadow bg-white">
									<legend>Identity of the living modified organism (LMO)</legend>
									<div class="row">
										<div class="col-sm-12">
											<div class="km-control-group"  name="identity" caption="LMO name">
												<div class="help-block">Name commonly used to identify the LMO, such as the commercial name (e.g. Roundup soy, NewLeaf® potato, etc.)</div>
												<div km-textbox-ml name="identity"  ng-model="document.identity" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-sm-12">
											<div class="km-control-group" required name="transformationEvent" caption="Transformation event">
												<div class="help-block">Name of the transformation event, e.g. MON810</div>
												<input type="text" class="form-control" name="transformationEvent" required ng-model="document.transformationEvent"/>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" name="hasUniqueIdentification" required caption="Does this LMO have a unique identifier?">
												<div class="help-block">The BCH is currently using the Unique Identifier system as set out in the OECD Guidance for the Designation of Unique Identifiers for Transgenic Plants (example MON-ØØ81Ø-6). 
													For more information see <a href="http://bch.cbd.int/database/organisms/uniqueidentifiers/about.shtml">http://bch.cbd.int/database/organisms/uniqueidentifiers/about.shtml</a>.</div>
												<div km-yes-no required ng-model="document.hasUniqueIdentification" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-sm-12" ng-if="hasUniqueIdentification">
											<div class="km-control-group" required name="uniqueIdentification" caption="Unique identifier">
												<input type="text" class="form-control" name="uniqueIdentification" required ng-model="document.transformationEvent"/>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" name="developers" caption="Developer(s)">	
												<div document-selector ng-model="document.developers" question="developers"
													schema="(contact)" caption="Contacts"></div>			
											</div>
										</div>
										<div class="col-sm-12">
											<div class="km-control-group" required name="description" caption="Description">
												<div km-textbox-ml name="description" required ng-model="document.description" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" required name="recipientOrganisms" caption="Recipient Organism or Parental Organisms">	
												<div class="help-block">The term Recipient organism refers to an organism (either already modified or non-modified) that was subjected to genetic modification, whereas Parental organisms refers to those that were involved in cross breeding or cell fusion.</div>
												<div document-selector required ng-model="document.recipientOrganisms" question="recipientOrganisms"
													schema="(organism modifiedOrganism)" caption="Add Organism / Modified Organism"></div>			
											</div>
										</div>

										<div class="col-sm-12">
											<div class="km-control-group"  name="recipientOrganismCollectionPoint" caption="Point of collection or acquisition of the recipient organism or parental organisms">
												<div km-textbox-ml name="recipientOrganismCollectionPoint"  ng-model="document.recipientOrganismCollectionPoint" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" name="linkedModifiedOrganisms" caption="Related LMOs">	
												<div class="help-block">This field relates to other LMOs with similar characteristics.</div>
												<div document-selector ng-model="document.linkedModifiedOrganisms" question="linkedModifiedOrganisms"
													schema="(modifiedOrganism)"></div>			
											</div>
										</div>
									</div>
								</div>
							</section>
							

							<section>
								<div class="well no-shadow bg-white">
									<legend>Characteristics of the modification process</legend>
									<div class="row">
										<div class="col-sm-12">
											<div class="km-control-group"  name="vector" caption="Vector">
												<div class="help-block">Vectors are used to incorporate a DNA sequence (typically the promoter-gene-terminator construct) to assist its transfer into the recipient organism. Examples: Agrobacterium Ti plasmid and pBIN19.</div>
												<div km-textbox-ml name="vector"  ng-model="document.vector" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-sm-12">
											<div class="km-control-group"  name="techniqueUsed" caption="Techniques used for the modification">
												<div km-term-check name="techniqueUsed" required layout="list" locales="document.header.languages" ng-model="document.techniqueUsed" terms="options.techniqueUsed" binding-type="term[]"></div>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" required name="genes" caption="Introduced or modified genetic elements">	
												<div class="help-block">Preferably all genetic elements that were introduced into this LMO, such as promoters, protein coding sequences and terminators, must be referenced in this section. At least ALL protein coding sequences are mandatory.</div>
												<div document-selector ng-model="document.genes" question="genes"
													schema="(dnaSequence)" caption="Gene and DNA Sequence"></div>			
											</div>
										</div>
										<div class="col-sm-12">
											<div class="km-control-group" required name="geneConstructs" caption="Genetic elements construct">
												<lmo-construct ng-model="document.geneConstructs" ng-change="onConstructChange()"></lmo-construct>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" name="geneNotes" caption="Notes regarding the genetic elements present in this LMO">	
												<div class="help-block">Please specify if any of these elements has been modified from the sequence registered in the BCH Genetic Element Registry and how they relate to each other in this LMO, for instance “epsps protein coding sequence under control of the 35S promoter and nos terminator”.</div>
												<div km-textbox-ml name="geneNotes"  ng-model="document.geneNotes" locales="document.header.languages"></div>	
											</div>
										</div>
									</div>
								</div>
							</section>
	
							
							<section>
								<div class="well no-shadow bg-white">
									<legend>LMO characteristics</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="isGeneEdited" required
												caption="Was this LMO produced through a gene editing technique?">
												<div km-yes-no required ng-model="document.isGeneEdited" locales="document.header.languages">
												</div>
											</div>
										</div>
										<div class="col-sm-12">
											<div class="km-control-group" required name="traits" caption="Modified Traits">
												<div class="row" style="margin-bottom:10px">
													<div class="col-sm-12">
														<div class="panel panel-default">
															<div class="panel-heading">Resistance to diseases and pests</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['81799D15-669E-4346-9AEC-6834893D2BE4']"
																	terms="options.traits('81799D15-669E-4346-9AEC-6834893D2BE4')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
												</div>
												<div class="row" style="margin-bottom:10px">
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Resistance to herbicides</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['0C74FEB2-78E8-4163-81EF-2D410FB2FBBC']"
																	terms="options.traits('0C74FEB2-78E8-4163-81EF-2D410FB2FBBC')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Resistance to antibiotics</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['87D98E42-4757-42DE-9C3F-815BFAA35218']"
																	terms="options.traits('87D98E42-4757-42DE-9C3F-815BFAA35218')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
												</div>
												<div class="row" style="margin-bottom:10px">
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Tolerance to abiotic stress</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['31396BD1-9E3E-4EB3-A29E-9A22B7230221']"
																	terms="options.traits('31396BD1-9E3E-4EB3-A29E-9A22B7230221')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Changes in physiology and/or production</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['337747E5-522D-42DF-8C57-FE626C1572EC']"
																	terms="options.traits('337747E5-522D-42DF-8C57-FE626C1572EC')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
												</div>
												<div class="row" style="margin-bottom:10px">
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Reproduction</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['F888811E-3A27-4806-B424-2C6557A396C9']"
																	terms="options.traits('F888811E-3A27-4806-B424-2C6557A396C9')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Changes in quality and/or metabolite content</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['3B427EA6-5260-47F1-B424-FAAA5960FB52']"
																	terms="options.traits('3B427EA6-5260-47F1-B424-FAAA5960FB52')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
												</div>
												<div class="row" style="margin-bottom:10px">
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Production of medical or pharmaceutical compounds (human
																or animal)</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['5B9DB3B4-90A1-451A-A10C-E3A47995344F']"
																	terms="options.traits('5B9DB3B4-90A1-451A-A10C-E3A47995344F')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
													<div class="col-sm-6">
														<div class="panel panel-default">
															<div class="panel-heading">Use in industrial applications</div>
															<div class="panel-body">
																<div km-term-check name="traits" locales="document.header.languages" required
																	ng-model="traits['C8C662E2-D633-4C69-96EA-C9853997A3A5']"
																	terms="options.traits('C8C662E2-D633-4C69-96EA-C9853997A3A5')"
																	binding-type="term[]"></div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" required name="affectedGenes"
												caption="Other gene(s) whose expression was affected by the transformation">
												<div class="help-block">This section should be used to specify changes in the expression of
													genes other than those that were inserted into the LMO; for example, gene silencing or
													induction.</div>
												<div document-selector ng-model="document.affectedGenes" question="affectedGenes"
													schema="(dnaSequence)" caption="Gene and DNA Sequence"></div>
											</div>
										</div>
										<div class="col-xs-12">
											<div class="km-control-group" name="geneNotes"
												caption="Please describe how the expression of the gene(s) was affected">
												<div km-textbox-ml name="geneNotes" ng-model="document.geneNotes"
													locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-sm-12">
											<div class="km-control-group" required name="commonUses" caption="LMO's common use(s)">
												<div class="help-block">Choose as many options as applicable.</div>
												<div km-term-check name="commonUses" required ng-model="document.commonUses"
													terms="options.commonUses" binding-type="term[]"></div>
											</div>
										</div>
									</div>
								</div>
							</section>
							<section>
								<div class="well no-shadow bg-white">
									<legend>Detection method(s)</legend>
									<div class="row">
										<div class="col-sm-12">
											<div class="km-control-group" name="detectionMethod" caption="External link(s)">
												<div km-rich-textbox ng-model="document.detectionMethod" rows="4" placeholder="" locales="document.header.languages"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-sm-12">
											<div class="km-control-group" name="detectionMethodLinks" caption="Additional information">
												<div km-link name="detectionMethodLinks" ng-model="document.detectionMethodLinks" allow-link="true" allow-file="true"
													identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
								</div>
							</section>
							<section>
								<div class="well no-shadow bg-white">
									<legend>Additional information</legend>
									<div class="row">
										<div class="col-sm-12">
											<div class="km-control-group" name="address" caption="Any other relevant information">
												<div class="help-block">Please use this field to provide any other relevant information that may not have
													been addressed elsewhere in
													the record.</div>
												<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-sm-12">
											<div class="km-control-group" name="relevantDocuments" caption="Any other relevant documents">
												<div class="help-block">
													Please use this field to provide any other relevant website addresses and/or one or more
													relevant documents that will be stored in the database for users to download.
												</div>
												<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true"
												 identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
								</div>
							</section>
							<section>
								<legend>Notes</legend>

								<div class="row">
									<div class="col-sm-12">
										<div class="km-control-group" name="notes">
											<div class="help-block">The “Notes” field is for your personal notes or comments and will be hidden when
												viewing the record. This field
												is not meant to be used for confidential information.</div>
											<textarea class="form-control" name="notes" ng-model="document.notes" rows="4"></textarea>
										</div>
									</div>
								</div>
							</section>

						</div>
					</form>
				</edit-form>
				<review-form>
					<div view-modified-organism ng-model="document" locale="review.locale" allow-drafts="true"></div>
				</review-form>
			</workflow-arrow-buttons>
		</div>
	</div>
	<div id="constructSection">
		<script type="text/ng-template" trados-translation="true" id="geneConstructModal">
			<lmo-construct ng-model="geneConstruct" close-dialog="closeDialog(updatedConstruct)"></lmo-construct>
		</script>
	</div>
</div>
