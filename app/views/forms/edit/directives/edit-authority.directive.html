<div>
  
    <div class="edit-authority-directive" style="padding: 24px;background-color:#FFF;;border-bottom:2px solid #ccc;">
        <div class="registerpage-content">

            <warning-message-cna doc="document"></warning-message-cna>

            <workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
            tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
            on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
            on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
            data-container="{{container}}" is-dialog="{{isDialog}}">
                <edit-form>
                    <form class="editForm" name="editForm">
                        <div ng-show="tab=='edit'" km-tab="edit">
                            <legend name="formInfo" style="display:none"></legend>
        
                            <section>
                                <legend name="generalInfo">General Information</legend>

                                <div class="row">
                                    <div class="col-xs-12" >
                                        <div class="km-control-group" name="languages" required caption=" Please select in which language(s) you wish to submit this record:">
                                            <div class="indent">
                                                <div km-form-languages multiple required name="languages" ng-model="document.header.languages"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="government" required caption="Country">
                                            <div>
                                                <div afc-autocomplete required name="government" ng-disabled="userGovernment()"
                                                    ng-model="document.government" source="options.countries"
                                                    filter="genericFilter" mapping="genericMapping" selectbox="true"
                                                    placeholder="Please select a country..."></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12">                                        
                                        <div class="km-control-group" name="name" required caption="">
                                            <label name="name" class="control-label" required for="name">
                                                <span ng-if="type!='SPCA'">Name of the Competent National Authority</span>
                                                <span ng-if="type=='SPCA'">Name of the Competent Authority</span>
                                            </label>
                                            <div class="help-info"> Provide the specific name of the responsible entity e.g. Ministry of Environment. 
                                                <span ng-if="isAbs">Bear in mind that the name of the CNA will help to identify the record in the ABS Clearing-House.</span></div>
                                            <div km-textbox-ml name="name" required ng-model="document.name" rows="1"
                                                placeholder="" locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <legend name="coordinates">Contact Details</legend>
                                <div class="help-info" ng-if="isAbs">The coordinates will help users of genetic resources to get
                                    in contact with the CNA. It is important to keep this information up to date in
                                    order to provide users with recent and accurate information.</div>

                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="address" caption="Address">
                                            <div km-textbox-ml ng-model="document.address" rows="2" placeholder="example: 413 St-Jacques Ouest, Suite 800"
                                                locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="city" required caption="City">
                                            <div km-textbox-ml name="city" ng-model="document.city" required
                                                locales="document.header.languages" placeholder="example: Montreal"></div>
                                        </div>
                                    </div>

                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="state" caption="State or Province">
                                            <div km-textbox-ml name="state" ng-model="document.state" locales="document.header.languages"
                                                placeholder="example: Quebec"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">

                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="postalCode" caption="Postal Code or Zip">
                                            <div km-textbox-ml name="postalCode" ng-model="document.postalCode"
                                                locales="document.header.languages" placeholder="example: H2Y 1N9"></div>
                                        </div>
                                    </div>

                                    <div class="col-xs-6" ng-if="options.countries">
                                        <div class="km-control-group" name="country" required caption="Country of Contact">
                                            <div afc-autocomplete name="country" ng-model="document.country" source="options.countries"
                                                mapping="genericMapping" selectbox="true" placeholder="Please select a country..."
                                                required filter="startsWithFilter" maxmatches="50"></div>
                                        </div>
                                    </div>
                                </div>



                                <div class="row">
                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="phones" required caption="Phone number(s)">
                                            <div class="help-info">Please use the following format: +[country code] [city code] [telephone number] [extension, if necessary].</div>
                                            <div km-inputtext-list name="phones" ng-model="document.phones"
                                                required placeholder="example: +1 514.288.2220"></div>
                                        </div>
                                    </div>

                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="faxes" caption="Fax number(s)">
                                            <div class="help-info">Please use the following format: +[country code] [city code] [telephone number] [extension, if necessary].</div>
                                            <div km-inputtext-list name="faxes" ng-model="document.faxes"
                                                placeholder="example: +1 514.288.6588"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="emails" required caption="Email(s)">
                                            <div km-inputtext-list name="emails" required type="email" ng-model="document.emails"
                                                placeholder="example: secretariat@cbd.int"></div>
                                        </div>
                                    </div>

                                    <div class="col-xs-6">
                                        <div class="km-control-group" name="websites" caption="Website address(es)">
                                            <div km-link name="websites" ng-model="document.websites" allow-link="true"
                                                allow-file="false"></div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <legend name="contactInfo">Additional Contact Information</legend>

                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="km-control-group" name="contacts" caption="Contact person">
                                        <div document-selector ng-model="document.contacts" question="contacts"
                                            on-build-query="onContactQuery(searchText, tab)" allow-new="true"
                                            allow-new-schema="contact{{isAbs ? ',authority':''}}"></div>

                                    </div>
                                </div>
                            </div>
                            </section>
                            <!-- This section will be remove if this not required for ABS -->
                            <section ng-if="isAbs">
                                <legend name="policyBasis">Legal, administrative or policy basis for the competence of the Competent National Authority</legend>
                                <div class="help-info">In this section, a reference to the related ABS measure
                                    granting the competence of the CNA can be included. In order to link the CNA to
                                    a relevant ABS measure, the record of the ABS measure needs to be entered
                                    first. Therefore, if you have not yet submitted the relevant ABS measure, you
                                    may wish to save the CNA as a draft and publish the ABS measure before.<br/>
                                    In this section, a reference to the related measure granting the competence of the competent national authority for the Cartagena Protocol can be included. In order to link the competent authority to a relevant measure, the record of the measure needs to be entered first. Therefore, if you have not yet submitted the relevant measure, you may wish to save the competent national authority for the Cartagena Protocol as a draft and publish the measure first, or you can create the measure inline.
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="policyBasisForCompetencyRef" caption="Provide a link to any relevant legal, administrative or policy measures.">
                                            <div document-selector ng-model="document.policyBasisForCompetencyRef"
                                                question="policyBasisForCompetencyRef" government="document.government"
                                                schema="{{isBch ? 'biosafetyLaw': 'measure'}}" filter="true"
                                                allow-new="true" allow-new-schema="{{isBch ? 'biosafetyLaw': 'measure'}}"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="policyBasisForCompetency" caption="If needed, provide additional information on the legal, administrative or policy basis for the competence of the CNA."></div>
                                        <div km-rich-textbox ng-model="document.policyBasisForCompetency" rows="6"
                                            placeholder="" locales="document.header.languages"></div>
                                    </div>
                                </div>
                            </section>


                            <section ng-if="isAbs">
                                <legend name="responsibilities">Responsibilities</legend>
                                <div class="help-info">
                                    Article 13, paragraph 4 provides that "Where a Party designates more than one
                                    competent national authority, it shall convey to the Secretariat, with its
                                    notification thereof, relevant information on the respective
                                    responsibilities of those authorities. Where applicable, such information,
                                    shall, at a minimum, specify which competent authority is responsible for the
                                    genetic resource sought".
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" ng-show="showResponsibleforAllMsg()" name="responsibleForAllNot"
                                            caption="There is already a CNA for your country, please specify the scope of responsibilities of each CNA."></div>

                                        <div class="km-control-group" name="responsibleForAll" required caption="Is this the only designated competent national authority (CNA) in your country? If “no”, please describe the responsibilities of this competent national authority (CNA).">

                                            <div km-yes-no required ng-model="document.responsibleForAll"
                                                locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- IF NO SECTION -->
                                <div ng-class="{'disable':(document.responsibleForAll==true || document.responsibleForAll==null), 'bg-white':!(document.responsibleForAll==true || document.responsibleForAll==null) }"
                                    class="well no-shadow" style="padding-top:0;padding-bottom:0;">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <h4 ng-show="document.responsibleForAll==null">
                                                        If "no", the following information is required.</h4>
                                                    <h4 ng-show="document.responsibleForAll==true">
                                                        This section is not required.</h3>
                                                        <div ng-show="document.responsibleForAll==false">
                                                            <h4 class="color-red">
                                                                This section is required when there is more than
                                                                one competent national authority (CNA).
                                                                Please ensure that the responsibilities for each
                                                                competent national authority (CNA) are well
                                                                described in all published records.
                                                            </h4>
                                                        </div>

                                                        <div class="km-control-group" name="responsibilities"
                                                            caption="Short description of CNA responsibilities (maximum 300 characters)."
                                                            required>
                                                            <div class="help-info">Article 13, paragraph 2 provides
                                                                that “Competent national authorities shall, in
                                                                accordance with applicable national legislative,
                                                                administrative or policy measures, be responsible
                                                                for granting access or, as applicable, issuing
                                                                written evidence that access requirements have been
                                                                met and be responsible for advising on applicable
                                                                procedures and requirements for obtaining prior
                                                                informed consent and entering into mutually agreed
                                                                terms”. Remember that the purpose of this section
                                                                is to help users understand responsibilities
                                                                regarding access to genetic resources and should
                                                                answer the question: Who grants access for what?
                                                                The description of responsibilities should be short
                                                                and clear to understand. </div>
                                                            <div km-rich-textbox name="responsibilities" ng-model="document.responsibilities"
                                                                rows="6" placeholder="" locales="document.header.languages"
                                                                required></div>
                                                        </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="absJurisdiction" caption="Area of jurisdiction for granting access to genetic resources"
                                                        required>
                                                        <div class="help-info">The information on the area of
                                                            jurisdiction (national/federal, subnational, or
                                                            community level) helps to map out the different
                                                            responsibilities among various CNAs.</div>
                                                        <div km-select multiple name="absJurisdiction" ng-model="document.absJurisdiction"
                                                            items="options.jurisdictions()" required></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <div ng-show="showJurisdictionName()">
                                                        <div class="km-control-group" name="absJurisdictionName"
                                                            required caption="Name of the jurisdiction(s)">
                                                            <div km-textbox-ml ng-model="document.absJurisdictionName"
                                                                rows="1" locales="document.header.languages"
                                                                placeholder="jurisdition names"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="absGeneticResourceTypes"
                                                        caption="Keywords to describe  scope of CNA responsibilities">
                                                        <div class="help-info">The collection of this information
                                                            is important for facilitating harmonized searches
                                                            throughout the records. Please select all relevant
                                                            keywords that could assist in describing the
                                                            responsibilities of the competent national authority.</div>
                                                        <div km-select multiple name="absGeneticResourceTypes"
                                                            ng-model="document.absGeneticResourceTypes" items="options.keywords()"
                                                            show-description="true"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- END IF NO SECTION -->
                            </section>

                            <section ng-if="isBch">
                                <legend>Responsibilities</legend>
                                <div class="help-info">
                                    <span ng-if="type!='SPCA'">
                                        Article 19, paragraph 2 provides that “Where a Party designates more than one competent national authority, it shall convey to the Secretariat, with its notification thereof, relevant information on the respective responsibilities of those authorities. Where applicable, such information shall, at a minimum, specify which competent authority is responsible for which type of living modified organism”.
                                    </span>
                                    <span ng-if="type=='SPCA'">
                                        If there is more than one competent authority responsible for the functions under Article 5 of the Nagoya – Kuala Lumpur Supplementary Protocol on Liability and Redress, please specify for which functions each competent authority is responsible.<br/>
                                        If the competent authority exercises other functions related to liability and redress beyond those set out in Article 5 of the Supplementary Protocol, you may also provide a description of those functions below.
                                    </span>                                        
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div  ng-if="type!='SPCA'" class="km-control-group functions" name="functions" caption="Administrative functions" required>
                                            <div class="help-info">
                                                <span ng-if="type=='CNA'">
                                                    If there is more than one competent national authority, please complete a different common format for each authority.
                                                    If there is only one Authority responsible for all functions required by the Protocol, please select "All functions pursuant to the Cartagena Protocol on Biosafety".
                                                </span>
                                            </div>
                                            <div km-term-check name="functions" required ng-model="document.functions" locales="document.header.languages"
                                            terms="options.functions()" binding-type="term[]" show-description="true"></div>
                                        </div>
                                        <div ng-if="type=='CNA'" class="km-control-group type-of-organism" name="cpbOrganismTypes" caption="Types of organism(s) under its responsibility" required>
                                            <div class="help-info">If there is only one Authority responsible for all functions required by the Protocol, please select "All types of organisms".</div>
                                            <div km-term-check name="cpbOrganismTypes" required ng-model="document.cpbOrganismTypes" locales="document.header.languages"
                                            terms="options.bchOrganismTypes()" binding-type="term[]"></div>
                                        </div>

                                        <div  ng-if="type!='SPCA'" class="km-control-group" name="responsibilities" caption="Detailed description of the regulatory functions">
                                            <div class="help-info" ng-if="type!=='SPCA'">
                                                If needed, provide additional information on regulatory functions and responsibilities of the competent national authority.
                                            </div>
                                            <div km-rich-textbox name="responsibilities" ng-model="document.responsibilities"
                                                rows="6" placeholder="" locales="document.header.languages"></div>
                                        </div>
                                    </div>                                        
                                </div>
                            </section>
                            <section  ng-if="isBch && type=='SPCA'">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="responsibleForAll" required caption="Is this the only designated competent authority for the Supplementary Protocol in your country?">
                                            <div class="help-info">
                                                If “no”, please describe the responsibilities of the competent authority in the box below. Please complete a different common format for each competent authority.
                                            </div>
                                            <div km-yes-no required ng-model="document.responsibleForAll" locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="responsibilities" required="{{!document.responsibleForAll}}"
                                        caption="Short description of the responsibilities of the Competent Authority (maximum 300 characters)." >
                                        <div class="help-info">This information is required when there is more than one competent authority.</div>
                                        <div km-rich-textbox name="responsibilities" ng-model="document.responsibilities"
                                            rows="6" placeholder="" locales="document.header.languages"
                                            required="{{!document.responsibleForAll}}"></div>
                                    </div>
                                    </div>
                                </div>
                            </section>
                            <section ng-if="isBch">
                                <legend>Timeframe for confirmation or updating of information</legend>
                                <div class="help-info">
                                        Please note that this category of information requires confirmation or updating after one year from the date of submission. After the deadline you will be asked to confirm or update the record within 3 months. After this period, if no confirmation has been received, the record will be marked as “Not Confirmed”.
                                </div>
                            </section>
                            <section>
                                <legend>Additional Information</legend>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="relevantInformation" caption="Additional Information">
                                            <div class="help-info">Please use this field to provide any other
                                                relevant information that may not have been addressed elsewhere in
                                                the record.</div>
                                            <div km-rich-textbox name="relevantInformation" rows="6" ng-model="document.relevantInformation"
                                                locales="document.header.languages"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="relevantDocuments" caption="Any other relevant documents">
                                            <div class="help-block">
                                                    Please use this field to provide any other relevant website addresses and/or one or more 
                                                    relevant documents that will be stored in the database for users to download.
                                            </div>
                                            <div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true" identifier="document.header.identifier"></div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <legend>Notes</legend>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="km-control-group" name="notes">
                                            <div class="help-info">The “Notes” field is for personal reference and can be seen only when the record is being edited. It will be hidden once the record is published. This field is not meant to be used for confidential information.</div>
                                            <div km-notes name="notes" ng-model="document.notes"></div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </form>
                </edit-form>
                <review-form>
                    <view-authority ng-model="review.document" locale="review.locale" allow-drafts="true"></view-authority>
                </review-form>
            </div>

        </div>

    </div>

</div>