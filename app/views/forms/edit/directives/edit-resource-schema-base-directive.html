<div>
	<div class="registerpage-content edit-resource-base-directive">
		<workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" 
			hide-timer="false" tab="tab"
			validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
			on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
			on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
			data-container="{{container}}" is-dialog="{{isDialog}}" document-type="{{type}}">
			<edit-form>
					<form name="editForm" class="editForm" style="margin-top:10px">

						<div ng-show="tab=='edit'" km-tab="edit">
			
							<legend name="formInfo" style="display:none"></legend>
							<section>
								<div class="no-shadow bg-white">
									<legend>{{::('editVLRT.generalInfo'|$translate)}}</legend>
			
                                    <div class="row">
                                        <div class="col-xs-12" >
                                            <div class="km-control-group" name="header.languages" required caption="{{::('editVLRT.languageToPublish'|$translate)}}">
                                                <div class="indent">
                                                    <div km-form-languages multiple required name="documentLanguages" ng-model="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="title" caption="{{::('editVLRT.title'|$translate)}}">
												<div class="help-block">{{::('editVLRT.titleInfo'|$translate)}}</div>
												<div km-textbox-ml required ng-model="document.title" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12" ng-if="isVlr||isMcc||isCpp">
											<div class="km-control-group tabular-term-check" required name="resourceTypes" caption="{{::('editVLRT.typeOfResource'|$translate)}}">
													<div class="help-block">{{::('editVLRT.typeOfResourceInfo'|$translate)}}</div>
													<div km-term-check name="resourceTypes" required ng-model="document.resourceTypes"  terms="options.resourceTypes()"
															binding-type="term[]" tabular-shape="{{isVlr ? true : false}}" locales="document.header.languages"></div>												
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12" style="margin-top: 30px; margin-bottom: -10px;">
											<label name="authors" style="font-size: 21px !important;" required for="authors">{{::('editVLRT.author'|$translate)}}</label>
											<div class="help-block">{{::('editVLRT.authorInfo'|$translate)}}</div>
										</div>
										<div class="col-xs-12" style="margin-top: 20px;">
											<div class="km-control-group" name="authors" caption="{{::('editVLRT.authorName'|$translate)}}">
												<div km-textbox-ml ng-model="document.authors" rows="2" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" caption="{{::('editVLRT.andOr'|$translate)}}" style="margin-bottom: 10px;"></div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="organizations" caption="{{::('editVLRT.organizations'|$translate)}}">
												<div document-selector type="checkbox" ng-model="document.organizations" question="organizations"
													 on-build-query="onAuthorContactQuery(searchText)" allow-new="true" filter="true"
													 schema="(organization contact)"  allow-new-schema="organization,contact"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="publisher" caption="{{::('editVLRT.publisher'|$translate)}}">
												<div km-textbox-ml name="publisher" ng-model="document.publisher" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" required name="publicationDate" caption="{{::('editVLRT.publicationDate'|$translate)}}"
											help-content="<img src='/app/img/help-images/datetime_control.gif' />"  help-title="{{::('editVLRT.helpVLR'|$translate)}}">
												<div km-date placeholder="YYYY-MM" name="publicationDate" required 
												format="yyyy-mm" start-view="months" min-view-mode="months"
												ng-model="document.publicationDate"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="source" caption="{{::('editVLRT.source'|$translate)}}">
												<div class="help-block">{{::('editVLRT.sourceInfo'|$translate)}}</div>
												<div km-textbox-ml name="source" ng-model="document.source" locales="document.header.languages"></div>
											</div>
										</div>
										<div class="col-md-6 col-xs-12">
											<div class="km-control-group" name="rights" caption="{{::('editVLRT.rights'|$translate)}}">
												<div class="help-block">{{::('editVLRT.rightsInfo'|$translate)}}</div>
												<div km-textbox-ml name="rights" ng-model="document.rights" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									
								</div>
							</section>

							<section>
								<div class="no-shadow bg-white">
									<legend>{{::('editVLRT.accessResource'|$translate)}}</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="resourceLinks" caption="{{::('editVLRT.resourceLinks'|$translate)}}">		
												<div class="help-block">{{::('editVLRT.resourceLinksInfo'|$translate)}}</div>										
												<div km-link name="resourceLinks"  ng-model="document.resourceLinks" allow-link="true" allow-file="true"
												 extensions="options.documentLinksExt" identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" name="cover" caption="{{::('editVLRT.cover'|$translate)}}">
												<div km-link name="cover" ng-model="document.covers" allow-link="false" allow-file="true" mimeTypes="image/jpeg;image/png"
												 identifier="document.header.identifier"></div>
											</div>
										</div>
									</div>
								</div>
							</section>

							<section>
								<div class="no-shadow bg-white">
									<legend>{{::('editVLRT.informationResource'|$translate)}}</legend>
									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group" required name="summary" caption="{{::('editVLRT.summary'|$translate)}}">
												<div km-textbox-ml required ng-model="document.summary" rows="4" locales="document.header.languages"></div>
											</div>
										</div>
									</div>
									

									<div class="row">
    
										<div class="col-xs-12">
											<label>{{::('editVLRT.countryRegionalResource'|$translate)}}</label>
										</div>
										<div class="col-md-3">
											<div class="km-control-group small regions-list"  name="countryRegions.regions" caption="{{::('editVLRT.countryRegions'|$translate)}}">
												<div km-select multiple name="countryRegions.regions"
													 ng-model="countryRegions.regions" placeholder="{{::('editVLRT.selectOption'|$translate)}}"
													 items="options.regions()"></div>
											</div>
										</div>

										<div class="col-md-1">
											<div class="km-control-group small country-list" name="countryRegions.countries" caption="{{::('editVLRT.andOr'|$translate)}}"></div></div>
									
										<div class="col-md-3">
											<div class="km-control-group small country-list" name="countryRegions.countries" caption="{{::('editVLRT.countryName'|$translate)}}">
												<div km-select multiple name="countryRegions.countries" filter-type="startsWith" 
												ng-model="countryRegions.countries" placeholder="{{::('editVLRT.selectOption'|$translate)}}" items="options.countries()"></div>
											</div>
										</div>
										
									</div>

								</div>
								
							</section>
							<section>
								<div class="no-shadow bg-white">
									<legend>{{::('editVLRT.feywordsFacilitating'|$translate)}}</legend>
									<div class="row" ng-if="isABS">
										<div class="col-md-12">
											<div class="km-control-group" name="aichiTargets" caption="{{::('editVLRT.aichiTargets'|$translate)}}">
												<div km-term-check name="aichiTargets" ng-model="document.aichiTargets" terms="options.aichiTargets()"
												 binding-type="term[]"></div>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-xs-12">
											<div class="km-control-group tabular-term-check"  name="cbdSubjects" caption="{{::('editVLRT.cbdSubjects'|$translate)}}">
												<div km-term-check name="cbdSubjects"  ng-model="document.cbdSubjects" 
												terms="options.cbdSubjects()" tabular-shape="true" binding-type="term[]" locales="document.header.languages"></div>													
											</div>
                                   		</div>
									</div>

								</div>
							</section>
						<!-- Till now all fields are common for all CHs  -->
						<!-- IF BCH START -->
						<section ng-if="isBCH">
							<div class="no-shadow bg-white">
								<legend>{{::('editVLRT.keywordsRelatedBiosafety'|$translate)}}</legend>
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group tabular-term-check" required name="biosafety.subjects" caption="{{::('editVLRT.biosafetyThematicAreas'|$translate)}}">
											<div km-term-check name="biosafety.subjects" required ng-model="document.biosafety.subjects"  terms="options.bchSubjects()"
											 binding-type="term[]" tabular-shape="{{isVlr ? true : false}}" ng-change="onThematicAreaChange(document.biosafety.subjects)" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
								<!-- TODO: need to apply a condition -->
						        <div >
									<div class="row" ng-if="hasRiskAssessmentSubject">
										<legend>{{::('editVLRT.riskAssessmentSubject'|$translate)}}</legend>
										<div class="alert alert-danger">
											<strong>{{::('editVLRT.note'|$translate)}}</strong> {{::('editVLRT.riskAssessmentSubjectNotes'|$translate)}}
										</div>
										<!-- TODO: section hidden for now -->
										<!--
										<div  class="col-xs-12">
											<div class="km-control-group" required name="biosafety.raRecommend" caption="Would you like to recommend this document as background material for the “Guidance on Risk Assessment of Living Modified Organisms”?">
												<div km-yes-no required name="biosafety.raRecommend" ng-model="document.biosafety.raRecommend" ng-click="onRaRecommendChange(document.biosafety.raRecommend)"  locales="document.header.languages"></div>												
											</div>
										</div>
										<div class="col-xs-12" ng-if="document.biosafety.raRecommend">
											<div class="km-control-group" required name="biosafety.raAuthorAffiliation"  caption="Author affiliation">
												<div class="help-block">Please provide information on the author affiliation</div>
												<div km-term-check required name="biosafety.raAuthorAffiliation" ng-model="document.biosafety.raAuthorAffiliation" terms="options.bchRaAuthorAffiliation()"
													binding-type="term[]" locales="document.header.languages">
												</div>
											</div>
										</div>

										<div class="col-xs-12" ng-if="document.biosafety.raRecommend">
											<div class="km-control-group" name="biosafety.raSubjects" required  caption="Please indicate to which section(s) of the “Guidance” this background material is relevant">
												<div km-term-check name="biosafety.raSubjects" required ng-model="document.biosafety.raSubjects" terms="options.bchRaSubjects()"
													binding-type="term[]" locales="document.header.languages">
												</div>
											</div>
										</div>
									 -->
									</div>
									<div class="row padding-top-10">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressModifiedOrganisms" caption="{{::('editVLRT.addressModifiedOrganisms'|$translate)}}" required>
												<div km-yes-no required name="biosafety.addressModifiedOrganisms" ng-model="document.biosafety.addressModifiedOrganisms"  
													ng-click="onAddressModifiedOrganismsChange(document.biosafety.addressModifiedOrganisms)"  locales="document.header.languages" locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressModifiedOrganisms" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.modifiedOrganisms"  caption="{{::('editVLRT.modifiedOrganisms'|$translate)}}">
															<div document-selector name="biosafety.modifiedOrganisms" required type="checkbox"  ng-model="document.biosafety.modifiedOrganisms"
															   on-build-query="onBuildQuery(searchText, 'modifiedOrganism')" allow-new="true"  filter="true"
															   allow-new-schema="modifiedOrganism"></div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>

									<div class="row">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressOrganisms" caption="{{::('editVLRT.organismIdentification'|$translate)}}" required>
												<div km-yes-no required name="biosafety.addressOrganisms" ng-model="document.biosafety.addressOrganisms"  
													ng-click="onAddressOrganismsChange(document.biosafety.addressOrganisms)" locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressOrganisms" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.organisms"  caption="{{::('editVLRT.organismIdentification'|$translate)}}">
															<div document-selector name="biosafety.organisms" required ng-model="document.biosafety.organisms"
																 on-build-query="onBuildQuery(searchText, 'organism')" allow-new="true"
																 allow-new-schema="organism"></div>
														</div>
													</div>
													
												</div>
											</div>
										</div>
									</div>


									<div class="row">
										<div  class="col-xs-12">
											<div class="km-control-group" name="biosafety.addressGenes" caption="{{::('editVLRT.geneIdentification'|$translate)}}" required>
												<div class="help-block">
													{{::('editVLRT.geneIdentificationInfo'|$translate)}}
												</div>
												<div km-yes-no required name="biosafety.addressGenes" ng-model="document.biosafety.addressGenes"  
												ng-click="onAddressGenesChange(document.biosafety.addressGenes)"locales="document.header.languages"></div>
												<div ng-if="document.biosafety.addressGenes" style="margin-top: 15px;">
													<div class="col-xs-12">
														<div class="km-control-group" required name="biosafety.genes"  caption="{{::('editVLRT.geneIdentification'|$translate)}}">
															<div document-selector name="biosafety.genes" required type="checkbox"  ng-model="document.biosafety.genes"
																   on-build-query="onBuildQuery(searchText, 'dnaSequence')" allow-new="true"  filter="true"
																   allow-new-schema="dnaSequence"></div>
														</div>
													</div>
													
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<!-- IF BCH END -->
						<!-- IF ABS START -->
						<section ng-if="isABS">
							<div class="no-shadow bg-white">
								<a rel="noopener" translation-url name="#AdditionalInformation"></a>
								<legend>{{::('editVLRT.keywordsRelatedAccess'|$translate)}}</legend>
								<div class="row" ng-if="isMcc">
									<div class="col-xs-12">
										<div class="km-control-group" name="nagoya.mccKeywords" required caption="{{::('editVLRT.mccKeywords'|$translate)}}">
											<div km-term-check name="nagoya.mccKeywords" required ng-model="document.nagoya.mccKeywords" terms="options.mccKeywords()"
											 binding-type="term[]"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" required name="nagoya.subjects" caption="{{::('editVLRT.absThematicAreas'|$translate)}}">
											<div km-term-check name="nagoya.subjects" required  ng-model="document.nagoya.subjects"  terms="options.absSubjects()"
											 binding-type="term[]" tabular-shape="false"></div>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group tabular-term-check abs-resource-keywords" name="nagoya.keyAreas" caption="{{::('editVLRT.keyAreas'|$translate)}}">
											<div class="help-block">{{::('editVLRT.keyAreasInfo'|$translate)}}</div>
											<div km-term-check name="nagoya.keyAreas" ng-model="document.nagoya.keyAreas"  terms="options.absKeyAreas()"
											 binding-type="term[]" tabular-shape="true" tabular-shape="true" ></div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<!-- IF ABS END -->
						<section>
							<div class="no-shadow bg-white">
								<a rel="noopener" translation-url name="#AdditionalInformation"></a>
								<legend>{{::('editVLRT.additionalInformation'|$translate)}}</legend>
		
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" name="address" caption="{{::('editVLRT.otherRelevantInformation'|$translate)}}">
											<div class="help-block">{{::('editVLRT.relevantInformationInfo'|$translate)}}</div>
											<div km-rich-textbox ng-model="document.relevantInformation" rows="4" placeholder="" locales="document.header.languages"></div>
										</div>
									</div>
								</div>
		
								<div class="row">
									<div class="col-xs-12">
										<div class="km-control-group" name="relevantDocuments" caption="{{::('editVLRT.relevantDocuments'|$translate)}}">
											<div class="help-block">
												{{::('editVLRT.relevantDocumentsInfo'|$translate)}}
											</div>
											<div km-link name="relevantDocuments" ng-model="document.relevantDocuments" allow-link="true" allow-file="true"
											 identifier="document.header.identifier"></div>
										</div>
									</div>
								</div>
							</div>
						</section>
						<section>
							<div class="no-shadow bg-white">
								<legend>{{::('editVLRT.notes'|$translate)}}</legend>
							<div class="row">
								<div class="col-sm-12">
									<div class="km-control-group" name="notes">
										<div class="help-block">{{::('editVLRT.notesInfos'|$translate)}}</div>
										<div km-notes name="notes" ng-model="document.notes"></div>
									</div>
								</div>
							</div>
							</div>
						</section>	
						<!-- BCH and ABS COMPLETED HERE 	 -->
							
			
					</div>
			
				</form>
			</edit-form>
			<review-form>
					<div view-resource ng-model="review.document" locale="review.locale" allow-drafts="true" heading="{{heading}}"
					short-heading="{{shortHeading}}"></div>
			</review-form>
			<!-- <publish-form></publish-form> -->
			<!-- use when you wan to display more than publish buttons -->
		</workflow-arrow-buttons>

	</div>
</div>
