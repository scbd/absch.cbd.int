<div ng-controller="editEndorsement" class="md-whiteframe-z1">

    <div ng-include="'/app/views/forms/edit/edit_header.html'"></div>

    <div style="padding: 24px;background-color:#FFF;border-bottom:2px solid #ccc;">

                <span block-region activate="isLoading()" ng-if="isLoading()"></span>
        <div class="registerpage-content">

            <div ng-show="msg" class="alert alert-success alert-dismissable">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="msg=''">&times;</button>
                <strong>{{msg}}</strong>
            </div>

            <div class="alert alert-error" ng-show="hasError()">
                <strong>Error as occured...</strong>
                <div>{{error}}</div>
            </div>

            <!--<div ng-show="isLoading()">
                <i class="fa fa-spinner fa-spin"></i> Loading...
            </div>-->

            <div ng-show="!isLoading() && status!='hidden'">
                <div workflow-std-buttons document="getCleanDocument()" languages="document.header.languages" hide-timer="false" />

                <div km-document-validation ng-model="validationReport"></div>
                <form name="editForm" class="editForm" style="margin-top:10px">
                    <div ng-show="tab=='edit'" km-tab="edit">

                        <div class="row">
                            <div class="col-xs-12">
                                <div class="km-control-group">
                                    <div class="km-control-group" name="schema"
                                        caption="Record Type">
                                        <div km-select name="schema"
                                        ng-model="temp.endorsedSchema"items="options.endorsedSchemas()" placeholder="Please select ..."></div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="km-control-group">
                                    <div class="km-control-group" name="records"
                                        caption="Reference number for endorsement">
                                        <div km-select name="records"
                                        ng-model="document.reference"items="options.referenceRecords" watch-items placeholder="Please select ..."></div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <section>
                            <legend>Notes</legend>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="km-control-group" name="notes">
                                        <div class="help-info">The “Notes” field is for your personal notes or comments and will be hidden when viewing the record. This field is not meant to be used for confidential information.</div>
                                        <textarea class="form-control" name="notes" ng-model="document.notes" rows="4"></textarea>
                                    </div>
                                </div>
                            </div>
                        </section>

                    </div>
                </form>

                <div ng-show="tab=='review'" km-tab="review">

                    <div class="btn-group" ng-show="reviewDocument.header.languages.length>1">
                        <input type="button" class="btn" ng-class="{'active' : review.locale==locale, 'btn-info' : review.locale==locale}" ng-repeat="locale in document.header.languages" ng-click="$parent.review.locale = locale" value="{{locale | uppercase}}" />
                    </div>

                    <div view-endorsement ng-model="reviewDocument" locale="review.locale" allow-drafts="true"></div>

                </div>


            </div>
        </div>

    </div>
</div>
