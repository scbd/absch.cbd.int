<div >

    <edit-header></edit-header>

    <div class="innerPageEditForm">

        <span block-region activate="isLoading()" ng-if="isLoading()"></span>
        <div class="registerpage-content">

            <workflow-arrow-buttons on-review-language-change="onReviewLanguageChange(lang)" document="getCleanDocument()" languages="document.header.languages" hide-timer="false"
            tab="tab" validation-report="validationReport" on-post-close="onPostClose()" on-error="onError(error, errorCode)"
            on-post-publish="onPostPublishOrRequest(data)" on-pre-publish="onPrePublish()" on-pre-save-draft="onPreSaveDraft()"
            on-post-save-draft="onPostSaveDraft(data)" on-post-request="onPostPublishOrRequest(data)" on-pre-request="onPreRequest()"
            data-container="{{container}}" is-dialog="{{isDialog}}" document-type="{{type}}">
                <!-- <intro-form></intro-form> --> <!--only use it if default article intro is not required -->
                <edit-form>
                        <form class="editForm mt-2" name="editForm">
                                <div ng-show="tab=='edit'" km-tab="edit">
                                        
                                    <section>
                                        <legend name="generalInfo">{{::('editAbsCheckpointCT.generalInfo'|$translate)}}</legend>
                                        <div class="row">
                                            <div class="col-xs-12" >
                                                <div class="km-control-group" name="header.languages" required caption="{{::('editAbsCheckpointCT.languageToPublish'|$translate)}}">
                                                    <div class="indent">
                                                        <div km-form-languages multiple required name="header.languages" ng-model="document.header.languages"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="control-group">
                                                    <div class="km-control-group" name="government" required caption="{{::('editAbsCheckpointCT.government'|$translate)}}">
                                                        <div afc-autocomplete required name="government" ng-disabled="userGovernment()"
                                                            ng-model="document.government" source="options.countries" filter="genericFilter"
                                                            mapping="genericMapping" selectbox="true" placeholder="{{::('editAbsCheckpointCT.selectOption'|$translate)}}"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
            
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="control-group">
                                                    <div class="km-control-group" name="title" required caption="{{::('editAbsCheckpointCT.title'|$translate)}}">
                                                        <div class="help-info">{{::('editAbsCheckpointCT.titleInfo'|$translate)}}</div>
                                                        <div km-textbox-ml ng-model="document.title" rows="1" placeholder="{{::('editAbsCheckpointCT.title'|$translate)}}"
                                                            locales="document.header.languages"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
            
                                    </section>
            
                                    <section>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="control-group">
                                                    <div class="km-control-group" name="absCheckpoints" required caption="{{::('editAbsCheckpointCT.checkpoints'|$translate)}}">
                                                        <div class="help-info"> {{::('editAbsCheckpointCT.checkpointsInfo'|$translate)}}</div>
            
                                                       <div document-selector ng-disabled="!document.government.identifier" on-build-query="onBuildQuery(searchText)"
                                                                  ng-model="document.absCheckpoints" question="absCheckpoints" filter="true"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
            
                                    <section>
                                        <legend name="certificate">{{::('editAbsCheckpointCT.certificate'|$translate)}}</legend>
            
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <span ng-class="{'confidential-text':document.absIRCCsNotAvailable}">
                                                            <input type="checkbox" name="absIRCCsNotAvailable" ng-model="document.absIRCCsNotAvailable"
                                                                watch-items> {{::('editAbsCheckpointCT.IRCCsNotAvailable'|$translate)}}
                                                        </span>
                                                    </div>
                                                    <div class="panel-body panel-body-confidential" ng-class="{'disable':document.absIRCCsNotAvailable}">
                                                        <div class="km-control-group" style="margin-bottom:20px;" name="absIRCCs"
                                                            required caption="{{::('editAbsCheckpointCT.IRCCs'|$translate)}}">
                                                            <div class="help-info">{{::('editAbsCheckpointCT.IRCCsInfo'|$translate)}}</div>
                                                           <div document-selector on-build-query="onBuildIRCCsQuery(searchText)"
                                                                      ng-model="document.absIRCCs" question="absIRCCs"
                                                                      disabled="isAbsIRCCsNotAvailable()" filter="true"></div>
                                                        </div>
                                                    </div>
            
                                                </div>
                                            </div>
                                        </div>
                                        <br>
            
                                        <div class="clearfix"></div>
            
                                        <div ng-class="{'disable':!isAbsIRCCsNotAvailable(), 'bg-white':isAbsIRCCsNotAvailable() }"
                                            class="no-shadow py-0" style="padding-top:0;padding-bottom:0;">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <h3>{{::('editAbsCheckpointCT.IRCCComplain'|$translate)}}</h3>
                                                </div>
                                            </div>
            
                                            <legend>{{::('editAbsCheckpointCT.geneticResource'|$translate)}}</legend>
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="control-group">
                                                        <div class="km-control-group" name="sourceCountries" required caption="{{::('editAbsCheckpointCT.geneticResource'|$translate)}}">
                                                            <div class="help-info">{{::('editAbsCheckpointCT.geneticResourceInfo'|$translate)}}</div>
                                                            <div km-select required name="sourceCountries" ng-model="document.sourceCountries"
                                                                multiple items="options.countries()" placeholder="{{::('editAbsCheckpointCT.selectOption'|$translate)}}"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
            
            
                                            <legend>{{::('editAbsCheckpointCT.subjectMatterTitle'|$translate)}}</legend>
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="subjectMatter" required caption="{{::('editAbsCheckpointCT.subjectMatter'|$translate)}}">
                                                        <div class="help-info">{{::('editAbsCheckpointCT.subjectMatterInfo'|$translate)}} </div>
                                                        <div km-rich-textbox name="subjectMatter" rows="6" ng-model="document.subjectMatter"
                                                            locales="document.header.languages"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="legend2">{{::('editAbsCheckpointCT.additionalTitle'|$translate)}}
                                                    <span class="help-info">{{::('editAbsCheckpointCT.additionalInfo'|$translate)}}</span>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <div class="km-control-group" name="specimens" caption="{{::('editAbsCheckpointCT.specimens'|$translate)}}">
                                                            <span class="help-info">{{::('editAbsCheckpointCT.specimensInfo'|$translate)}}</span>
                                                            <div km-link name="specimens" ng-model="document.specimens" allow-link="true"
                                                                allow-file="false" identifier="document.header.identifier"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <div class="km-control-group" name="taxonomies" caption="{{::('editAbsCheckpointCT.taxonomies'|$translate)}}">
                                                            <span class="help-info">{{::('editAbsCheckpointCT.taxonomiesInfo'|$translate)}}</span>
                                                            <div km-link name="taxonomies" ng-model="document.taxonomies"
                                                                allow-link="true" allow-file="false" identifier="document.header.identifier"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12" ng-class="{'warning':isInvalid('gisFiles')}">
                                                        <div class="km-control-group">
                                                            <label class="control-label" for="gisFiles">{{::('editAbsCheckpointCT.geographicCoordinates'|$translate)}}</label>
                                                            <span class="help-info">{{::('editAbsCheckpointCT.geographicCoordinatesInfo'|$translate)}} (<a rel="noopener" translation-url
                                                                    href="http://www.geojson.org/" target="_blank">http://www.geojson.org/</a>)</span>
                                                            <div km-link required name="gisFiles" ng-model="document.gisFiles"
                                                                allow-link="false" identifier="document.header.identifier"
                                                                mime-types="application/json"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12">
                                                        <div class="km-control-group" name="keywords" caption="{{::('editAbsCheckpointCT.keywords'|$translate)}}">
                                                            <div class="help-info"></div>
                                                            <div km-select multiple show-description="true" required name="keywords"
                                                                ng-model="document.keywords" items="options.keywords()"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12" ng-show="isOthers()">
                                                        <div class="km-control-group" required name="keywordOther" caption="{{::('editAbsCheckpointCT.keywordOther'|$translate)}}">
                                                            <div km-textbox-ml required name="keywordOther" rows="1" ng-model="document.keywordOther"
                                                                locales="document.header.languages"></div>
                                                        </div>
                                                    </div>
                                                </div>
            
                                            </div>
                                            <div ng-show="document.gisFiles">
                                                <div class="input-prepend input-append">
                                                    <input class="input-small" type="text" readonly value="{{document.gisMapCenter.lat | number:6}}" />
                                                    <span class="add-on">{{::('editAbsCheckpointCT.lat'|$translate)}}</span>
                                                </div>
                                                <div class="input-prepend input-append">
                                                    <input class="input-small" type="text" readonly value="{{document.gisMapCenter.lng | number:6}}" />
                                                    <span class="add-on">{{::('editAbsCheckpointCT.long'|$translate)}}</span>
                                                </div>
                                                <div class="input-prepend input-append">
                                                    <input class="input-small" type="text" readonly value="{{document.gisMapCenter.zoom | number:0}}" />
                                                    <span class="add-on">{{::('editAbsCheckpointCT.zoom'|$translate)}}</span>
                                                </div>
                                            </div>
                                            <div ng-show="document.gisFiles" class="leaflet" center="document.gisMapCenter" layers="gisLayer"></div>
            
                                            <legend>{{::('editAbsCheckpointCT.evidence'|$translate)}}</legend>
            
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="evidenceOfPIC" caption="{{::('editAbsCheckpointCT.evidenceOfPIC'|$translate)}}">
                                                        <div class="help-info">{{::('editAbsCheckpointCT.evidenceOfPICInfo'|$translate)}}</div>
                                                        <div km-rich-textbox name="evidenceOfPIC" rows="4" ng-model="document.evidenceOfPIC"
                                                            locales="document.header.languages"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="entityWhoGrantedPIC" caption="{{::('editAbsCheckpointCT.entityWhoGrantedPIC'|$translate)}}">
                                                        <div document-selector on-build-query="onContactSkipGovernmentQuery(searchText)"
                                                                  ng-model="document.entityWhoGrantedPIC" type="radio" list-view="true"
                                                                  question="entityWhoGrantedPIC"
                                                                  filter="true" allow-new="true" allow-new-schema="contact"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="entityToWhomPICGranted" caption="{{::('editAbsCheckpointCT.entityToWhomPICGranted'|$translate)}}">
                                                        <span class="help-info">{{::('editAbsCheckpointCT.entityToWhomPICGrantedInfo'|$translate)}}</span>
                                                        <div document-selector on-build-query="onContactSkipGovernmentQuery(searchText)"
                                                                    ng-model="document.entityToWhomPICGranted" type="radio" list-view="true"
                                                                    question="entityToWhomPICGranted" filter="true" allow-new="true" allow-new-schema="contact"></div>
            
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div class="km-control-group" name="evidenceOfMAT" caption="{{::('editAbsCheckpointCT.evidenceOfMAT'|$translate)}}">
                                                        <div class="help-info">{{::('editAbsCheckpointCT.evidenceOfMATInfo'|$translate)}}</div>
                                                        <div km-rich-textbox name="evidenceOfMAT" rows="4" ng-model="document.evidenceOfMAT"
                                                            locales="document.header.languages"></div>
                                                    </div>
                                                </div>
                                            </div>
            
                                            <div class="row">
                                                <div class="col-xs-12 col-md-3">
                                                    <div class="km-control-group" name="dateOfAccess" caption="{{::('editAbsCheckpointCT.dateOfAccess'|$translate)}}">
                                                        <div km-date placeholder="YYYY-MM-DD" required name="dateOfAccess" ng-model="document.dateOfAccess"></div>
                                                    </div>
                                                </div>
                                            </div>
                                    </section>
                                    <section>
            
                                        <legend>{{::('editAbsCheckpointCT.informationUtilization'|$translate)}}</legend>
            
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="km-control-group" required name="description" caption="{{::('editAbsCheckpointCT.description'|$translate)}}">
                                                    <div class="help-info">{{::('editAbsCheckpointCT.descriptionInfo'|$translate)}}</div>
                                                    <div km-rich-textbox name="description" rows="4" ng-model="document.description"
                                                        locales="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
            
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="km-control-group" name="personsAtCheckpoint" caption=" {{::('editAbsCheckpointCT.personsAtCheckpoint'|$translate)}} ">
                                                    <div class="help-info">{{::('editAbsCheckpointCT.personsAtCheckpointInfo'|$translate)}}</div>
                                                    <div document-selector ng-disabled="!document.government.identifier" on-build-query="onContactQuery(searchText)"
                                                               ng-model="document.personsAtCheckpoint" question="personsAtCheckpoint"
                                                               filter="true" allow-new="true" allow-new-schema="contact"></div>
                                                </div>
                                            </div>
                                        </div>
            
                                        <label>{{::('editAbsCheckpointCT.dateOfInformation'|$translate)}}</label>
                                        <div class="row" style="margin-bottom:20px;">
                                            <div class="col-4">
                                                <div km-date placeholder="YYYY-MM-DD" required name="dateCollected" ng-model="document.dateCollected"></div>
                                            </div>
                                            <div class="col-2">
                                                <div style="font-size:16px;font-weight:bold;padding: 6px;text-align: center;" name="dateOR"
                                                    caption="OR">{{::('editAbsCheckpointCT.or'|$translate)}}</div>
                                            </div>
                                            <div class="col-3 text-right">
                                                <div km-date placeholder="{{::('editAbsCheckpointCT.from'|$translate)}}" required name="dateCollectedFrom" ng-model="document.dateCollectedFrom"></div>
                                            </div>
                                            <div class="col-3 text-right">
                                                <div km-date placeholder="{{::('editAbsCheckpointCT.to'|$translate)}}" required name="ddateCollectedTo" ng-model="document.dateCollectedTo"></div>
                                            </div>
                                        </div>
            
                                    </section>
            
                                    <section>
            
                                        <legend>{{::('editAbsCheckpointCT.additionalInformation'|$translate)}}</legend>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="km-control-group" name="relevantInformation" caption="{{::('editAbsCheckpointCT.additionalInformation'|$translate)}}">
                                                    <div class="help-info">{{::('editAbsCheckpointCT.relevantInformationInfo'|$translate)}}</div>
                                                    <div km-rich-textbox name="relevantInformation" rows="6" ng-model="document.relevantInformation"
                                                        locales="document.header.languages"></div>
                                                </div>
                                            </div>
                                        </div>
            
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="km-control-group" name="relevantDocuments" caption="{{::('editAbsCheckpointCT.relevantDocumentsInfo'|$translate)}}">
                                                    <div km-link name="relevantDocuments" ng-model="document.relevantDocuments"
                                                        identifier="document.header.identifier"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <section>
                                        <legend>{{::('editAbsCheckpointCT.notes'|$translate)}}</legend>
            
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="km-control-group" name="notes">
                                                    <div class="help-info">{{::('editAbsCheckpointCT.notesInfos'|$translate)}}</div>
                                                    <textarea class="form-control" rows="4" name="notes" ng-model="document.notes"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </form>    
                </edit-form>
                <review-form>
                    <view-abs-checkpoint-communique show-pdf="false" ng-model="review.document" locale="review.locale" allow-drafts="true"></view-abs-checkpoint-communique>
                </review-form>
                <!-- <publish-form></publish-form> --> <!-- use when you wan to display more than publish buttons -->
            </workflow-arrow-buttons>

        </div>
    </div>
</div>
</div>
