<div ng-show="document">


    <span ng-if="documentForUID.deletedOn">
        <span class="label label-danger">This linked record has been deleted.</span>
    </span>

    <div ng-click="showContact=!showContact" style="cursor: pointer;">
        
        <span ng-if="!showContact" class="bold"> + </span>
        <span ng-if="showContact" class="bold"> - </span>
        <span class="selected-reference-uid">
            
            <span ng-if="isCNA"> <span class="color-blue"> Competent National Authority:</span>
                {{(documentForUID || document) | uniqueID}} </span>
            <span ng-if="isNFP"><span class="color-blue uppercase">National Focal Point:</span>
                {{document.prefix | lstring:locale}} {{document.firstName}} {{document.middleName}}
                {{document.lastName}}</span>
            <span ng-if="isPerson && !isNFP"><span class="color-blue uppercase-sm">Person:</span>
                {{document.prefix | lstring:locale}} {{document.firstName}} {{document.middleName}}
                {{document.lastName}}</span>
            <span ng-if="isOrganization && !isCNA"><span class="color-blue">Organization:</span>
                {{(document.name||document.organization) | lstring:locale}}
                <span ng-show="document.acronym">({{(document.acronym||document.organizationAcronym) | lstring:locale}})</span>
            </span>
            | 
            <a rel="noopener" translation-url  ng-href="/database/{{document.header.schema | urlSchemaShortName|encodeURIComponent}}/{{document | uniqueIDWithoutRevision|encodeURIComponent}}/{{document.revision|encodeURIComponent}}" target="_blank">
                {{document | uniqueID}} <i class="fa fa-external-link-square" aria-hidden="true"></i> 
            </a>           
        </span>
    </div>

    <blockquote ng-show="showContact">
        <div ng-if="isOrganization">
            <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                ng-if="!isCNA">Organization</div>
            <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                ng-if="isCNA">Competent National Authority</div>
            <div>
                <span style="font-weight:500;">{{(document.name||document.organization) | lstring:locale}}</span>
                <span
                    ng-show="document.acronym">({{(document.acronym||document.organizationAcronym) | lstring:locale}})</span>
            </div>
            <div ng-if="document.organizationType">
                {{document.organizationType|term}}
            </div>
            <div ng-if="document.firstName||document.lastName">
                {{document.prefix | lstring:locale}} {{document.firstName}} {{document.middleName}}
                {{document.lastName}}
            </div>
            <div ng-if="document.designation || document.department">
                {{document.designation | lstring:locale}}<span ng-show="document.designation && document.department">,
                </span> {{document.department | lstring:locale}}
            </div>
        </div>

        <div ng-if="isPerson||isNFP">
            <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                ng-if="!isCNA && !isNFP">Person</div>
            <div style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-bottom:5px;color:#999;"
                ng-if="!isCNA && isNFP">National Focal Point</div>
            <div>
                <span style="font-weight:500;">{{document.prefix | lstring:locale}} {{document.firstName}}
                    {{document.middleName}} {{document.lastName}}</span>
            </div>
            <div ng-if="document.designation || document.department">
                {{document.designation | lstring:locale}}<span ng-show="document.designation && document.department">,
                </span> {{document.department | lstring:locale}}
            </div>

            <div ng-if="document.organization">
                {{document.organization | lstring:locale}} <i ng-show="document.organizationAcronym">
                    ({{document.organizationAcronym | lstring:locale}})</i>
            </div>

        </div>

        <!--<span onload="otherElements = otherTerms[term.identifier]" ng-include="'/app/views/forms/edit/edit-measure.directive/abs/inner/other'"></span>-->
        <span ng-if="document" onload="document=document"
            ng-include="'reference-contact-address'"></span>

        <div ng-if="isPerson && document.contactOrganization">
            <div
                style="font-size:12px;border-bottom:1px solid #ccc;text-transform:uppercase;font-weight:bold;margin-top:10px;margin-bottom:5px;color:#999;">
                Related Organization
            </div>

            <span ng-if="document.contactOrganizationInfo.deletedOn">
                <span class="label label-danger">This linked record has been deleted.</span>
            </span>
            <div ng-if="document.contactOrganization">
                <b>{{document.contactOrganization.organization | lstring:locale}}</b>
                <span ng-show="document.contactOrganization.organizationAcronym">
                    ({{document.contactOrganization.organizationAcronym | lstring:locale}})
                </span>
            </div>
            <div ng-if="document.contactOrganization.organizationType">
                {{document.contactOrganization.organizationType|term}}
            </div>
            <span ng-if="document.contactOrganization" onload="document=document.contactOrganization"
                ng-include="'reference-contact-address'"></span>
        </div>

        <script id="reference-contact-address" type="text/ng-template" trados-translation="true">
            <address ng-if="document.address || document.country || document.city || document.state || document.postalCode" style="margin-bottom:2px!important">
                <span ng-show="document.addressHTML" ng-bind-html="document.addressHTML | lstring:locale"></span>
                <div ng-bind-html="document.address | lstring:locale"></div>
                {{document.city | lstring:locale}}<span ng-show="document.city && document.state">, </span>
                {{document.state | lstring:locale}}<br ng-show="document.city || document.state" />
                {{document.postalCode | lstring:locale}},
                {{document.country|term}}
            </address>

            <div ng-show="document.phones">
                Phone: <span ng-repeat="item in document.phones">{{item}}<span ng-show="!$last">, </span></span>
            </div>
            <div ng-show="document.faxes">
                Fax: <span ng-repeat="item in document.faxes">{{item}}<span ng-show="!$last">, </span></span>
            </div>
            <div ng-show="document.emails">
                Email: <span ng-repeat="item in document.emails track by $index"><a rel="noopener" translation-url  ng-href="mailto:{{item|encodeURIComponent}}">{{item}}</a><span ng-show="!$last">, </span></span>
            </div>
            <div ng-show="document.websites">
                Website: <span ng-repeat="item in document.websites"><a rel="noopener" translation-url  target="_blank" ng-href="{{item.url|encodeURI}}">{{item.url}}</a><span ng-show="!$last">, </span></span>
            </div>
            <div ng-if="isCNA">
                <!--website url is used when generating certificates-->
                <a rel="noopener" translation-url  ng-href="{{websiteUrl}}/database/{{document.header.schema | urlSchemaShortName|encodeURIComponent}}/{{(documentForUID || document) | uniqueIDWithoutRevision|encodeURIComponent}}/{{document.info.revision|encodeURIComponent}}" target="_blank">
                    <i class="fa fa-external-link-square" aria-hidden="true"></i> 
                    {{(documentForUID || document) | uniqueID}}
                </a>
                <!--{{isCNA}}
            {{document | uniqueID}}{{document}}-->
            </div>
        </script>

    </blockquote>

</div>
