<div>
    <div ng-if="leftMenuFilters" id="Search-Filter">
       
        <div style="border-bottom: 1px solid #eee">
            <h1>Filters</h1>
        </div>

        <div ng-repeat="(schema, filters) in leftMenuFilters" ng-if="filters" style="padding-top:10px">
            <div class="bold color-darkgrey" style="border-bottom:1px solid #eee;cursor: pointer;" ng-click="state[schema]=!state[schema]">
                {{schema | schemaName}}
                <i class="fa pull-right" style="font-size:1.5em; " 
                 ng-class="{'fa-sort-down':state[schema], 'fa-sort-up':!state[schema]}"></i>
            </div>
            <div ng-repeat="(filterKey, filter) in filters"  style="padding-left:10px;padding-top:5px" ng-show="!state[schema]">
                <!-- {{filter}} -->
                <div class="bold color-darkgrey">{{filterKey}}</div>
                <div ng-repeat="option in filter | orderBy:['-selected', '-facet'] | limitTo:5" style="padding-left:10px">
                    <a class="filter" ng-click="saveFilter(option)" ng-class="{'level0':option.level===0,'level1':option.level===1,'level2':option.level===2,'level3':option.level===3, 
                        'disabled':(!searchResult.data.facets.keywords[option.id])}">
                        <i class="fa check" ng-class="{'fa-check-square':option.selected,'fa-square':!option.selected}"></i>
                        {{option.name}}
                        <strong class="pull-right">
                            ({{searchResult.data.facets.keywords[option.id]||0}})
                        </strong>
                    </a>
                </div>
                <div ng-if="filter.length>5"  style="padding-left:10px">
                    <a ng-click="showFilterDialog(schema, filterKey, filter, searchResult.data.facets.keywords, setFilters)" href="#">Show more</a>
                </div>
            </div>
        </div>
    </div>
    <br/>
    <script type="text/ng-template" trados-translation="true" id="filtersDialog">
        <div class="modal-header">
            <h3 class="modal-title">
                {{schema|schemaName}} filter options for {{filterKey}}
            </h3>
        </div>
        <div class="modal-body">	
           
            <div id="divTable"  style="max-height:300px;overflow:scroll; font-size:11px; ">
               
                <div class="col-md-12">
                    <div  class="btn-group pull-right" role="group">
                        <button class="btn btn-default" ng-class="{'btn-primary': view=='list'}" ng-click="showListView()">
                            <i class="fa fa-list-ul" style="cursor:pointer"></i>
                        </button>
                        <button class="btn btn-default" ng-class="{'btn-primary': view!='list'}" ng-click="showTree()">
                            <i class="fa fa-sitemap" style="cursor:pointer"></i>
                        </button>
                    </div>
                </div>
                <div class="col-md-12">
                    <ul class="horizontal-list" ng-show="view=='list'">                         
                        <li ng-repeat="option in options">
                                <a class="filter" ng-click="saveFilter(option)" ng-class="{'level0':option.level===0,'level1':option.level===1,'level2':option.level===2,'level3':option.level===3, 
                                        'disabled':(!facets[option.id])}" href="#">
                                    <i class="fa check"
                                        ng-class="{'fa-check-square':selected[option.id],'fa-square':!selected[option.id]}"></i>
                                    {{option.name}}
                                    <strong>({{facets[option.id]||0}})</strong>
                                </a>
                        </li>
                    </ul>
                    <div ng-show="view=='tree'">
                        <div km-term-check ng-model="treeViewSelected" terms="treeOptions()" binding-type="term[]" enable-search></div>
                    </div>                  
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" aria-label="Close" ng-click="closeDialog()" ng-disabled="loading">Cancel</button>
            <button type="button" class="btn btn-primary pull-left" ng-click="apply()">Apply</button>
        </div>
    </script>
</div>
