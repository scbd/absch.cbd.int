<div id="RegisterPage">
    <link href="/app/css/register.css" rel="stylesheet">
    <link href="/app/css/record.css" rel="stylesheet">
    <style>
        .popover {
            margin-top: 3px;
            background-color: #d9534f !important;
            border: 1px solid #ccc;
            border: 1px solid rgba(0, 0, 0, .2);
        }

        .popover.right>.arrow {
            border-right-color: #999;
            border-right-color: rgba(0, 0, 0, .25);
        }

        .popover.right>.arrow:after {
            border-right-color: #d9534f;
        }
        .cursor{
            cursor: pointer;
        }
        .overview>tbody>tr>td{
            padding:3px!important;
            border:0;
        }
        
    </style>
    <span register-top-menu></span>

    <div class="register-content card card-1-notrans">
        <div class="register-content-header bg-darkgrey color-white">
            <div style="padding:10px 10px;">
                <h3>Dashboard </h3>
            </div>
        </div>
        <div class="register-content-content">
            <div style="margin:10px 0 20px 0;">

                <h4 style="margin-top:0; margin-bottom:0; padding:0 0 5px 0;border-bottom:1px solid #ddd;">
                    <i class="fa fa-chevron-circle-down cursor" ng-show="!showProfileInfo" aria-hidden="true" ng-click="showProfileInfo=true"></i>
                    <i class="fa fa-chevron-circle-up cursor" ng-show="showProfileInfo" aria-hidden="true" ng-click="showProfileInfo=false"></i>
                    <span class="hidden-xs">Welcome </span>
                    <span class="color-black bold">{{user.name}}
                        <span ng-if="roles.isAbsPublishingAuthority" style="font-weight: normal;"> (Publishing
                            Authority)</span>
                        <span ng-if="roles.isAbsNationalAuthorizedUser" style="font-weight: normal;"> (Authorized User)</span>
                    </span>
                </h4>

                <div class="row" style="background-color: #f9f9f9;border:1px solid #ddd; border-top: 0; margin:0px; padding:10px 0 10px 0; border-bottom-left-radius: 5px;border-bottom-right-radius: 5px; "
                    ng-if="showProfileInfo">
                    <div class="col-md-6 cp-header">
                        <table>
                            <tr>
                                <td>
                                    <label>Name:</label>
                                </td>
                                <td>
                                    {{user.name}}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Primary email:</label>
                                </td>
                                <td>
                                    {{user.email}}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Country affiliation:</label>
                                </td>
                                <td ng-if="user.government">
                                    <a translation-url href="/countries/{{user.government | uppercase}}">
                                        {{userCountry|term}}
                                    </a>
                                </td>
                                <td ng-if="!user.government">
                                    none
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6 cp-header">
                        <table>
                            <td>
                                <label>Role(s):</label>
                            </td>
                            <td>
                                <span class="comma" ng-if="roles.isAbsNationalFocalPoint">
                                    ABS National Focal Point
                                    <span class="helpinfoInline fa fa-info-circle" data-toggle="tooltip" data-html="true"
                                        data-title="The National Focal Point is responsible for liason with the Secretariat as well as to designate themselves or another user as the Publishing Authority (PA)."
                                        data-container="body"></span>
                                </span>

                                <span class="comma" ng-if="roles.isAbsPublishingAuthority">
                                    Publishing Authority (PA)
                                    <span class="helpinfoInline fa fa-info-circle " data-toggle="tooltip" data-html="true"
                                        data-title="Each country can designate only one Publishing Authority (PA). The PA's job is to make information publically available by verifing and publishing records. A PA can also designate National Authorized Users (NAUs) who are allowed to submit draft records for their country."
                                        data-container="body"></span>
                                </span>

                                <span class="comma" ng-if="roles.isAbsNationalAuthorizedUser">
                                    National Authorized User (NAU)
                                    <span class="helpinfoInline fa fa-info-circle" data-toggle="tooltip" data-html="true"
                                        data-title="National Authorized User (NAUs) can create draft national record  and submit them to the PA for approval."
                                        data-container="body"></span>
                                </span>

                                <span class="comma" ng-if="roles.isUser">
                                    Registered User
                                    <span class="helpinfoInline fa fa-info-circle" data-toggle="tooltip" data-html="true"
                                        data-title="Regular users can create draft reference records and request their publication from the SCBD."
                                        data-container="body"></span>
                                </span>

                                <span class="comma" ng-if="roles.isAbsAdministrator">
                                    <strong class="color-pink">ABSCH Admin</strong>
                                </span>

                                <span class="comma" ng-if="roles.isAdministrator">
                                    <strong class="color-pink">Admin</strong>
                                </span>

                            </td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Update profile:</label>
                                </td>
                                <td>
                                    <a translation-url href="https://accounts.cbd.int/profile" target="_new">
                                        accounts.cbd.int/profile
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Update password:</label>
                                </td>
                                <td>
                                    <a translation-url href="https://accounts.cbd.int/password" target="_new">
                                        accounts.cbd.int/password
                                    </a>
                                </td>

                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <top-requests view-all-url="/register/pending-requests"></top-requests>

            <div id="SubmitPage" style="background-color:#f9f9f9;">

                <div id="menuPlaceholder" ng-if="roles.isUser" class="bg-white">
                    <div class="row" style="padding:0;margin:0 0 5px 0;">
                        <table class="overview table" style="width:100%;">
                            <thead></thead>
                            <tbody>
                                <tr>
                                    <td style="min-width:250px;" class="bold">
                                        <h4 style="padding:0;margin:0;">
                                            Record overview</h4>
                                    </td>
                                    <td style="width:7%;font-size: 12px;" class="hidden-xs text-center bold"> <span
                                            class="label label-success"></span> Published</td>
                                    <td style="width:7%;font-size: 12px;" class="hidden-xs text-center bold"> <span
                                            class="label label-default"></span> Drafts</td>
                                    <td style="width:7%;font-size: 12px;" class="hidden-xs text-center bold"> <span
                                            class="label label-danger"></span> Requests</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div>

                    <div id="menuPlaceholder" ng-if="isNationalUser" style="margin:10px 0 20px 0;">

                        <div class="row" style="padding:0;margin:0 1px 0 1px; border-bottom:1px solid #ddd; ">
                            <span class="color-blue">National records</span>
                            <span href="#" class="helpinfoInline fa fa-info-circle color-litegrey" data-toggle="tooltip"
                                data-html="true" data-title="National records contain information that is typically required to be reported as part of a Party’s obligations and must be approved by the Publishing Authority prior to being made publically available."
                                data-container="body"></span>
                        </div>


                        <table class="overview table" style="width:100%;">
                            <thead></thead>
                            <tbody>
                                <tr>
                                    <td style="width:70px;">
                                        <div class="btn-group btn-group-xs" style="width:70px;" role="group">
                                            <button type="button" class="btn btn-xs btn-default" ng-click="showTopRecords($event,'contact')">
                                                <i class="fa fa-chevron-circle-down cursor" ng-class="{'fa-chevron-circle-down':!topRecords['contact'], 'fa-chevron-circle-up':topRecords['contact']}"
                                                    aria-hidden="true"></i>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoNew($event,'contact')"><i
                                                        class="fa fa-plus"></i></button>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoList($event,'contact')"><i
                                                        class="fa fa-list"></i></button>
                                        </div>
                                    </td>
                                    <td style="min-width:180px!important;">
                                        <a translation-url href="#" ng-click="gotoList($event,'contact')" class="color-darkgrey"
                                            style="font-weight:500;">
                                            National contacts (CON)</a>

                                    </td>
                                    <td style="width:7%;" class="text-center hidden-xs"><a translation-url ng-href="/register/CON/status/published"
                                            class="label label-success" ng-class="{'bg-litegrey': facets('contact','publish')===0}">{{facets('contact','publish')}}</a>
                                    </td>

                                    <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/CON/status/drafts"
                                            class="label label-default" ng-class="{'bg-litegrey': Math.max(0, facets('contact','draft') - facets('contact','request'))===0}">{{Math.max(0,
                                            facets('contact','draft') - facets('contact','request'))}}</a> </td>

                                    <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/CON/status/requests"
                                            class="label label-danger" ng-class="{'bg-litegrey': facets('contact','request')===0}">{{facets('contact','request')}}</a>
                    </div>
                    </td>
                    </tr>
                    </tbody>
                    </table>
                    <div ng-if="topRecords['contact']" style="position: relative;top:-5px;">
                        <top-records schema="contact" top="10" style="padding-top:5px;" show-schema-name="false"></top-records>
                    </div>


                    <div ng-repeat="schema in nationalSchemas">
                        <table class="overview table table-hover" style="width:100%;">
                            <thead></thead>
                            <tbody>
                                <tr>
                                    <td style="width:70px;">
                                        <div class="btn-group btn-group-xs" style="width:70px;" role="group">
                                            <button type="button" class="btn btn-xs btn-default" ng-click="showTopRecords($event,schema)">
                                                <i class="fa fa-chevron-circle-down cursor" ng-class="{'fa-chevron-circle-down':!topRecords[schema], 'fa-chevron-circle-up':topRecords[schema]}"
                                                    aria-hidden="true"></i>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoNew($event,schema)"><i
                                                        class="fa fa-plus"></i></button>
                                                <button type="button" class="btn btn-xs btn-default" ng-click="gotoList($event,schema)"><i
                                                        class="fa fa-list"></i></button>
                                        </div>
                                    </td>
                                    <td style="min-width:180px!important;">
                                        <a translation-url href="#" ng-click="gotoList($event,schema)" class="color-darkgrey"
                                            style="font-weight:500;">
                                            {{schema|schemaName}} ({{schema|urlSchemaShortName}})</a>
                                    </td>
                                    <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/published"
                                            class="label label-success" ng-class="{'bg-litegrey': facets(schema,'publish')===0}">{{facets(schema,'publish')}}</a>
                                    </td>

                                    <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/drafts"
                                            class="label label-default" ng-class="{'bg-litegrey': Math.max(0, facets(schema,'draft') - facets(schema,'request'))===0}">{{Math.max(0,
                                            facets(schema,'draft') - facets(schema,'request'))}}</a> </td>

                                    <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/requests"
                                            class="label label-danger" ng-class="{'bg-litegrey': facets(schema,'request')===0}">{{facets(schema,'request')}}</a>
                    </div>
                    </td>
                    </tr>
                    </tbody>
                    </table>
                    <div ng-if="topRecords[schema]" style="width:100%">
                        <top-records schema="{{schema}}" top="10" style="padding-top:5px;" show-schema-name="false"></top-records>
                    </div>
                </div>
            </div>

            <div class="row" style="padding:0;margin:0 1px 0 1px; border-bottom:1px solid #ddd; ">
                <span class="color-orange"> Reference records
                    <span href="#" class="helpinfoInline fa fa-info-circle color-litegrey" data-toggle="tooltip"
                        data-html="true" data-title="Reference records contain information relevant to the Protocol's implemenation. This information can be made available by any registered user (including representatives of Governments, indigenous and local communities, academia, nongovernmental organizations, research institutions, business representatives, etc.). All reference records are validated by the Secretariat prior to being made publically available."
                        data-container="body"></span>
                </span>
            </div>

            <div ng-repeat="schema in referenceSchemas">
                <table class="overview table table-hover" style="width:100%;">
                    <thead></thead>
                    <tbody>
                        <tr>
                            <td style="width:70px;">
                                <div class="btn-group btn-group-xs" style="width:70px;" role="group">
                                    <button type="button" class="btn btn-xs btn-default" ng-click="showTopRecords($event,schema)">
                                        <i class="fa fa-chevron-circle-down cursor" ng-class="{'fa-chevron-circle-down':!topRecords[schema], 'fa-chevron-circle-up':topRecords[schema]}"
                                            aria-hidden="true"></i>
                                        <button type="button" class="btn btn-xs btn-default" ng-click="gotoNew($event,schema)"><i
                                                class="fa fa-plus"></i></button>
                                        <button type="button" class="btn btn-xs btn-default" ng-click="gotoList($event,schema)"><i
                                                class="fa fa-list"></i></button>
                                </div>
                            </td>
                            <td style="min-width:180px!important;">
                                <a translation-url href="#" ng-click="gotoList($event,schema)" class="color-darkgrey"
                                    style="font-weight:500;">
                                    {{schema|schemaName}} ({{schema|urlSchemaShortName}})</a>
                            </td>
                            <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/published"
                                    class="label label-success" ng-class="{'bg-litegrey': facets(schema,'publish')===0}">{{facets(schema,'publish')}}</a>
                            </td>

                            <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/drafts"
                                    class="label label-default" ng-class="{'bg-litegrey': Math.max(0, facets(schema,'draft') - facets(schema,'request'))===0}">{{Math.max(0,
                                    facets(schema,'draft') - facets(schema,'request'))}}</a> </td>

                            <td style="width:7%;" class="text-center  hidden-xs"><a translation-url ng-href="/register/{{schema|urlSchemaShortName}}/status/requests"
                                    class="label label-danger" ng-class="{'bg-litegrey': facets(schema,'request')===0}">{{facets(schema,'request')}}</a>
            </div>
            </td>
            </tr>
            </tbody>
            </table>
            <div ng-if="topRecords[schema]" style="width:100%">
                <top-records schema="{{schema}}" top="10" style="padding-top:5px;" show-schema-name="false"></top-records>
            </div>
        </div>

    </div>
</div>

<!-- controller -->
