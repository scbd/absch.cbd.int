<div id="SubmitPage" >
    <link href="/app/css/register.css" rel="stylesheet">
    <link href="/app/css/record.css" rel="stylesheet">

    <span register-top-menu></span>
    <div id="innerPage" class="card card-1-notrans bg-white innerPageContent mx-1 mx-lg-3 mt-3 mb-5">
        
        <div class="register-content-header"  ng-class="{'bg-blue': schemaType != 'referenceRecords','bg-orange': schemaType == 'referenceRecords' }">
            <div class="p-1">
                <span class="btn-group float-end dashboard-tour pt-1">
                    <a class="text-decoration-none text-secondary d-inline-flex text-white help-tour link2" rel="noopener" ng-href="#" ng-click="tour()"> 
                        <i class="bi bi-question-circle"></i> 
                        <span class="d-none d-sm-block ps-1"> {{::('recordListT.tour'|$translate)}}</span>
                    </a>
                </span>
                <h3 class="p-0 px-1 m-0 fw-normal">
                <a class="text-decoration-none text-white" rel="noopener" href="/register" ><span ng-bind="schema|mapSchema|schemaNamePlural"></span> ( <span ng-bind="schema | schemaShortName"></span>)  </a>                                
                </h3>
            </div>
        </div>
          <div ng-if="recordListsVueComponent">
             <record-lists ng-vue="recordListsVueComponent" :languages="languages" :schema-name="schemaName" :user="user"  :refresh-key="recordsUpdated"></record-lists>
          </div>

        <script type="text/ng-template" trados-translation="true" id="deleteRecordModal">              
                
                    <div class="modal-header bg-danger text-white">
                       <h4 class="modal-title" >{{::('recordListT.confirmDelete'|$translate)}} <i ng-show="loading" class="fa fa-spinner fa-spin"></i></h4>
                    </div>
                    <div class="modal-body bg-white" >
                        <div ng-show="isDraft(recordToDelete)" class="card">
                            <div class="card-header">{{::('recordListT.draftRecord'|$translate)}} </div>
                            <div class="row ps-3 mt-2">     
                                <div class="col-2 fw-bold">{{::('recordListT.title'|$translate)}}</div> <div class="col-10" ng-bind="recordToDelete.workingDocumentTitle|lstring"></div>
                              </div>
                             <div class="row ps-3 mt-2">    
                                <div class="col-2 fw-bold">{{::('recordListT.uniqueId'|$translate)}}</div> <div class="col-10"> <i>{{::('recordListT.draftUpper'|$translate)}} </i></div>
                             </div>
                            <div class="row ps-3 mt-2"> 
                                <div class="col-2 fw-bold" >{{::('recordListT.summary'|$translate)}}</div> <div class="col-10"> <span ng-bind-html="recordToDelete.workingDocumentSummary|lstring"></span></div>
                             </div>
                            <div class="row m-2 ps-3"> 
                                <div class="col-12"> <button type="button" class="btn btn-danger float-end" ng-disabled="loading" ng-click="deleteDraft(recordToDelete)">{{::('recordListT.deleteDraft'|$translate)}}</button></div>
                            </div>
                        </div>

                        <div ng-show="isPublished(recordToDelete)" class="card mt-2">
                            <div class="card-header">{{::('recordListT.publishedRecord'|$translate)}}</div>
                             <div class="row mb-2  mt-2"  ng-show="isIRCC">     
                                 <div class="col-12 bold">
                                    {{::('recordListT.irrcInfo'|$translate)}}
                                </div>
                              </div>
                            <div class="row ps-3  mt-2">     
                                <div class="col-2 fw-bold">{{::('recordListT.title'|$translate)}}</div> <div class="col-10" ng-bind="recordToDelete.title|lstring"></div>
                              </div>
                             <div class="row ps-3  mt-2">    
                                <div class="col-2 fw-bold">{{::('recordListT.uniqueId'|$translate)}}</div> <div class="col-10"> <a class="text-decoration-none" rel="noopener" translation-url  href="/database/{{recordToDelete | uniqueIDWithoutRevision}}" target="_blank" ng-bind="recordToDelete | uniqueIDWithoutRevision"></a></div>
                             </div>
                            <div class="row ps-3  mt-2"> 
                                <div class="col-2 fw-bold" >{{::('recordListT.summary'|$translate)}}</div> <div class="col-10"> <span ng-bind-html="recordToDelete.summary|lstring"></span></div>
                             </div>

                              <div class="row" ng-show="isIRCC"> 
                                   <div class="col-12">
                                        <div km-form-languages multiple ng-model="recordToDelete.document.header.languages" class="float-end"></div><br>
                                        <div class="km-control-group">
                                            <div class="km-control-group" name="amendmentDescription" required caption="{{::('recordListT.amendmentDescription'|$translate)}}">
                                            <div km-textbox-ml ng-model="recordToDelete.document.amendmentDescription" rows="3" placeholder="" locales="recordToDelete.document.header.languages" />
                                            </div>
                                        </div>
                                        <div class="alert alert-danger" ng-if="recordToDelete.showRevokeError">{{::('recordListT.enterSummary'|$translate)}}</div>
                                        <button type="button" class="btn btn-danger" ng-disabled="loading" ng-click="revokeRecord(recordToDelete)">
                                            {{::('recordListT.revokeIrrc'|$translate)}}
                                        </button>
                                    </div>
                             </div>

                            <div class="row mt-2" ng-show="!isIRCC">
                                <div class="col-12 px-4">  
                                    <div ng-show="!canDeletePublished" class="alert alert-warning" role="alert">{{::('recordListT.deleteDraftRecord'|$translate)}}</div> 
                                    <button ng-show="security" type="button" class="btn btn-danger float-end m-2" ng-disabled="loading || !canDeletePublished" ng-click="deleteRecord(recordToDelete)" data-bs-toggle="tooltip" data-placement="top" title="{{::('recordListT.note'|$translate)}}">
                                        <span ng-if="!security.canDelete">{{::('recordListT.requestDeletion'|$translate)}} </span> 
                                        <span ng-if="security.canDelete"> {{::('recordListT.deleteRecord'|$translate)}} </span>
                                    </button> 
                                </div>
                            </div>
                        </div>

                    </div>
                   <!-- <div class="modal-footer" >
                         <button type="button" class="btn btn-default" ng-click="closeDialog()">{{::('recordListT.cancel'|$translate)}}</button> 
                    </div>-->
        </script>

        <script type="text/ng-template" trados-translation="true" id="duplicateRecordModal">
                <div class="modal-header">
                    <h4>{{::('recordListT.duplicateRecord'|$translate)}}<i ng-show="loading" class="fa fa-spinner fa-spin"></i></h4>
                </div>
                <div class="modal-body">
                    <p>{{::('recordListT.confirm'|$translate)}}</p>
                </div>
                <div class="modal-footer mt-0">
                    <button ng-disabled="loading" type="button" class="btn btn-secondary" ng-click="closeDialog('duplicateRecordModal')">{{::('recordListT.cancel'|$translate)}}</button>
                    <button ng-disabled="loading" type="button" ng-click="duplicate(recordToDuplicate)" class="btn btn-primary">{{::('recordListT.duplicate'|$translate)}}</button>
                </div>
        </script>

        <script type="text/ng-template" trados-translation="true" id="recallWorkflowRequestModal">
                <div class="modal-header">
                    <h4>{{::('recordListT.cancelPublishingRequest'|$translate)}}<i ng-show="loading" class="fa fa-spinner fa-spin"></i></h4>
                </div>
                <div class="modal-body">
                    <h2>{{::('recordListT.permission'|$translate)}}</h2>
                </div>
                <div class="modal-footer mt-0">
                    <button type="button" class="btn btn-secondary" ng-click="closeDialog()">{{::('recordListT.doNotCancel'|$translate)}}</button>
                    <button ng-disabled="loading" type="button" ng-click="deleteWorkflowRequest(recordForDeleteWorkflowRequest)" class="btn btn-primary float-start">{{::('recordListT.cancelRequest'|$translate)}}</button>

                </div>
        </script>
        <script type="text/ng-template" trados-translation="true" id="errorModal">
            <div class="modal-header">
                <h4>{{::('recordListT.error'|$translate)}}</h4>
            </div>
            <p class="m-3" ng-bind="errorMessage"></p>
            <div class="modal-footer" >
                <button type="button" class="btn btn-default" ng-click="closeDialog()">{{::('recordListT.ok'|$translate)}}</button>
            </div>
        </script>
        </div>
    </div>
    <joyride ng-if="tourOn"></joyride>
</div>
