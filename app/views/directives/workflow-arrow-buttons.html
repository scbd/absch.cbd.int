<div class="row margin-bottom-20">
    <style>
        .margin-bottom-20 {
            margin-bottom: 20px;
        }

        .steps {
            list-style: none;
            overflow: hidden;
            font: 14px;
            margin: 0;
            padding: 0;
            font-weight: 450;
        }

        .steps li {
            float: left;
        }

        .steps li a {
            color: white;
            text-decoration: none;
            padding: 8px 0 8px 55px;
            background: #ccc;
            position: relative;
            display: block;
            float: left;
        }

        .steps li a:after {
            content: " ";
            display: block;
            width: ;
            height: 0;
            border-top: 50px solid transparent;
            /* Go big on the size, and let overflow hide */
            border-bottom: 50px solid transparent;
            border-left: 30px solid #ccc;
            position: absolute;
            top: 50%;
            margin-top: -50px;
            left: 100%;
            z-index: 2;
        }

        .steps li a:before {
            content: " ";
            display: block;
            width: 0;
            height: 0;
            border-top: 50px solid transparent;
            /* Go big on the size, and let overflow hide */
            border-bottom: 50px solid transparent;
            border-left: 30px solid white;
            position: absolute;
            top: 50%;
            margin-top: -50px;
            margin-left: 1px;
            left: 100%;
            z-index: 1;
        }

        .steps li:first-child a {
            padding-left: 24px;
        }

        .steps li:a {
            background: #ccc;
        }

        .steps li:a:after {
            border-left-color: #ccc;
        }

        .steps li a:hover {
            background: #aaa;
        }

        .steps li a:hover:after {
            border-left-color: #aaa !important;
        }

        .steps li.arrowSelected a, .active-button {
            background: #aaa !important;
            color: #000 !important;
        }

        .steps li.arrowSelected a:after {
            border-left-color: #aaa !important;
        }


        .steps li.publish a:hover {
            background: #5cb85c;
            color: #FFF !important;
        }

        .steps li.publish a:hover:after {
            border-left-color: #5cb85c !important;
        }

        .steps li.publish.arrowSelected a {
            background: #5cb85c !important;
            color: #FFF !important;
        }

        .steps li.publish.arrowSelected a:after {
            border-left-color: #5cb85c !important;
        }
        .viewForm{
            margin: 20px 0px;
        }
    </style>

    <span block-region activate="loading" ng-if="loading" update-parent-position="true" block-text="processing..."></span>
    <div class="workflow-arrows margin-bottom-20"  >
        <ng-include onload="workflowScope=workflowScope" src="'template/workflow-arrows'"></ng-include>
    </div>

    <div class="workflow-validation-error">
        <div km-document-validation ng-model="validationReport" container="{{container}}"></div>
    </div>

    <div style="display:none" id="msgDraftSaveMessage">
        Your record has been saved as a draft.
    </div>

    <div class="row" id="divShowError" ng-show="errorMessage">
        <div class="col-xs-12">
            <div class="alert alert-danger" role="alert">
                <button type="button" class="close" ng-click="errorMessage=undefined">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button> {{errorMessage}}
            </div>
        </div>
    </div>



    <div ng-if="tab=='intro'" km-tab="intro">
        <div ng-transclude="introForm">
            <i ng-if="tab=='intro' && loading" class="fa fa-spinner fa-spin"></i>
            <h3>{{article.title|lstring}}</h3>
            <p ng-bind-html="article.content|lstring|toTrusted"></p>
        </div>
    </div>

    <div ng-show="tab=='edit'" km-tab="edit" class="edit-form editForm">
        <div ng-transclude="editForm"></div>
    </div>

    <div ng-show="tab=='review'" km-tab="review" id="schemaView" class="viewForm">
        <div ng-transclude="reviewForm"></div>
    </div>
    <div ng-show="tab=='publish'" km-tab="publish">
        <div ng-transclude-slot="publishForm"></div>
        <div class="row margin-bottom-20">
            <div class="clearfix"></div>

            <div class="col-xs-12">

                <ul style="list-style-type:none;margin:0;padding:0;padding-top:10px;">
                    <li style="display: inline;"><button type="button" class="btn btn-warning " ng-click="close()"
                            ng-disabled="loading">
                            <i class="glyphicon glyphicon-remove"></i> Close</button>
                    </li>
                    <li style="display: inline;" ng-show="security.canSave">
                        <button type="button" class="btn btn-danger bg-published " width="50px" ng-click="tab='publish';publish()"
                            ng-disabled="loading">Publish
                            <i ng-show="tab=='publish' && loading" class="fa fa-spinner fa-spin"></i>
                        </button>
                    </li>
                    <li style="display: inline;" ng-show="security.canSave!==undefined && (!security.canSave && security.canSaveDraft)">
                        <button id="publish_button" type="button" class="btn btn-danger bg-request" ng-href="#"
                            ng-click="publishRequest()" ng-disabled="loading">Request Publication
                            <i ng-show="loading" class="fa fa-spinner fa-spin"></i>
                        </button>
                    </li>

                </ul>
            </div>

            <div class="clearfix"></div>

        </div>

        <div ng-transclude="reviewForm"></div>
    </div>
    <br/>
    <div class="workflow-tabs">
        <ng-include onload="workflowScope=workflowScope" src="'template/workflow-arrows'"></ng-include>
    </div>

    <script type="text/ng-template" trados-translation="true" id="template/workflow-arrows">
        <div class="hidden-xs">

            <div class="pull-right">
                <!--  -->
                <button type="button" class="btn  btn-default bg-draft" ng-click="workflowScope.tab='draft';workflowScope.saveDraft()" 
                ng-disabled="workflowScope.loading" ng-show="workflowScope.security.canSaveDraft">
                    <i ng-show="workflowScope.tab=='draft' && (workflowScope.loading || workflowScope.security==undefined)" class="fa fa-spinner fa-spin"></i>
                    Save Draft</button>
            </div>

            <!-- one page form -->
            
             <div class="row pull-left">
                <div class="col-xs-1">
                        <button type="button" class="btn btn-default bg-grey color-white " 
                        ng-disabled="!prevTab" ng-click="changeTab('prev')" ng-class="{'active-button':prevTab}">
                                <span class="glyphicon glyphicon-backward"></span>
                        </button>
                 </div>
                <div class="col-xs-10">
                    <ul class="steps">
                        <li ng-class="{'arrowSelected': workflowScope.tab=='intro'}">
                            <a href="#" ng-click="workflowScope.switchTab('intro')" ng-disabled="workflowScope.loading || workflowScope.security==undefined">Introduction</a>
                        </li>
                        <li ng-class="{'arrowSelected': workflowScope.tab=='edit'}">
                            <a href="#" ng-click="workflowScope.switchTab('edit')" ng-disabled="workflowScope.loading || workflowScope.security==undefined">Submission form</a>
                        </li>
                        <li ng-class="{'arrowSelected': workflowScope.tab=='review'}">
                            <a href="#" ng-click="workflowScope.switchTab('review')" ng-disabled="workflowScope.loading || workflowScope.security==undefined">Preview</a>
                        </li>
                        <li class="publish" ng-class="{'publish arrowSelected': workflowScope.tab=='publish'}">
                            <a href="#" ng-click="workflowScope.switchTab('publish')" ng-disabled="workflowScope.loading || workflowScope.security==undefined">Publish</a>
                        </li>
                    </ul>
                </div>
               <div class="col-xs-1">
                    <button type="button" class="btn btn-default bg-grey color-white " 
                    ng-disabled="!nextTab" ng-click="changeTab('next')"  ng-class="{'active-button':nextTab}">
                        <span class="glyphicon glyphicon-forward"> </span>
                    </button>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <!-- small screen view -->
        <div style="margin:0px 20px 20px 0;" class="visible-xs hidden-sm hidden-md hidden-lg">
            <div class="btn-group" role="group" aria-label="...">
                <button type="button" class="btn btn-default bg-grey color-white ">
                    <span class="glyphicon glyphicon-backward"></span>
                </button>
                <button type="button" class="btn btn-default bg-grey color-white "> Introduction
                    <span class="caret"></span>
                </button>
                <button type="button" class="btn btn-default bg-grey color-white ">
                    <span class="glyphicon glyphicon-forward"> </span>
                </button>
            </div>
            <button type="button" class="btn  btn-default bg-draft ">
                <i class="fa fa-save"></i>
            </button>
            <button type="button" class="btn  btn-default bg-published ">Publish</button>
        </div>
    </script>


    <div id="dialogCancel" class="modal fade" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" ng-click="closeDialog()" aria-hidden="true">×</button>
                        <h4>Canceling changes</h4>
                    </div>
                    <div class="modal-body">
                        <p>If you want to cancel the changes you just made to this draft, you can keep the previous
                            version of the draft, which will then be available in the list of drafts on the
                            Management Centre. You or your colleagues can then continue editing
                            the record in the current, or a later, session.</p>
                    </div>
                    <div class="modal-footer" style="margin-top:0">
                        <button type="button" ng-click="closeDialog()" class="btn btn-default cancelClose">Cancel</button>
                        <button type="button" ng-click="close(true)" class="btn btn-warning closeWithoutSaving pull-left">Close
                            without saving</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="divAdditionalInfo" class="modal fade" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-red color-white">
                        <button type="button" class="close" ng-click="closeAddInfoDialog(false)" aria-hidden="true">×</button>
                        <h2>Publishing Request</h2>
                    </div>
                    <div class="modal-body">
                        <p>Would you like to add additional information for the publishing request?</p>
                        <textarea class="form-control" rows="5" name="info" ng-model="InfoDoc.additionalInfo"></textarea>
                    </div>
                    <div class="modal-footer" style="margin-top:0">
                        <button type="button" class="btn btn-default" ng-click="closeAddInfoDialog(false)">Cancel</button>
                        <button type="button" id="continueRequest" class="btn btn-primary pull-left" ng-disabled="loading">Send
                            Request</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="divWorkflowDraft" class="modal fade" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-red color-white">
                        <h2>Edit Publishing Request</h2>
                    </div>
                    <div class="modal-body">
                        <p>Editing and saving as draft a publishing request will cancel the publishing request and
                            send it back to draft mode.
                            <br />Are you sure you want to continue?</p>
                    </div>
                    <div class="modal-footer" style="margin-top:0">
                        <button type="button" class="btn btn-default" ng-click="closeWorkflowDraftDialog(false)">No</button>
                        <button type="button" id="continueWorkflowDraftRequest" class="btn btn-primary pull-left"
                            ng-disabled="loading">Yes</button>
                    </div>
                </div>
            </div>
        </div>
</div>
